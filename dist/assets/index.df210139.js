var Al=Object.defineProperty,Ol=Object.defineProperties;var Tl=Object.getOwnPropertyDescriptors;var Nr=Object.getOwnPropertySymbols;var rs=Object.prototype.hasOwnProperty,ns=Object.prototype.propertyIsEnumerable;var is=(r,e,t)=>e in r?Al(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w=(r,e)=>{for(var t in e||(e={}))rs.call(e,t)&&is(r,t,e[t]);if(Nr)for(var t of Nr(e))ns.call(e,t)&&is(r,t,e[t]);return r},D=(r,e)=>Ol(r,Tl(e));var On=(r,e)=>{var t={};for(var n in r)rs.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&Nr)for(var n of Nr(r))e.indexOf(n)<0&&ns.call(r,n)&&(t[n]=r[n]);return t};import{am as Ir,a9 as we,aa as Be,an as rr,e as Nt}from"./vendor.58b0d04f.js";import{l as El}from"./index.5f62a056.js";import{a as Ul}from"./memoize-one.esm.2caadecc.js";var fe={exports:{}},ss=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},It;function os(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Dl=0;function xl(r){return"__private_"+Dl+++"_"+r}const Rl=ss;function $l(r,e,t){const n=[];return r.forEach(s=>typeof s!="string"?n.push(s):e[Symbol.split](s).forEach((i,o,c)=>{i!==""&&n.push(i),o<c.length-1&&n.push(t)})),n}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param {string} phrase that needs interpolation, with placeholders
 * @param {object} options with values that will be used to replace placeholders
 * @returns {any[]} interpolated
 */function as(r,e){const t=/\$/g,n="$$$$";let s=[r];if(e==null)return s;for(const i of Object.keys(e))if(i!=="_"){let o=e[i];typeof o=="string"&&(o=t[Symbol.replace](o,n)),s=$l(s,new RegExp(`%\\{${i}\\}`,"g"),o)}return s}var ls=(It=xl("apply"),class{constructor(e){Object.defineProperty(this,It,{value:Bl}),this.locale={strings:{},pluralize(t){return t===1?0:1}},Array.isArray(e)?e.forEach(os(this,It)[It],this):os(this,It)[It](e)}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){if(!Rl(this.locale.strings,e))throw new Error(`missing string: ${e}`);const n=this.locale.strings[e];if(typeof n=="object"){if(t&&typeof t.smart_count!="undefined"){const i=this.locale.pluralize(t.smart_count);return as(n[i],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return as(n,t)}});function Bl(r){if(!(r!=null&&r.strings))return;const e=this.locale;this.locale=D(w({},e),{strings:w(w({},e.strings),r.strings)}),this.locale.pluralize=r.pluralize||e.pluralize}var us=function(){var e={},t=e._fns={};e.emit=function(o,c,f,y,g,b,_){var S=n(o);S.length&&s(o,S,[c,f,y,g,b,_])},e.on=function(o,c){t[o]||(t[o]=[]),t[o].push(c)},e.once=function(o,c){function f(){c.apply(this,arguments),e.off(o,f)}this.on(o,f)},e.off=function(o,c){var f=[];if(o&&c){var y=this._fns[o],g=0,b=y?y.length:0;for(g;g<b;g++)y[g]!==c&&f.push(y[g])}f.length?this._fns[o]=f:delete this._fns[o]};function n(i){var o=t[i]?t[i]:[],c=i.indexOf(":"),f=c===-1?[i]:[i.substring(0,c),i.substring(c+1)],y=Object.keys(t),g=0,b=y.length;for(g;g<b;g++){var _=y[g];if(_==="*"&&(o=o.concat(t[_])),f.length===2&&f[0]===_){o=o.concat(t[_]);break}}return o}function s(i,o,c){var f=0,y=o.length;for(f;f<y&&o[f];f++)o[f].event=i,o[f].apply(o[f],c)}return e};let Nl="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Il=(r,e)=>()=>{let t="",n=e;for(;n--;)t+=r[Math.random()*r.length|0];return t},Ll=(r=21)=>{let e="",t=r;for(;t--;)e+=Nl[Math.random()*64|0];return e};var Ml=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",nanoid:Ll,customAlphabet:Il}),Tn=Ir(Ml),cs="Expected a function",ds=0/0,jl="[object Symbol]",zl=/^\s+|\s+$/g,ql=/^[-+]0x[0-9a-f]+$/i,Hl=/^0b[01]+$/i,Wl=/^0o[0-7]+$/i,Vl=parseInt,Gl=typeof we=="object"&&we&&we.Object===Object&&we,Kl=typeof self=="object"&&self&&self.Object===Object&&self,Xl=Gl||Kl||Function("return this")(),Yl=Object.prototype,Ql=Yl.toString,Jl=Math.max,Zl=Math.min,En=function(){return Xl.Date.now()};function eu(r,e,t){var n,s,i,o,c,f,y=0,g=!1,b=!1,_=!0;if(typeof r!="function")throw new TypeError(cs);e=hs(e)||0,Lr(t)&&(g=!!t.leading,b="maxWait"in t,i=b?Jl(hs(t.maxWait)||0,e):i,_="trailing"in t?!!t.trailing:_);function S(j){var X=n,te=s;return n=s=void 0,y=j,o=r.apply(te,X),o}function k(j){return y=j,c=setTimeout(B,e),g?S(j):o}function $(j){var X=j-f,te=j-y,de=e-X;return b?Zl(de,i-te):de}function x(j){var X=j-f,te=j-y;return f===void 0||X>=e||X<0||b&&te>=i}function B(){var j=En();if(x(j))return H(j);c=setTimeout(B,$(j))}function H(j){return c=void 0,_&&n?S(j):(n=s=void 0,o)}function z(){c!==void 0&&clearTimeout(c),y=0,n=f=s=c=void 0}function K(){return c===void 0?o:H(En())}function T(){var j=En(),X=x(j);if(n=arguments,s=this,f=j,X){if(c===void 0)return k(f);if(b)return c=setTimeout(B,e),S(f)}return c===void 0&&(c=setTimeout(B,e)),o}return T.cancel=z,T.flush=K,T}function tu(r,e,t){var n=!0,s=!0;if(typeof r!="function")throw new TypeError(cs);return Lr(t)&&(n="leading"in t?!!t.leading:n,s="trailing"in t?!!t.trailing:s),eu(r,e,{leading:n,maxWait:e,trailing:s})}function Lr(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function ru(r){return!!r&&typeof r=="object"}function nu(r){return typeof r=="symbol"||ru(r)&&Ql.call(r)==jl}function hs(r){if(typeof r=="number")return r;if(nu(r))return ds;if(Lr(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Lr(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(zl,"");var t=Hl.test(r);return t||Wl.test(r)?Vl(r.slice(2),t?2:8):ql.test(r)?ds:+r}var Un=tu,Dn=function(e){if(typeof e!="number"||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var s=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,s));var i=n[s];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+i:(t?"-":"")+e.toFixed(1)+" "+i};function ps(r,e){this.text=r=r||"",this.hasWild=~r.indexOf("*"),this.separator=e,this.parts=r.split(e)}ps.prototype.match=function(r){var e=!0,t=this.parts,n,s=t.length,i;if(typeof r=="string"||r instanceof String)if(!this.hasWild&&this.text!=r)e=!1;else{for(i=(r||"").split(this.separator),n=0;e&&n<s;n++)t[n]!=="*"&&(n<i.length?e=t[n]===i[n]:e=!1);e=e&&i}else if(typeof r.splice=="function")for(e=[],n=r.length;n--;)this.match(r[n])&&(e[e.length]=r[n]);else if(typeof r=="object"){e={};for(var o in r)this.match(o)&&(e[o]=r[o])}return e};var iu=function(r,e,t){var n=new ps(r,t||/[\/\.]/);return typeof e!="undefined"?n.match(e):n},su=iu,ou=/[\/\+\.]/,au=function(r,e){function t(n){var s=su(n,r,ou);return s&&s.length>=2}return e?t(e.split(";")[0]):t};function lu(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var uu=0;function cu(r){return"__private_"+uu+++"_"+r}var xn=cu("publish");class fs{constructor(){Object.defineProperty(this,xn,{value:du}),this.state={},this.callbacks=[]}getState(){return this.state}setState(e){const t=w({},this.state),n=w(w({},this.state),e);this.state=n,lu(this,xn)[xn](t,n,e)}subscribe(e){return this.callbacks.push(e),()=>{this.callbacks.splice(this.callbacks.indexOf(e),1)}}}function du(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];this.callbacks.forEach(n=>{n(...e)})}fs.VERSION="2.0.3";var hu=function(){return new fs},gs=function(e){const t=e.lastIndexOf(".");return t===-1||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}},pu={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};const fu=gs,ms=pu;var gu=function(e){var t;if(e.type)return e.type;const n=e.name?(t=fu(e.name).extension)==null?void 0:t.toLowerCase():null;return n&&n in ms?ms[n]:"application/octet-stream"};function mu(r){return r.charCodeAt(0).toString(32)}function ys(r){let e="";return r.replace(/[^A-Z0-9]/ig,t=>(e+=`-${mu(t)}`,"/"))+e}var yu=function(e){let t="uppy";return typeof e.name=="string"&&(t+=`-${ys(e.name.toLowerCase())}`),e.type!==void 0&&(t+=`-${e.type}`),e.meta&&typeof e.meta.relativePath=="string"&&(t+=`-${ys(e.meta.relativePath.toLowerCase())}`),e.data.size!==void 0&&(t+=`-${e.data.size}`),e.data.lastModified!==void 0&&(t+=`-${e.data.lastModified}`),t},vu=function(e){if(e==null&&(e=typeof navigator!="undefined"?navigator.userAgent:null),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const n=t[1];let[s,i]=n.split(".");return s=parseInt(s,10),i=parseInt(i,10),s<15||s===15&&i<15063||s>18||s===18&&i>=18218},bu=function(e,t){return t.name?t.name:e.split("/")[0]==="image"?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"};function Rn(r){return r<10?`0${r}`:r.toString()}var wu=function(){const e=new Date,t=Rn(e.getHours()),n=Rn(e.getMinutes()),s=Rn(e.getSeconds());return`${t}:${n}:${s}`};const Mr=wu,Pu={debug:()=>{},warn:()=>{},error:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Mr()}]`,...e)}},_u={debug:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${Mr()}]`,...e)},warn:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${Mr()}]`,...e)},error:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Mr()}]`,...e)}};var vs={justErrorsLogger:Pu,debugLogger:_u},Su={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",backToSearch:"Back to Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}};let bs,ws;function E(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Fu=0;function re(r){return"__private_"+Fu+++"_"+r}const Cu=ls,ku=us,{nanoid:Au}=Tn,Ou=Un,$n=Dn,Tu=au,Eu=hu,Uu=gu,Du=gs,xu=yu,Ru=vu,$u=bu,{justErrorsLogger:Bu,debugLogger:Nu}=vs,Iu=Su;class Ne extends Error{constructor(){super(...arguments);this.isRestriction=!0}}typeof AggregateError=="undefined"&&(globalThis.AggregateError=class extends Error{constructor(e,t){super(t);this.errors=e}});class Lu extends AggregateError{constructor(){super(...arguments);this.isRestriction=!0}}var ae=re("plugins"),nr=re("storeUnsubscribe"),Ge=re("emitter"),vt=re("preProcessors"),bt=re("uploaders"),Ke=re("postProcessors"),ir=re("checkRestrictions"),Bn=re("checkMinNumberOfFiles"),sr=re("checkRequiredMetaFieldsOnFile"),Nn=re("checkRequiredMetaFields"),se=re("showOrLogErrorAndThrow"),or=re("assertNewUploadAllowed"),ar=re("checkAndCreateFileStateObject"),lr=re("startIfAutoProceed"),In=re("addListeners"),De=re("updateOnlineStatus"),Xe=re("createUpload"),Ln=re("getUpload"),wt=re("removeUpload"),Ye=re("runUpload");bs=Symbol.for("uppy test: getPlugins");ws=Symbol.for("uppy test: createUpload");class Ps{constructor(e){Object.defineProperty(this,Ye,{value:Ju}),Object.defineProperty(this,wt,{value:Qu}),Object.defineProperty(this,Ln,{value:Yu}),Object.defineProperty(this,Xe,{value:Xu}),Object.defineProperty(this,In,{value:Ku}),Object.defineProperty(this,lr,{value:Gu}),Object.defineProperty(this,ar,{value:Vu}),Object.defineProperty(this,or,{value:Wu}),Object.defineProperty(this,se,{value:Hu}),Object.defineProperty(this,Nn,{value:qu}),Object.defineProperty(this,sr,{value:zu}),Object.defineProperty(this,Bn,{value:ju}),Object.defineProperty(this,ir,{value:Mu}),Object.defineProperty(this,ae,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,nr,{writable:!0,value:void 0}),Object.defineProperty(this,Ge,{writable:!0,value:ku()}),Object.defineProperty(this,vt,{writable:!0,value:new Set}),Object.defineProperty(this,bt,{writable:!0,value:new Set}),Object.defineProperty(this,Ke,{writable:!0,value:new Set}),Object.defineProperty(this,De,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=Iu;const t={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,allowMultipleUploadBatches:!0,debug:!1,restrictions:{maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},meta:{},onBeforeFileAdded:n=>n,onBeforeUpload:n=>n,store:Eu(),logger:Bu,infoTimeout:5e3};if(this.opts=D(w(w({},t),e),{restrictions:w(w({},t.restrictions),e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Nu),this.log(`Using Core v${this.constructor.VERSION}`),this.opts.restrictions.allowedFileTypes&&this.opts.restrictions.allowedFileTypes!==null&&!Array.isArray(this.opts.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");this.i18nInit(),this.calculateProgress=Ou(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:Ru(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:w({},this.opts.meta),info:[],recoveredState:null}),E(this,nr)[nr]=this.store.subscribe((n,s,i)=>{this.emit("state-update",n,s,i),this.updateAll(s)}),this.opts.debug&&typeof window!="undefined"&&(window[this.opts.id]=this),E(this,In)[In]()}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];E(this,Ge)[Ge].emit(e,...n)}on(e,t){return E(this,Ge)[Ge].on(e,t),this}once(e,t){return E(this,Ge)[Ge].once(e,t),this}off(e,t){return E(this,Ge)[Ge].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}get state(){return this.getState()}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.setState({files:D(w({},this.getState().files),{[e]:w(w({},this.getState().files[e]),t)})})}i18nInit(){const e=new Cu([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts=D(w(w({},this.opts),e),{restrictions:w(w({},this.opts.restrictions),e&&e.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions()}),this.setState()}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t=w({},this.getState().files),n={};Object.keys(t).forEach(s=>{const i=w({},t[s]);i.progress=w(w({},i.progress),e),n[s]=i}),this.setState({files:n,totalProgress:0}),this.emit("reset-progress")}addPreProcessor(e){E(this,vt)[vt].add(e)}removePreProcessor(e){return E(this,vt)[vt].delete(e)}addPostProcessor(e){E(this,Ke)[Ke].add(e)}removePostProcessor(e){return E(this,Ke)[Ke].delete(e)}addUploader(e){E(this,bt)[bt].add(e)}removeUploader(e){return E(this,bt)[bt].delete(e)}setMeta(e){const t=w(w({},this.getState().meta),e),n=w({},this.getState().files);Object.keys(n).forEach(s=>{n[s]=D(w({},n[s]),{meta:w(w({},n[s].meta),e)})}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})}setFileMeta(e,t){const n=w({},this.getState().files);if(!n[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}const s=w(w({},n[e].meta),t);n[e]=D(w({},n[e]),{meta:s}),this.setState({files:n})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:n}=this.getState(),s=Object.values(e),i=s.filter(k=>{let{progress:$}=k;return!$.uploadComplete&&$.uploadStarted}),o=s.filter(k=>!k.progress.uploadStarted),c=s.filter(k=>k.progress.uploadStarted||k.progress.preprocess||k.progress.postprocess),f=s.filter(k=>k.progress.uploadStarted),y=s.filter(k=>k.isPaused),g=s.filter(k=>k.progress.uploadComplete),b=s.filter(k=>k.error),_=i.filter(k=>!k.isPaused),S=s.filter(k=>k.progress.preprocess||k.progress.postprocess);return{newFiles:o,startedFiles:c,uploadStartedFiles:f,pausedFiles:y,completeFiles:g,erroredFiles:b,inProgressFiles:i,inProgressNotPausedFiles:_,processingFiles:S,isUploadStarted:f.length>0,isAllComplete:t===100&&g.length===s.length&&S.length===0,isAllErrored:!!n&&b.length===s.length,isAllPaused:i.length!==0&&y.length===i.length,isUploadInProgress:i.length>0,isSomeGhost:s.some(k=>k.isGhost)}}validateRestrictions(e,t){try{return E(this,ir)[ir](e,t),{result:!0}}catch(n){return{result:!1,reason:n.message}}}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){E(this,or)[or](e);const{files:t}=this.getState();let n=E(this,ar)[ar](t,e);return t[n.id]&&t[n.id].isGhost&&(n=D(w({},t[n.id]),{data:e.data,isGhost:!1}),this.log(`Replaced the blob in the restored ghost file: ${n.name}, ${n.id}`)),this.setState({files:D(w({},t),{[n.id]:n})}),this.emit("file-added",n),this.emit("files-added",[n]),this.log(`Added file: ${n.name}, ${n.id}, mime type: ${n.type}`),E(this,lr)[lr](),n.id}addFiles(e){E(this,or)[or]();const t=w({},this.getState().files),n=[],s=[];for(let i=0;i<e.length;i++)try{let o=E(this,ar)[ar](t,e[i]);t[o.id]&&t[o.id].isGhost&&(o=D(w({},t[o.id]),{data:e[i].data,isGhost:!1}),this.log(`Replaced blob in a ghost file: ${o.name}, ${o.id}`)),t[o.id]=o,n.push(o)}catch(o){o.isRestriction||s.push(o)}if(this.setState({files:t}),n.forEach(i=>{this.emit("file-added",i)}),this.emit("files-added",n),n.length>5?this.log(`Added batch of ${n.length} files`):Object.keys(n).forEach(i=>{this.log(`Added file: ${n[i].name}
 id: ${n[i].id}
 type: ${n[i].type}`)}),n.length>0&&E(this,lr)[lr](),s.length>0){let i=`Multiple errors occurred while adding files:
`;if(s.forEach(o=>{i+=`
 * ${o.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:s.length}),details:i},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(s,i);{const o=new Error(i);throw o.errors=s,o}}}removeFiles(e,t){const{files:n,currentUploads:s}=this.getState(),i=w({},n),o=w({},s),c=Object.create(null);e.forEach(b=>{n[b]&&(c[b]=n[b],delete i[b])});function f(b){return c[b]===void 0}Object.keys(o).forEach(b=>{const _=s[b].fileIDs.filter(f);if(_.length===0){delete o[b];return}o[b]=D(w({},s[b]),{fileIDs:_})});const y={currentUploads:o,files:i};Object.keys(i).length===0&&(y.allowNewUpload=!0,y.error=null,y.recoveredState=null),this.setState(y),this.calculateTotalProgress();const g=Object.keys(c);g.forEach(b=>{this.emit("file-removed",c[b],t)}),g.length>5?this.log(`Removed ${g.length} files`):this.log(`Removed files: ${g.join(", ")}`)}removeFile(e,t){t===void 0&&(t=null),this.removeFiles([e],t)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).uploadComplete)return;const n=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",e,n),n}pauseAll(){const e=w({},this.getState().files);Object.keys(e).filter(n=>!e[n].progress.uploadComplete&&e[n].progress.uploadStarted).forEach(n=>{const s=D(w({},e[n]),{isPaused:!0});e[n]=s}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e=w({},this.getState().files);Object.keys(e).filter(n=>!e[n].progress.uploadComplete&&e[n].progress.uploadStarted).forEach(n=>{const s=D(w({},e[n]),{isPaused:!1,error:null});e[n]=s}),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e=w({},this.getState().files),t=Object.keys(e).filter(s=>e[s].error);if(t.forEach(s=>{const i=D(w({},e[s]),{isPaused:!1,error:null});e[s]=i}),this.setState({files:e,error:null}),this.emit("retry-all",t),t.length===0)return Promise.resolve({successful:[],failed:[]});const n=E(this,Xe)[Xe](t,{forceAllowNewUpload:!0});return E(this,Ye)[Ye](n)}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const t=E(this,Xe)[Xe]([e],{forceAllowNewUpload:!0});return E(this,Ye)[Ye](t)}reset(){this.cancelAll()}logout(){this.iteratePlugins(e=>{e.provider&&e.provider.logout&&e.provider.logout()})}calculateProgress(e,t){if(!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e.id}`);return}const n=Number.isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:D(w({},this.getFile(e.id).progress),{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:n?Math.round(t.bytesUploaded/t.bytesTotal*100):0})}),this.calculateTotalProgress()}calculateTotalProgress(){const t=this.getFiles().filter(y=>y.progress.uploadStarted||y.progress.preprocess||y.progress.postprocess);if(t.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const n=t.filter(y=>y.progress.bytesTotal!=null),s=t.filter(y=>y.progress.bytesTotal==null);if(n.length===0){const y=t.length*100,g=s.reduce((_,S)=>_+S.progress.percentage,0),b=Math.round(g/y*100);this.setState({totalProgress:b});return}let i=n.reduce((y,g)=>y+g.progress.bytesTotal,0);const o=i/n.length;i+=o*s.length;let c=0;n.forEach(y=>{c+=y.progress.bytesUploaded}),s.forEach(y=>{c+=o*(y.progress.percentage||0)/100});let f=i===0?0:Math.round(c/i*100);f>100&&(f=100),this.setState({totalProgress:f}),this.emit("progress",f)}updateOnlineStatus(){(typeof window.navigator.onLine!="undefined"?window.navigator.onLine:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,t){if(typeof e!="function"){const o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}const n=new e(this,t),s=n.id;if(!s)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");const i=this.getPlugin(s);if(i){const o=`Already found a plugin named '${i.id}'. Tried to use: '${s}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${s} v${e.VERSION}`),n.type in E(this,ae)[ae]?E(this,ae)[ae][n.type].push(n):E(this,ae)[ae][n.type]=[n],n.install(),this}getPlugin(e){for(const t of Object.values(E(this,ae)[ae])){const n=t.find(s=>s.id===e);if(n!=null)return n}}[bs](e){return E(this,ae)[ae][e]}iteratePlugins(e){Object.values(E(this,ae)[ae]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=E(this,ae)[ae][e.type],n=t.findIndex(o=>o.id===e.id);n!==-1&&t.splice(n,1);const s=this.getState(),i={plugins:D(w({},s.plugins),{[e.id]:void 0})};this.setState(i)}close(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.reset(),E(this,nr)[nr](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window!="undefined"&&window.removeEventListener&&(window.removeEventListener("online",E(this,De)[De]),window.removeEventListener("offline",E(this,De)[De]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,n){t===void 0&&(t="info"),n===void 0&&(n=3e3);const s=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:s?e.message:e,details:s?e.details:null}]}),setTimeout(()=>this.hideInfo(),n),this.emit("info-visible")}log(e,t){const{logger:n}=this.opts;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e);break}}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?E(this,Ye)[Ye](e):(E(this,wt)[wt](e),Promise.reject(new Error("Nonexistent upload")))}[ws](){return E(this,Xe)[Xe](...arguments)}addResultData(e,t){if(!E(this,Ln)[Ln](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:n}=this.getState(),s=D(w({},n[e]),{result:w(w({},n[e].result),t)});this.setState({currentUploads:D(w({},n),{[e]:s})})}upload(){var e;(e=E(this,ae)[ae].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();const n=this.opts.onBeforeUpload(t);return n===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&typeof n=="object"&&(t=n,this.setState({files:t})),Promise.resolve().then(()=>{E(this,Bn)[Bn](t),E(this,Nn)[Nn](t)}).catch(s=>{E(this,se)[se](s)}).then(()=>{const{currentUploads:s}=this.getState(),i=Object.values(s).flatMap(f=>f.fileIDs),o=[];Object.keys(t).forEach(f=>{const y=this.getFile(f);!y.progress.uploadStarted&&i.indexOf(f)===-1&&o.push(y.id)});const c=E(this,Xe)[Xe](o);return E(this,Ye)[Ye](c)}).catch(s=>{E(this,se)[se](s,{showInformer:!1})}))}}function Mu(r,e){e===void 0&&(e=this.getFiles());const{maxFileSize:t,minFileSize:n,maxTotalFileSize:s,maxNumberOfFiles:i,allowedFileTypes:o}=this.opts.restrictions;if(i&&e.length+1>i)throw new Ne(`${this.i18n("youCanOnlyUploadX",{smart_count:i})}`);if(o&&!o.some(f=>f.indexOf("/")>-1?r.type?Tu(r.type.replace(/;.*?$/,""),f):!1:f[0]==="."&&r.extension?r.extension.toLowerCase()===f.substr(1).toLowerCase():!1)){const f=o.join(", ");throw new Ne(this.i18n("youCanOnlyUploadFileTypes",{types:f}))}if(s&&r.size!=null){let c=0;if(c+=r.size,e.forEach(f=>{c+=f.size}),c>s)throw new Ne(this.i18n("exceedsSize",{size:$n(s),file:r.name}))}if(t&&r.size!=null&&r.size>t)throw new Ne(this.i18n("exceedsSize",{size:$n(t),file:r.name}));if(n&&r.size!=null&&r.size<n)throw new Ne(this.i18n("inferiorSize",{size:$n(n)}))}function ju(r){const{minNumberOfFiles:e}=this.opts.restrictions;if(Object.keys(r).length<e)throw new Ne(`${this.i18n("youHaveToAtLeastSelectX",{smart_count:e})}`)}function zu(r){const{requiredMetaFields:e}=this.opts.restrictions,{hasOwnProperty:t}=Object.prototype,n=[],s=[];for(let i=0;i<e.length;i++)if(!t.call(r.meta,e[i])||r.meta[e[i]]===""){const o=new Ne(`${this.i18n("missingRequiredMetaFieldOnFile",{fileName:r.name})}`);n.push(o),s.push(e[i]),E(this,se)[se](o,{file:r,showInformer:!1,throwErr:!1})}return this.setFileState(r.id,{missingRequiredMetaFields:s}),n}function qu(r){const e=Object.keys(r).flatMap(t=>{const n=this.getFile(t);return E(this,sr)[sr](n)});if(e.length)throw new Lu(e,`${this.i18n("missingRequiredMetaField")}`)}function Hu(r,e){let{showInformer:t=!0,file:n=null,throwErr:s=!0}=e===void 0?{}:e;const i=typeof r=="object"?r.message:r,o=typeof r=="object"&&r.details?r.details:"";let c=i;if(o&&(c+=` ${o}`),r.isRestriction?(this.log(c),this.emit("restriction-failed",n,r)):this.log(c,"error"),t&&this.info({message:i,details:o},"error",this.opts.infoTimeout),s)throw typeof r=="object"?r:new Error(r)}function Wu(r){const{allowNewUpload:e}=this.getState();e===!1&&E(this,se)[se](new Ne(this.i18n("noMoreFilesAllowed")),{file:r})}function Vu(r,e){const t=Uu(e),n=$u(t,e),s=Du(n).extension,i=Boolean(e.isRemote),o=xu(D(w({},e),{type:t}));if(this.checkIfFileAlreadyExists(o)){const b=new Ne(this.i18n("noDuplicates",{fileName:n}));E(this,se)[se](b,{file:e})}const c=e.meta||{};c.name=n,c.type=t;const f=Number.isFinite(e.data.size)?e.data.size:null;let y={source:e.source||"",id:o,name:n,extension:s||"",meta:w(w({},this.getState().meta),c),type:t,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:f,uploadComplete:!1,uploadStarted:null},size:f,isRemote:i,remote:e.remote||"",preview:e.preview};const g=this.opts.onBeforeFileAdded(y,r);g===!1?E(this,se)[se](new Ne("Cannot add the file because onBeforeFileAdded returned false."),{showInformer:!1,fileDescriptor:e}):typeof g=="object"&&g!==null&&(y=g);try{const b=Object.keys(r).map(_=>r[_]);E(this,ir)[ir](y,b)}catch(b){E(this,se)[se](b,{file:y})}return y}function Gu(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(r=>{r.isRestriction||this.log(r.stack||r.message||r)})},4))}function Ku(){const r=(e,t,n)=>{let s=e.message||"Unknown error";e.details&&(s+=` ${e.details}`),this.setState({error:s}),t!=null&&t.id in this.getState().files&&this.setFileState(t.id,{error:s,response:n})};this.on("error",r),this.on("upload-error",(e,t,n)=>{if(r(t,e,n),typeof t=="object"&&t.message){const s=new Error(t.message);s.details=t.message,t.details&&(s.details+=` ${t.details}`),s.message=this.i18n("failedToUpload",{file:e.name}),E(this,se)[se](s,{throwErr:!1})}else E(this,se)[se](t,{throwErr:!1})}),this.on("upload",()=>{this.setState({error:null})}),this.on("upload-started",e=>{if(!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e.id}`);return}this.setFileState(e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}})}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(e,t)=>{if(!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e.id}`);return}const n=this.getFile(e.id).progress;this.setFileState(e.id,{progress:D(w({},n),{postprocess:E(this,Ke)[Ke].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal}),response:t,uploadURL:t.uploadURL,isPaused:!1}),e.size==null&&this.setFileState(e.id,{size:t.bytesUploaded||n.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(e,t)=>{if(!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e.id}`);return}this.setFileState(e.id,{progress:D(w({},this.getFile(e.id).progress),{preprocess:t})})}),this.on("preprocess-complete",e=>{if(!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e.id}`);return}const t=w({},this.getState().files);t[e.id]=D(w({},t[e.id]),{progress:w({},t[e.id].progress)}),delete t[e.id].progress.preprocess,this.setState({files:t})}),this.on("postprocess-progress",(e,t)=>{if(!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e.id}`);return}this.setFileState(e.id,{progress:D(w({},this.getState().files[e.id].progress),{postprocess:t})})}),this.on("postprocess-complete",e=>{if(!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e.id}`);return}const t=w({},this.getState().files);t[e.id]=D(w({},t[e.id]),{progress:w({},t[e.id].progress)}),delete t[e.id].progress.postprocess,this.setState({files:t})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",e=>{e&&E(this,sr)[sr](e)}),typeof window!="undefined"&&window.addEventListener&&(window.addEventListener("online",E(this,De)[De]),window.addEventListener("offline",E(this,De)[De]),setTimeout(E(this,De)[De],3e3))}function Xu(r,e){e===void 0&&(e={});const{forceAllowNewUpload:t=!1}=e,{allowNewUpload:n,currentUploads:s}=this.getState();if(!n&&!t)throw new Error("Cannot create a new upload: already uploading.");const i=Au();return this.emit("upload",{id:i,fileIDs:r}),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:D(w({},s),{[i]:{fileIDs:r,step:0,result:{}}})}),i}function Yu(r){const{currentUploads:e}=this.getState();return e[r]}function Qu(r){const e=w({},this.getState().currentUploads);delete e[r],this.setState({currentUploads:e})}async function Ju(r){let{currentUploads:e}=this.getState(),t=e[r];const n=t.step||0,s=[...E(this,vt)[vt],...E(this,bt)[bt],...E(this,Ke)[Ke]];try{for(let o=n;o<s.length&&t;o++){const c=s[o],f=D(w({},t),{step:o});this.setState({currentUploads:D(w({},e),{[r]:f})}),await c(f.fileIDs,r),e=this.getState().currentUploads,t=e[r]}}catch(o){throw this.emit("error",o),E(this,wt)[wt](r),o}if(t){t.fileIDs.forEach(y=>{const g=this.getFile(y);g&&g.progress.postprocess&&this.emit("postprocess-complete",g)});const o=t.fileIDs.map(y=>this.getFile(y)),c=o.filter(y=>!y.error),f=o.filter(y=>y.error);await this.addResultData(r,{successful:c,failed:f,uploadID:r}),e=this.getState().currentUploads,t=e[r]}let i;return t&&(i=t.result,this.emit("complete",i),E(this,wt)[wt](r)),i==null&&this.log(`Not setting result for an upload that has been removed: ${r}`),i}Ps.VERSION="2.1.4";var Zu=Ps,ur,J,_s,Ss,cr,Fs,Cs,ks,jr={},As=[],ec=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Qe(r,e){for(var t in e)r[t]=e[t];return r}function Os(r){var e=r.parentNode;e&&e.removeChild(r)}function Mn(r,e,t){var n,s,i,o={};for(i in e)i=="key"?n=e[i]:i=="ref"?s=e[i]:o[i]=e[i];if(arguments.length>2&&(o.children=arguments.length>3?ur.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(i in r.defaultProps)o[i]===void 0&&(o[i]=r.defaultProps[i]);return dr(r,o,n,s,null)}function dr(r,e,t,n,s){var i={type:r,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s==null?++_s:s};return s==null&&J.vnode!=null&&J.vnode(i),i}function tc(){return{current:null}}function hr(r){return r.children}function pr(r,e){this.props=r,this.context=e}function Lt(r,e){if(e==null)return r.__?Lt(r.__,r.__.__k.indexOf(r)+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?Lt(r):null}function Ts(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return Ts(r)}}function jn(r){(!r.__d&&(r.__d=!0)&&cr.push(r)&&!zr.__r++||Cs!==J.debounceRendering)&&((Cs=J.debounceRendering)||Fs)(zr)}function zr(){for(var r;zr.__r=cr.length;)r=cr.sort(function(e,t){return e.__v.__b-t.__v.__b}),cr=[],r.some(function(e){var t,n,s,i,o,c;e.__d&&(o=(i=(t=e).__v).__e,(c=t.__P)&&(n=[],(s=Qe({},i)).__v=i.__v+1,zn(c,i,s,t.__n,c.ownerSVGElement!==void 0,i.__h!=null?[o]:null,n,o==null?Lt(i):o,i.__h),Ns(n,i),i.__e!=o&&Ts(i)))})}function Es(r,e,t,n,s,i,o,c,f,y){var g,b,_,S,k,$,x,B=n&&n.__k||As,H=B.length;for(t.__k=[],g=0;g<e.length;g++)if((S=t.__k[g]=(S=e[g])==null||typeof S=="boolean"?null:typeof S=="string"||typeof S=="number"||typeof S=="bigint"?dr(null,S,null,null,S):Array.isArray(S)?dr(hr,{children:S},null,null,null):S.__b>0?dr(S.type,S.props,S.key,null,S.__v):S)!=null){if(S.__=t,S.__b=t.__b+1,(_=B[g])===null||_&&S.key==_.key&&S.type===_.type)B[g]=void 0;else for(b=0;b<H;b++){if((_=B[b])&&S.key==_.key&&S.type===_.type){B[b]=void 0;break}_=null}zn(r,S,_=_||jr,s,i,o,c,f,y),k=S.__e,(b=S.ref)&&_.ref!=b&&(x||(x=[]),_.ref&&x.push(_.ref,null,S),x.push(b,S.__c||k,S)),k!=null?($==null&&($=k),typeof S.type=="function"&&S.__k===_.__k?S.__d=f=Us(S,f,r):f=xs(r,S,_,B,k,f),typeof t.type=="function"&&(t.__d=f)):f&&_.__e==f&&f.parentNode!=r&&(f=Lt(_))}for(t.__e=$,g=H;g--;)B[g]!=null&&(typeof t.type=="function"&&B[g].__e!=null&&B[g].__e==t.__d&&(t.__d=Lt(n,g+1)),Ls(B[g],B[g]));if(x)for(g=0;g<x.length;g++)Is(x[g],x[++g],x[++g])}function Us(r,e,t){for(var n,s=r.__k,i=0;s&&i<s.length;i++)(n=s[i])&&(n.__=r,e=typeof n.type=="function"?Us(n,e,t):xs(t,n,n,s,n.__e,e));return e}function Ds(r,e){return e=e||[],r==null||typeof r=="boolean"||(Array.isArray(r)?r.some(function(t){Ds(t,e)}):e.push(r)),e}function xs(r,e,t,n,s,i){var o,c,f;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||s!=i||s.parentNode==null)e:if(i==null||i.parentNode!==r)r.appendChild(s),o=null;else{for(c=i,f=0;(c=c.nextSibling)&&f<n.length;f+=2)if(c==s)break e;r.insertBefore(s,i),o=i}return o!==void 0?o:s.nextSibling}function rc(r,e,t,n,s){var i;for(i in t)i==="children"||i==="key"||i in e||qr(r,i,null,t[i],n);for(i in e)s&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||t[i]===e[i]||qr(r,i,e[i],t[i],n)}function Rs(r,e,t){e[0]==="-"?r.setProperty(e,t):r[e]=t==null?"":typeof t!="number"||ec.test(e)?t:t+"px"}function qr(r,e,t,n,s){var i;e:if(e==="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||Rs(r.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||Rs(r.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in r?e.toLowerCase().slice(2):e.slice(2),r.l||(r.l={}),r.l[e+i]=t,t?n||r.addEventListener(e,i?Bs:$s,i):r.removeEventListener(e,i?Bs:$s,i);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in r)try{r[e]=t==null?"":t;break e}catch{}typeof t=="function"||(t!=null&&(t!==!1||e[0]==="a"&&e[1]==="r")?r.setAttribute(e,t):r.removeAttribute(e))}}function $s(r){this.l[r.type+!1](J.event?J.event(r):r)}function Bs(r){this.l[r.type+!0](J.event?J.event(r):r)}function zn(r,e,t,n,s,i,o,c,f){var y,g,b,_,S,k,$,x,B,H,z,K=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(f=t.__h,c=e.__e=t.__e,e.__h=null,i=[c]),(y=J.__b)&&y(e);try{e:if(typeof K=="function"){if(x=e.props,B=(y=K.contextType)&&n[y.__c],H=y?B?B.props.value:y.__:n,t.__c?$=(g=e.__c=t.__c).__=g.__E:("prototype"in K&&K.prototype.render?e.__c=g=new K(x,H):(e.__c=g=new pr(x,H),g.constructor=K,g.render=ic),B&&B.sub(g),g.props=x,g.state||(g.state={}),g.context=H,g.__n=n,b=g.__d=!0,g.__h=[]),g.__s==null&&(g.__s=g.state),K.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=Qe({},g.__s)),Qe(g.__s,K.getDerivedStateFromProps(x,g.__s))),_=g.props,S=g.state,b)K.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(K.getDerivedStateFromProps==null&&x!==_&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(x,H),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(x,g.__s,H)===!1||e.__v===t.__v){g.props=x,g.state=g.__s,e.__v!==t.__v&&(g.__d=!1),g.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(T){T&&(T.__=e)}),g.__h.length&&o.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(x,g.__s,H),g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(_,S,k)})}g.context=H,g.props=x,g.state=g.__s,(y=J.__r)&&y(e),g.__d=!1,g.__v=e,g.__P=r,y=g.render(g.props,g.state,g.context),g.state=g.__s,g.getChildContext!=null&&(n=Qe(Qe({},n),g.getChildContext())),b||g.getSnapshotBeforeUpdate==null||(k=g.getSnapshotBeforeUpdate(_,S)),z=y!=null&&y.type===hr&&y.key==null?y.props.children:y,Es(r,Array.isArray(z)?z:[z],e,t,n,s,i,o,c,f),g.base=e.__e,e.__h=null,g.__h.length&&o.push(g),$&&(g.__E=g.__=null),g.__e=!1}else i==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=nc(t.__e,e,t,n,s,i,o,f);(y=J.diffed)&&y(e)}catch(T){e.__v=null,(f||i!=null)&&(e.__e=c,e.__h=!!f,i[i.indexOf(c)]=null),J.__e(T,e,t)}}function Ns(r,e){J.__c&&J.__c(e,r),r.some(function(t){try{r=t.__h,t.__h=[],r.some(function(n){n.call(t)})}catch(n){J.__e(n,t.__v)}})}function nc(r,e,t,n,s,i,o,c){var f,y,g,b=t.props,_=e.props,S=e.type,k=0;if(S==="svg"&&(s=!0),i!=null){for(;k<i.length;k++)if((f=i[k])&&"setAttribute"in f==!!S&&(S?f.localName===S:f.nodeType===3)){r=f,i[k]=null;break}}if(r==null){if(S===null)return document.createTextNode(_);r=s?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,_.is&&_),i=null,c=!1}if(S===null)b===_||c&&r.data===_||(r.data=_);else{if(i=i&&ur.call(r.childNodes),y=(b=t.props||jr).dangerouslySetInnerHTML,g=_.dangerouslySetInnerHTML,!c){if(i!=null)for(b={},k=0;k<r.attributes.length;k++)b[r.attributes[k].name]=r.attributes[k].value;(g||y)&&(g&&(y&&g.__html==y.__html||g.__html===r.innerHTML)||(r.innerHTML=g&&g.__html||""))}if(rc(r,_,b,s,c),g)e.__k=[];else if(k=e.props.children,Es(r,Array.isArray(k)?k:[k],e,t,n,s&&S!=="foreignObject",i,o,i?i[0]:t.__k&&Lt(t,0),c),i!=null)for(k=i.length;k--;)i[k]!=null&&Os(i[k]);c||("value"in _&&(k=_.value)!==void 0&&(k!==b.value||k!==r.value||S==="progress"&&!k)&&qr(r,"value",k,b.value,!1),"checked"in _&&(k=_.checked)!==void 0&&k!==r.checked&&qr(r,"checked",k,b.checked,!1))}return r}function Is(r,e,t){try{typeof r=="function"?r(e):r.current=e}catch(n){J.__e(n,t)}}function Ls(r,e,t){var n,s;if(J.unmount&&J.unmount(r),(n=r.ref)&&(n.current&&n.current!==r.__e||Is(n,null,e)),(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){J.__e(i,e)}n.base=n.__P=null}if(n=r.__k)for(s=0;s<n.length;s++)n[s]&&Ls(n[s],e,typeof r.type!="function");t||r.__e==null||Os(r.__e),r.__e=r.__d=void 0}function ic(r,e,t){return this.constructor(r,t)}function Ms(r,e,t){var n,s,i;J.__&&J.__(r,e),s=(n=typeof t=="function")?null:t&&t.__k||e.__k,i=[],zn(e,r=(!n&&t||e).__k=Mn(hr,null,[r]),s||jr,jr,e.ownerSVGElement!==void 0,!n&&t?[t]:s?null:e.firstChild?ur.call(e.childNodes):null,i,!n&&t?t:s?s.__e:e.firstChild,n),Ns(i,r)}function js(r,e){Ms(r,e,js)}function sc(r,e,t){var n,s,i,o=Qe({},r.props);for(i in e)i=="key"?n=e[i]:i=="ref"?s=e[i]:o[i]=e[i];return arguments.length>2&&(o.children=arguments.length>3?ur.call(arguments,2):t),dr(r.type,o,n||r.key,s||r.ref,null)}function oc(r,e){var t={__c:e="__cC"+ks++,__:r,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,i;return this.getChildContext||(s=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.some(jn)},this.sub=function(o){s.push(o);var c=o.componentWillUnmount;o.componentWillUnmount=function(){s.splice(s.indexOf(o),1),c&&c.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}ur=As.slice,J={__e:function(r,e){for(var t,n,s;e=e.__;)if((t=e.__c)&&!t.__)try{if((n=t.constructor)&&n.getDerivedStateFromError!=null&&(t.setState(n.getDerivedStateFromError(r)),s=t.__d),t.componentDidCatch!=null&&(t.componentDidCatch(r),s=t.__d),s)return t.__E=t}catch(i){r=i}throw r}},_s=0,Ss=function(r){return r!=null&&r.constructor===void 0},pr.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Qe({},this.state),typeof r=="function"&&(r=r(Qe({},t),this.props)),r&&Qe(t,r),r!=null&&this.__v&&(e&&this.__h.push(e),jn(this))},pr.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),jn(this))},pr.prototype.render=hr,cr=[],Fs=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zr.__r=0,ks=0;var ac=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",render:Ms,hydrate:js,createElement:Mn,h:Mn,Fragment:hr,createRef:tc,get isValidElement(){return Ss},Component:pr,cloneElement:sc,createContext:oc,toChildArray:Ds,get options(){return J}}),W=Ir(ac),zs=function(e){return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE};const lc=zs;var uc=function(e,t){return t===void 0&&(t=document),typeof e=="string"?t.querySelector(e):lc(e)?e:null};const cc=ls;var Hr=class{constructor(e,t){t===void 0&&(t={}),this.uppy=e,this.opts=t}getPluginState(){const{plugins:e}=this.uppy.getState();return e[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:D(w({},t),{[this.id]:w(w({},t[this.id]),e)})})}setOptions(e){this.opts=w(w({},this.opts),e),this.setPluginState(),this.i18nInit()}i18nInit(){const e=new cc([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}};function qs(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var dc=0;function hc(r){return"__private_"+dc+++"_"+r}const{render:Hs}=W,pc=uc,fc=Hr;function gc(r){let e=null,t=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t=s,e||(e=Promise.resolve().then(()=>(e=null,r(...t)))),e}}var fr=hc("updateUI");class qn extends fc{constructor(){super(...arguments);Object.defineProperty(this,fr,{writable:!0,value:void 0})}mount(e,t){const n=t.id,s=pc(e);if(s){this.isTargetDOMEl=!0;const c=document.createDocumentFragment();return qs(this,fr)[fr]=gc(f=>{!this.uppy.getPlugin(this.id)||(Hs(this.render(f),c),this.afterUpdate())}),this.uppy.log(`Installing ${n} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(s.innerHTML=""),Hs(this.render(this.uppy.getState()),c),this.el=c.firstElementChild,s.appendChild(c),this.onMount(),this.el}let i;if(typeof e=="object"&&e instanceof qn)i=e;else if(typeof e=="function"){const c=e;this.uppy.iteratePlugins(f=>{if(f instanceof c)return i=f,!1})}if(i)return this.uppy.log(`Installing ${n} to ${i.id}`),this.parent=i,this.el=i.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${n}`);let o=`Invalid target option given to ${n}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}update(e){if(this.el!=null){var t,n;(t=(n=qs(this,fr))[fr])==null||t.call(n,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}}var mc=qn;const Ws=Zu,yc=mc,vc=Hr,{debugLogger:bc}=vs;fe.exports=Ws;fe.exports.Uppy=Ws;fe.exports.UIPlugin=yc;fe.exports.BasePlugin=vc;fe.exports.debugLogger=bc;var Sy=fe.exports,Vs={exports:{}};(function(r,e){(function(t,n){r.exports=n(t)})(typeof self!="undefined"?self:typeof window!="undefined"?window:typeof we!="undefined"?we:we,function(t){t=t||{};var n=t.Base64,s="2.6.4",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(A){for(var M={},Q=0,ie=A.length;Q<ie;Q++)M[A.charAt(Q)]=Q;return M}(i),c=String.fromCharCode,f=function(A){if(A.length<2){var M=A.charCodeAt(0);return M<128?A:M<2048?c(192|M>>>6)+c(128|M&63):c(224|M>>>12&15)+c(128|M>>>6&63)+c(128|M&63)}else{var M=65536+(A.charCodeAt(0)-55296)*1024+(A.charCodeAt(1)-56320);return c(240|M>>>18&7)+c(128|M>>>12&63)+c(128|M>>>6&63)+c(128|M&63)}},y=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,g=function(A){return A.replace(y,f)},b=function(A){var M=[0,2,1][A.length%3],Q=A.charCodeAt(0)<<16|(A.length>1?A.charCodeAt(1):0)<<8|(A.length>2?A.charCodeAt(2):0),ie=[i.charAt(Q>>>18),i.charAt(Q>>>12&63),M>=2?"=":i.charAt(Q>>>6&63),M>=1?"=":i.charAt(Q&63)];return ie.join("")},_=t.btoa&&typeof t.btoa=="function"?function(A){return t.btoa(A)}:function(A){if(A.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return A.replace(/[\s\S]{1,3}/g,b)},S=function(A){return _(g(String(A)))},k=function(A){return A.replace(/[+\/]/g,function(M){return M=="+"?"-":"_"}).replace(/=/g,"")},$=function(A,M){return M?k(S(A)):S(A)},x=function(A){return $(A,!0)},B;t.Uint8Array&&(B=function(A,M){for(var Q="",ie=0,xe=A.length;ie<xe;ie+=3){var Ot=A[ie],Y=A[ie+1],ct=A[ie+2],Re=Ot<<16|Y<<8|ct;Q+=i.charAt(Re>>>18)+i.charAt(Re>>>12&63)+(typeof Y!="undefined"?i.charAt(Re>>>6&63):"=")+(typeof ct!="undefined"?i.charAt(Re&63):"=")}return M?k(Q):Q});var H=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,z=function(A){switch(A.length){case 4:var M=(7&A.charCodeAt(0))<<18|(63&A.charCodeAt(1))<<12|(63&A.charCodeAt(2))<<6|63&A.charCodeAt(3),Q=M-65536;return c((Q>>>10)+55296)+c((Q&1023)+56320);case 3:return c((15&A.charCodeAt(0))<<12|(63&A.charCodeAt(1))<<6|63&A.charCodeAt(2));default:return c((31&A.charCodeAt(0))<<6|63&A.charCodeAt(1))}},K=function(A){return A.replace(H,z)},T=function(A){var M=A.length,Q=M%4,ie=(M>0?o[A.charAt(0)]<<18:0)|(M>1?o[A.charAt(1)]<<12:0)|(M>2?o[A.charAt(2)]<<6:0)|(M>3?o[A.charAt(3)]:0),xe=[c(ie>>>16),c(ie>>>8&255),c(ie&255)];return xe.length-=[0,0,2,1][Q],xe.join("")},j=t.atob&&typeof t.atob=="function"?function(A){return t.atob(A)}:function(A){return A.replace(/\S{1,4}/g,T)},X=function(A){return j(String(A).replace(/[^A-Za-z0-9\+\/]/g,""))},te=function(A){return K(j(A))},de=function(A){return String(A).replace(/[-_]/g,function(M){return M=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},he=function(A){return te(de(A))},Ee;t.Uint8Array&&(Ee=function(A){return Uint8Array.from(X(de(A)),function(M){return M.charCodeAt(0)})});var Kt=function(){var A=t.Base64;return t.Base64=n,A};if(t.Base64={VERSION:s,atob:X,btoa:_,fromBase64:he,toBase64:$,utob:g,encode:$,encodeURI:x,btou:K,decode:he,noConflict:Kt,fromUint8Array:B,toUint8Array:Ee},typeof Object.defineProperty=="function"){var Ue=function(A){return{value:A,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",Ue(function(){return he(this)})),Object.defineProperty(String.prototype,"toBase64",Ue(function(A){return $(this,A)})),Object.defineProperty(String.prototype,"toBase64URI",Ue(function(){return $(this,!0)}))}}return t.Meteor&&(Base64=t.Base64),r.exports&&(r.exports.Base64=t.Base64),{Base64:t.Base64}})})(Vs);var wc=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0},Hn={},Pc=Object.prototype.hasOwnProperty,_c;function Gs(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return null}}function Ks(r){try{return encodeURIComponent(r)}catch{return null}}function Sc(r){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},n;n=e.exec(r);){var s=Gs(n[1]),i=Gs(n[2]);s===null||i===null||s in t||(t[s]=i)}return t}function Fc(r,e){e=e||"";var t=[],n,s;typeof e!="string"&&(e="?");for(s in r)if(Pc.call(r,s)){if(n=r[s],!n&&(n===null||n===_c||isNaN(n))&&(n=""),s=Ks(s),n=Ks(n),s===null||n===null)continue;t.push(s+"="+n)}return t.length?e+t.join("&"):""}Hn.stringify=Fc;Hn.parse=Sc;var Xs=wc,Wr=Hn,Cc=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,kc=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Ac=/^[a-zA-Z]:/,Oc="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",Tc=new RegExp("^"+Oc+"+");function Wn(r){return(r||"").toString().replace(Tc,"")}var Vn=[["#","hash"],["?","query"],function(e,t){return Je(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Ys={hash:1,query:1};function Qs(r){var e;typeof window!="undefined"?e=window:typeof we!="undefined"?e=we:typeof self!="undefined"?e=self:e={};var t=e.location||{};r=r||t;var n={},s=typeof r,i;if(r.protocol==="blob:")n=new Ie(unescape(r.pathname),{});else if(s==="string"){n=new Ie(r,{});for(i in Ys)delete n[i]}else if(s==="object"){for(i in r)i in Ys||(n[i]=r[i]);n.slashes===void 0&&(n.slashes=Cc.test(r.href))}return n}function Je(r){return r==="file:"||r==="ftp:"||r==="http:"||r==="https:"||r==="ws:"||r==="wss:"}function Js(r,e){r=Wn(r),e=e||{};var t=kc.exec(r),n=t[1]?t[1].toLowerCase():"",s=!!t[2],i=!!t[3],o=0,c;return s?i?(c=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(c=t[2]+t[4],o=t[2].length):i?(c=t[3]+t[4],o=t[3].length):c=t[4],n==="file:"?o>=2&&(c=c.slice(2)):Je(n)?c=t[4]:n?s&&(c=c.slice(2)):o>=2&&Je(e.protocol)&&(c=t[4]),{protocol:n,slashes:s||Je(n),slashesCount:o,rest:c}}function Ec(r,e){if(r==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(r.split("/")),n=t.length,s=t[n-1],i=!1,o=0;n--;)t[n]==="."?t.splice(n,1):t[n]===".."?(t.splice(n,1),o++):o&&(n===0&&(i=!0),t.splice(n,1),o--);return i&&t.unshift(""),(s==="."||s==="..")&&t.push(""),t.join("/")}function Ie(r,e,t){if(r=Wn(r),!(this instanceof Ie))return new Ie(r,e,t);var n,s,i,o,c,f,y=Vn.slice(),g=typeof e,b=this,_=0;for(g!=="object"&&g!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=Wr.parse),e=Qs(e),s=Js(r||"",e),n=!s.protocol&&!s.slashes,b.slashes=s.slashes||n&&e.slashes,b.protocol=s.protocol||e.protocol||"",r=s.rest,(s.protocol==="file:"&&(s.slashesCount!==2||Ac.test(r))||!s.slashes&&(s.protocol||s.slashesCount<2||!Je(b.protocol)))&&(y[3]=[/(.*)/,"pathname"]);_<y.length;_++){if(o=y[_],typeof o=="function"){r=o(r,b);continue}i=o[0],f=o[1],i!==i?b[f]=r:typeof i=="string"?~(c=r.indexOf(i))&&(typeof o[2]=="number"?(b[f]=r.slice(0,c),r=r.slice(c+o[2])):(b[f]=r.slice(c),r=r.slice(0,c))):(c=i.exec(r))&&(b[f]=c[1],r=r.slice(0,c.index)),b[f]=b[f]||n&&o[3]&&e[f]||"",o[4]&&(b[f]=b[f].toLowerCase())}t&&(b.query=t(b.query)),n&&e.slashes&&b.pathname.charAt(0)!=="/"&&(b.pathname!==""||e.pathname!=="")&&(b.pathname=Ec(b.pathname,e.pathname)),b.pathname.charAt(0)!=="/"&&Je(b.protocol)&&(b.pathname="/"+b.pathname),Xs(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(o=b.auth.split(":"),b.username=o[0],b.password=o[1]||""),b.origin=b.protocol!=="file:"&&Je(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}function Uc(r,e,t){var n=this;switch(r){case"query":typeof e=="string"&&e.length&&(e=(t||Wr.parse)(e)),n[r]=e;break;case"port":n[r]=e,Xs(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[r]="");break;case"hostname":n[r]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[r]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!t;break;case"pathname":case"hash":if(e){var s=r==="pathname"?"/":"#";n[r]=e.charAt(0)!==s?s+e:e}else n[r]=e;break;case"username":case"password":n[r]=encodeURIComponent(e);break;case"auth":var i=e.split(":");n.username=i[0],n.password=i.length===2?i[1]:""}for(var o=0;o<Vn.length;o++){var c=Vn[o];c[4]&&(n[c[1]]=n[c[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&Je(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function Dc(r){(!r||typeof r!="function")&&(r=Wr.stringify);var e,t=this,n=t.protocol;n&&n.charAt(n.length-1)!==":"&&(n+=":");var s=n+(t.protocol&&t.slashes||Je(t.protocol)?"//":"");return t.username?(s+=t.username,t.password&&(s+=":"+t.password),s+="@"):t.password&&(s+=":"+t.password,s+="@"),s+=t.host+t.pathname,e=typeof t.query=="object"?r(t.query):t.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(s+=t.hash),s}Ie.prototype={set:Uc,toString:Dc};Ie.extractProtocol=Js;Ie.location=Qs;Ie.trimLeft=Wn;Ie.qs=Wr;var xc=Ie;function Vr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vr=function(t){return typeof t}:Vr=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(r)}function Rc(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function $c(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&gr(r,e)}function Bc(r){return function(){var e=mr(r),t;if(Zs()){var n=mr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Nc(this,t)}}function Nc(r,e){return e&&(Vr(e)==="object"||typeof e=="function")?e:Ic(r)}function Ic(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Gn(r){var e=typeof Map=="function"?new Map:void 0;return Gn=function(n){if(n===null||!Lc(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,s)}function s(){return Gr(n,arguments,mr(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),gr(s,n)},Gn(r)}function Gr(r,e,t){return Zs()?Gr=Reflect.construct:Gr=function(s,i,o){var c=[null];c.push.apply(c,i);var f=Function.bind.apply(s,c),y=new f;return o&&gr(y,o.prototype),y},Gr.apply(null,arguments)}function Zs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Lc(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function gr(r,e){return gr=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},gr(r,e)}function mr(r){return mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},mr(r)}var Kr=function(r){$c(t,r);var e=Bc(t);function t(n){var s,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Rc(this,t),s=e.call(this,n),s.originalRequest=o,s.originalResponse=c,s.causingError=i,i!=null&&(n+=", caused by ".concat(i.toString())),o!=null){var f=o.getHeader("X-Request-ID")||"n/a",y=o.getMethod(),g=o.getURL(),b=c?c.getStatus():"n/a",_=c?c.getBody()||"":"n/a";n+=", originated from request (method: ".concat(y,", url: ").concat(g,", response code: ").concat(b,", response text: ").concat(_,", request id: ").concat(f,")")}return s.message=n,s}return t}(Gn(Error)),eo=!1;function Mc(){eo=!0}function Pt(r){!eo||console.log(r)}function jc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=Math.random()*16|0,t=r=="x"?e:e&3|8;return t.toString(16)})}function to(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Kn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?to(Object(t),!0).forEach(function(n){zc(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):to(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function zc(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function qc(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ro(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Hc(r,e,t){return e&&ro(r.prototype,e),t&&ro(r,t),r}var Wc={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},Xr=function(){function r(e,t){qc(this,r),"resume"in t&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=t,this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return Hc(r,[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(n){return t._urlStorage.findUploadsByFingerprint(n)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,n=this.file;if(!n){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var s=this.options.retryDelays;if(s!=null&&Object.prototype.toString.call(s)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach(function(i){t.options[i]&&t._emitError(new Error("tus: cannot use the ".concat(i," option when parallelUploads is enabled")))}),this.options.fingerprint(n,this.options).then(function(i){return i==null?Pt("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):Pt("Calculated fingerprint: ".concat(i)),t._fingerprint=i,t._source?t._source:t.options.fileReader.openFile(n,t.options.chunkSize)}).then(function(i){t._source=i,t.options.parallelUploads>1||t._parallelUploadUrls!=null?t._startParallelUpload():t._startSingleUpload()}).catch(function(i){t._emitError(i)})}},{key:"_startParallelUpload",value:function(){var t=this,n=this._size=this._source.size,s=0;this._parallelUploads=[];var i=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,o=Gc(this._source.size,i,this._parallelUploadUrls);this._parallelUploadUrls=new Array(o.length);var c=o.map(function(y,g){var b=0;return t._source.slice(y.start,y.end).then(function(_){var S=_.value;return new Promise(function(k,$){var x=Kn({},t.options,{uploadUrl:y.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:Kn({},t.options.headers,{"Upload-Concat":"partial"}),onSuccess:k,onError:$,onProgress:function(z){s=s-b+z,b=z,t._emitProgress(s,n)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[g]=B.url,t._parallelUploadUrls.filter(function(z){return!!z}).length===o.length&&t._saveUploadInUrlStorage()}}),B=new r(S,x);B.start(),t._parallelUploads.push(B)})})}),f;Promise.all(c).then(function(){f=t._openRequest("POST",t.options.endpoint),f.setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var y=no(t.options.metadata);return y!==""&&f.setHeader("Upload-Metadata",y),t._sendRequest(f,null)}).then(function(y){if(!Mt(y.getStatus(),200)){t._emitHttpError(f,y,"tus: unexpected response while creating upload");return}var g=y.getHeader("Location");if(g==null){t._emitHttpError(f,y,"tus: invalid or missing Location header");return}t.url=ao(t.options.endpoint,g),Pt("Created upload at ".concat(t.url)),t._emitSuccess()}).catch(function(y){t._emitError(y)})}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(this.options.uploadSize!=null){if(this._size=+this.options.uploadSize,isNaN(this._size)){this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(this._size=this._source.size,this._size==null){this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return}if(this._aborted=!1,this.url!=null){Pt("Resuming upload from previous URL: ".concat(this.url)),this._resumeUpload();return}if(this.options.uploadUrl!=null){Pt("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,this._resumeUpload();return}Pt("Creating a new upload"),this._createUpload()}},{key:"abort",value:function(t){var n=this;if(arguments.length>1&&typeof arguments[1]=="function")throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return this._parallelUploads!=null&&this._parallelUploads.forEach(function(s){s.abort(t)}),this._req!==null&&(this._req.abort(),this._source.close()),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!t||this.url==null?Promise.resolve():r.terminate(this.url,this.options).then(function(){return n._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(t,n,s,i){this._emitError(new Kr(s,i,t,n))}},{key:"_emitError",value:function(t){var n=this;if(!this._aborted){if(this.options.retryDelays!=null){var s=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(s&&(this._retryAttempt=0),oo(t,this._retryAttempt,this.options)){var i=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){n.start()},i);return}}if(typeof this.options.onError=="function")this.options.onError(t);else throw t}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,n){typeof this.options.onProgress=="function"&&this.options.onProgress(t,n)}},{key:"_emitChunkComplete",value:function(t,n,s){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(t,n,s)}},{key:"_createUpload",value:function(){var t=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var n=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?n.setHeader("Upload-Defer-Length",1):n.setHeader("Upload-Length",this._size);var s=no(this.options.metadata);s!==""&&n.setHeader("Upload-Metadata",s);var i;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,i=this._addChunkToRequest(n)):i=this._sendRequest(n,null),i.then(function(o){if(!Mt(o.getStatus(),200)){t._emitHttpError(n,o,"tus: unexpected response while creating upload");return}var c=o.getHeader("Location");if(c==null){t._emitHttpError(n,o,"tus: invalid or missing Location header");return}if(t.url=ao(t.options.endpoint,c),Pt("Created upload at ".concat(t.url)),typeof t.options._onUploadUrlAvailable=="function"&&t.options._onUploadUrlAvailable(),t._size===0){t._emitSuccess(),t._source.close();return}t._saveUploadInUrlStorage(),t.options.uploadDataDuringCreation?t._handleUploadResponse(n,o):(t._offset=0,t._performUpload())}).catch(function(o){t._emitHttpError(n,null,"tus: failed to create upload",o)})}},{key:"_resumeUpload",value:function(){var t=this,n=this._openRequest("HEAD",this.url),s=this._sendRequest(n,null);s.then(function(i){var o=i.getStatus();if(!Mt(o,200)){if(Mt(o,400)&&t._removeFromUrlStorage(),o===423){t._emitHttpError(n,i,"tus: upload is currently locked; retry later");return}if(!t.options.endpoint){t._emitHttpError(n,i,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}t.url=null,t._createUpload();return}var c=parseInt(i.getHeader("Upload-Offset"),10);if(isNaN(c)){t._emitHttpError(n,i,"tus: invalid or missing offset value");return}var f=parseInt(i.getHeader("Upload-Length"),10);if(isNaN(f)&&!t.options.uploadLengthDeferred){t._emitHttpError(n,i,"tus: invalid or missing length value");return}if(typeof t.options._onUploadUrlAvailable=="function"&&t.options._onUploadUrlAvailable(),c===f){t._emitProgress(f,f),t._emitSuccess();return}t._offset=c,t._performUpload()}).catch(function(i){t._emitHttpError(n,null,"tus: failed to resume upload",i)})}},{key:"_performUpload",value:function(){var t=this;if(!this._aborted){var n;this.options.overridePatchMethod?(n=this._openRequest("POST",this.url),n.setHeader("X-HTTP-Method-Override","PATCH")):n=this._openRequest("PATCH",this.url),n.setHeader("Upload-Offset",this._offset);var s=this._addChunkToRequest(n);s.then(function(i){if(!Mt(i.getStatus(),200)){t._emitHttpError(n,i,"tus: unexpected response while uploading chunk");return}t._handleUploadResponse(n,i)}).catch(function(i){t._aborted||t._emitHttpError(n,null,"tus: failed to upload chunk at offset ".concat(t._offset),i)})}}},{key:"_addChunkToRequest",value:function(t){var n=this,s=this._offset,i=this._offset+this.options.chunkSize;return t.setProgressHandler(function(o){n._emitProgress(s+o,n._size)}),t.setHeader("Content-Type","application/offset+octet-stream"),(i===1/0||i>this._size)&&!this.options.uploadLengthDeferred&&(i=this._size),this._source.slice(s,i).then(function(o){var c=o.value,f=o.done;return n.options.uploadLengthDeferred&&f&&(n._size=n._offset+(c&&c.size?c.size:0),t.setHeader("Upload-Length",n._size)),c===null?n._sendRequest(t):(n._emitProgress(n._offset,n._size),n._sendRequest(t,c))})}},{key:"_handleUploadResponse",value:function(t,n){var s=parseInt(n.getHeader("Upload-Offset"),10);if(isNaN(s)){this._emitHttpError(t,n,"tus: invalid or missing offset value");return}if(this._emitProgress(s,this._size),this._emitChunkComplete(s-this._offset,s,this._size),this._offset=s,s==this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(t,n){var s=io(t,n,this.options);return this._req=s,s}},{key:"_removeFromUrlStorage",value:function(){var t=this;!this._urlStorageKey||(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(n){t._emitError(n)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!(!this.options.storeFingerprintForResuming||!this._fingerprint)){var n={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};this._parallelUploads?n.parallelUploadUrls=this._parallelUploadUrls:n.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,n).then(function(s){return t._urlStorageKey=s}).catch(function(s){t._emitError(s)})}}},{key:"_sendRequest",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return so(t,n,this.options)}}],[{key:"terminate",value:function(t,n){if(arguments.length>1&&typeof arguments[arguments.length-1]=="function")throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");n===void 0&&(n={});var s=io("DELETE",t,n);return so(s,null,n).then(function(i){if(i.getStatus()!==204)throw new Kr("tus: unexpected response while terminating upload",null,s,i)}).catch(function(i){if(i instanceof Kr||(i=new Kr("tus: failed to terminate upload",i,s,null)),!oo(i,0,n))throw i;var o=n.retryDelays[0],c=n.retryDelays.slice(1),f=Kn({},n,{retryDelays:c});return new Promise(function(y){return setTimeout(y,o)}).then(function(){return r.terminate(t,f)})})}}]),r}();function no(r){var e=[];for(var t in r)e.push("".concat(t," ").concat(Vs.exports.Base64.encode(r[t])));return e.join(",")}function Mt(r,e){return r>=e&&r<e+100}function io(r,e,t){var n=t.httpStack.createRequest(r,e);n.setHeader("Tus-Resumable","1.0.0");var s=t.headers||{};for(var i in s)n.setHeader(i,s[i]);if(t.addRequestId){var o=jc();n.setHeader("X-Request-ID",o)}return n}function so(r,e,t){var n=typeof t.onBeforeRequest=="function"?Promise.resolve(t.onBeforeRequest(r)):Promise.resolve();return n.then(function(){return r.send(e).then(function(s){var i=typeof t.onAfterResponse=="function"?Promise.resolve(t.onAfterResponse(r,s)):Promise.resolve();return i.then(function(){return s})})})}function Vc(){var r=!0;return typeof window!="undefined"&&"navigator"in window&&window.navigator.onLine===!1&&(r=!1),r}function oo(r,e,t){if(t.retryDelays==null||e>=t.retryDelays.length||r.originalRequest==null)return!1;if(t&&typeof t.onShouldRetry=="function")return t.onShouldRetry(r,e,t);var n=r.originalResponse?r.originalResponse.getStatus():0;return(!Mt(n,400)||n===409||n===423)&&Vc()}function ao(r,e){return new xc(e,r).toString()}function Gc(r,e,t){for(var n=Math.floor(r/e),s=[],i=0;i<e;i++)s.push({start:n*i,end:n*(i+1)});return s[e-1].end=r,t&&s.forEach(function(o,c){o.uploadUrl=t[c]||null}),s}Xr.defaultOptions=Wc;function Kc(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function lo(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Xc(r,e,t){return e&&lo(r.prototype,e),t&&lo(r,t),r}var Yc=function(){function r(){Kc(this,r)}return Xc(r,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,n){return Promise.resolve(null)}}]),r}();function Qc(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function uo(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Jc(r,e,t){return e&&uo(r.prototype,e),t&&uo(r,t),r}var Xn=!1;try{Xn="localStorage"in window;var co="tusSupport";localStorage.setItem(co,localStorage.getItem(co))}catch(r){if(r.code===r.SECURITY_ERR||r.code===r.QUOTA_EXCEEDED_ERR)Xn=!1;else throw r}var ho=Xn,Zc=function(){function r(){Qc(this,r)}return Jc(r,[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var n=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(n)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,n){var s=Math.round(Math.random()*1e12),i="tus::".concat(t,"::").concat(s);return localStorage.setItem(i,JSON.stringify(n)),Promise.resolve(i)}},{key:"_findEntries",value:function(t){for(var n=[],s=0;s<localStorage.length;s++){var i=localStorage.key(s);if(i.indexOf(t)===0)try{var o=JSON.parse(localStorage.getItem(i));o.urlStorageKey=i,n.push(o)}catch{}}return n}}]),r}();function Yn(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function po(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Qn(r,e,t){return e&&po(r.prototype,e),t&&po(r,t),r}var fo=function(){function r(){Yn(this,r)}return Qn(r,[{key:"createRequest",value:function(t,n){return new ed(t,n)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),r}(),ed=function(){function r(e,t){Yn(this,r),this._xhr=new XMLHttpRequest,this._xhr.open(e,t,!0),this._method=e,this._url=t,this._headers={}}return Qn(r,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,n){this._xhr.setRequestHeader(t,n),this._headers[t]=n}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(n){!n.lengthComputable||t(n.loaded)})}},{key:"send",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(s,i){t._xhr.onload=function(){s(new td(t._xhr))},t._xhr.onerror=function(o){i(o)},t._xhr.send(n)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),r}(),td=function(){function r(e){Yn(this,r),this._xhr=e}return Qn(r,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),r}(),go=function(){return typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function rd(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var s=n.response;e(s)},n.onerror=function(s){t(s)},n.open("GET",r),n.send()})}var nd=function(){return typeof window!="undefined"&&(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined")};function id(r){return new Promise(function(e,t){var n=new FileReader;n.onload=function(){var s=new Uint8Array(n.result);e({value:s})},n.onerror=function(s){t(s)},n.readAsArrayBuffer(r)})}function Jn(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function mo(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Zn(r,e,t){return e&&mo(r.prototype,e),t&&mo(r,t),r}var yo=function(){function r(e){Jn(this,r),this._file=e,this.size=e.size}return Zn(r,[{key:"slice",value:function(t,n){if(nd())return id(this._file.slice(t,n));var s=this._file.slice(t,n);return Promise.resolve({value:s})}},{key:"close",value:function(){}}]),r}(),sd=function(){function r(e,t){Jn(this,r),this._chunkSize=t,this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return Zn(r,[{key:"slice",value:function(t,n){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,n)}},{key:"_readUntilEnoughDataOrDone",value:function(t,n){var s=this,i=n<=this._bufferOffset+vo(this._buffer);if(this._done||i){var o=this._getDataFromBuffer(t,n),c=o==null?this._done:!1;return Promise.resolve({value:o,done:c})}return this._reader.read().then(function(f){var y=f.value,g=f.done;return g?s._done=!0:s._buffer===void 0?s._buffer=y:s._buffer=od(s._buffer,y),s._readUntilEnoughDataOrDone(t,n)})}},{key:"_getDataFromBuffer",value:function(t,n){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var s=vo(this._buffer)===0;return this._done&&s?null:this._buffer.slice(0,n-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),r}();function vo(r){return r===void 0?0:r.size!==void 0?r.size:r.length}function od(r,e){if(r.concat)return r.concat(e);if(r instanceof Blob)return new Blob([r,e],{type:r.type});if(r.set){var t=new r.constructor(r.length+e.length);return t.set(r),t.set(e,r.length),t}throw new Error("Unknown data type")}var ad=function(){function r(){Jn(this,r)}return Zn(r,[{key:"openFile",value:function(t,n){return go()&&t&&typeof t.uri!="undefined"?rd(t.uri).then(function(s){return new yo(s)}).catch(function(s){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(s))}):typeof t.slice=="function"&&typeof t.size!="undefined"?Promise.resolve(new yo(t)):typeof t.read=="function"?(n=+n,isFinite(n)?Promise.resolve(new sd(t,n)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),r}();function ld(r,e){return go()?Promise.resolve(ud(r,e)):Promise.resolve(["tus-br",r.name,r.type,r.size,r.lastModified,e.endpoint].join("-"))}function ud(r,e){var t=r.exif?cd(JSON.stringify(r.exif)):"noexif";return["tus-rn",r.name||"noname",r.size||"nosize",t,e.endpoint].join("/")}function cd(r){var e=0;if(r.length===0)return e;for(var t=0;t<r.length;t++){var n=r.charCodeAt(t);e=(e<<5)-e+n,e&=e}return e}function Yr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yr=function(t){return typeof t}:Yr=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(r)}function dd(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function hd(r,e,t){return e&&bo(r.prototype,e),t&&bo(r,t),r}function pd(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&ei(r,e)}function ei(r,e){return ei=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},ei(r,e)}function fd(r){return function(){var e=Qr(r),t;if(yd()){var n=Qr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return gd(this,t)}}function gd(r,e){return e&&(Yr(e)==="object"||typeof e=="function")?e:md(r)}function md(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function yd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Qr(r){return Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(r)}function wo(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function ti(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wo(Object(t),!0).forEach(function(n){vd(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wo(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vd(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ri=ti({},Xr.defaultOptions,{httpStack:new fo,fileReader:new ad,urlStorage:ho?new Zc:new Yc,fingerprint:ld}),bd=function(r){pd(t,r);var e=fd(t);function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return dd(this,t),s=ti({},ri,{},s),e.call(this,n,s)}return hd(t,null,[{key:"terminate",value:function(s,i,o){return i=ti({},ri,{},i),Xr.terminate(s,i,o)}}]),t}(Xr),Po=window,wd=Po.XMLHttpRequest,_o=Po.Blob,Pd=wd&&_o&&typeof _o.prototype.slice=="function",_d=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Upload:bd,canStoreURLs:ho,defaultOptions:ri,isSupported:Pd,enableDebugLog:Mc,HttpStack:fo}),So=Ir(_d);class Sd extends Error{constructor(e,t){t===void 0&&(t=null);super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");this.cause=e,this.isNetworkError=!0,this.request=t}}var Fo=Sd;const Fd=Fo;var Cd=function(){return fetch(...arguments).catch(e=>{throw e.name==="AbortError"?e:new Fd(e)})};class kd extends Error{constructor(){super("Authorization required");this.name="AuthError",this.isAuthError=!0}}var Ad=kd,Jr,nt,Le,it,Co;function Me(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Od=0;function ni(r){return"__private_"+Od+++"_"+r}const ii=Cd,Td=Ad;function Ed(r){return r.replace(/\/$/,"")}async function si(r){if(r.status===401)throw new Td;const e=r.json();if(r.status<200||r.status>300){let t=`Failed request with status: ${r.status}. ${r.statusText}`;try{const n=await e;t=n.message?`${t} message: ${n.message}`:t,t=n.requestId?`${t} request-Id: ${n.requestId}`:t}finally{throw new Error(t)}}return e}var oi=(Co=(nt=ni("getPostResponseFunc"),Le=ni("getUrl"),it=ni("errorHandler"),Jr=class ko{constructor(e,t){Object.defineProperty(this,it,{value:Dd}),Object.defineProperty(this,Le,{value:Ud}),Object.defineProperty(this,nt,{writable:!0,value:n=>s=>n?s:this.onReceiveResponse(s)}),this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.allowedHeaders=["accept","content-type","uppy-auth-token"],this.preflightDone=!1}get hostname(){const{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return Ed(e&&e[t]?e[t]:t)}headers(){const e=this.opts.companionHeaders||{};return Promise.resolve(w(w({},ko.defaultHeaders),e))}onReceiveResponse(e){const n=this.uppy.getState().companion||{},s=this.opts.companionUrl,{headers:i}=e;return i.has("i-am")&&i.get("i-am")!==n[s]&&this.uppy.setState({companion:D(w({},n),{[s]:i.get("i-am")})}),e}preflight(e){return this.preflightDone?Promise.resolve(this.allowedHeaders.slice()):fetch(Me(this,Le)[Le](e),{method:"OPTIONS"}).then(t=>(t.headers.has("access-control-allow-headers")&&(this.allowedHeaders=t.headers.get("access-control-allow-headers").split(",").map(n=>n.trim().toLowerCase())),this.preflightDone=!0,this.allowedHeaders.slice())).catch(t=>(this.uppy.log(`[CompanionClient] unable to make preflight request ${t}`,"warning"),this.preflightDone=!0,this.allowedHeaders.slice()))}preflightAndHeaders(e){return Promise.all([this.preflight(e),this.headers()]).then(t=>{let[n,s]=t;return Object.keys(s).forEach(i=>{n.includes(i.toLowerCase())||(this.uppy.log(`[CompanionClient] excluding disallowed header ${i}`),delete s[i])}),s})}get(e,t){const n="get";return this.preflightAndHeaders(e).then(s=>ii(Me(this,Le)[Le](e),{method:n,headers:s,credentials:this.opts.companionCookiesRule||"same-origin"})).then(Me(this,nt)[nt](t)).then(si).catch(Me(this,it)[it](n,e))}post(e,t,n){const s="post";return this.preflightAndHeaders(e).then(i=>ii(Me(this,Le)[Le](e),{method:s,headers:i,credentials:this.opts.companionCookiesRule||"same-origin",body:JSON.stringify(t)})).then(Me(this,nt)[nt](n)).then(si).catch(Me(this,it)[it](s,e))}delete(e,t,n){const s="delete";return this.preflightAndHeaders(e).then(i=>ii(`${this.hostname}/${e}`,{method:s,headers:i,credentials:this.opts.companionCookiesRule||"same-origin",body:t?JSON.stringify(t):null})).then(Me(this,nt)[nt](n)).then(si).catch(Me(this,it)[it](s,e))}}),Jr.VERSION="2.0.4",Jr.defaultHeaders={Accept:"application/json","Content-Type":"application/json","Uppy-Versions":`@uppy/companion-client=${Jr.VERSION}`},Co);function Ud(r){return/^(https?:|)\/\//.test(r)?r:`${this.hostname}/${r}`}function Dd(r,e){return t=>{var n;if(!((n=t)!=null&&n.isAuthError)){const s=new Error(`Could not ${r} ${Me(this,Le)[Le](e)}`);s.cause=t,t=s}return Promise.reject(t)}}var Zr={};Zr.setItem=(r,e)=>new Promise(t=>{localStorage.setItem(r,e),t()});Zr.getItem=r=>Promise.resolve(localStorage.getItem(r));Zr.removeItem=r=>new Promise(e=>{localStorage.removeItem(r),e()});const xd=oi,Rd=Zr,$d=r=>r.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");var Bd=class extends xd{constructor(e,t){super(e,t);this.provider=t.provider,this.id=this.provider,this.name=this.opts.name||$d(this.id),this.pluginId=this.opts.pluginId,this.tokenKey=`companion-${this.pluginId}-auth-token`,this.companionKeysParams=this.opts.companionKeysParams,this.preAuthToken=null}headers(){return Promise.all([super.headers(),this.getAuthToken()]).then(e=>{let[t,n]=e;const s={};return n&&(s["uppy-auth-token"]=n),this.companionKeysParams&&(s["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),w(w({},t),s)})}onReceiveResponse(e){e=super.onReceiveResponse(e);const t=this.uppy.getPlugin(this.pluginId),s=t.getPluginState().authenticated?e.status!==401:e.status<400;return t.setPluginState({authenticated:s}),e}setAuthToken(e){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,e)}getAuthToken(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}authUrl(e){return e===void 0&&(e={}),this.preAuthToken&&(e.uppyPreAuthToken=this.preAuthToken),`${this.hostname}/${this.id}/connect?${new URLSearchParams(e)}`}fileUrl(e){return`${this.hostname}/${this.id}/get/${e}`}fetchPreAuthToken(){return this.companionKeysParams?this.post(`${this.id}/preauth/`,{params:this.companionKeysParams}).then(e=>{this.preAuthToken=e.token}).catch(e=>{this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${e}`,"warning")}):Promise.resolve()}list(e){return this.get(`${this.id}/list/${e||""}`)}logout(){return this.get(`${this.id}/logout`).then(e=>Promise.all([e,this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)])).then(e=>{let[t]=e;return t})}static initPlugin(e,t,n){if(e.type="acquirer",e.files=[],n&&(e.opts=w(w({},n),t)),t.serverUrl||t.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(t.companionAllowedHosts){const s=t.companionAllowedHosts;if(typeof s!="string"&&!Array.isArray(s)&&!(s instanceof RegExp))throw new TypeError(`${e.id}: the option "companionAllowedHosts" must be one of string, Array, RegExp`);e.opts.companionAllowedHosts=s}else/^(?!https?:\/\/).*$/i.test(t.companionUrl)?e.opts.companionAllowedHosts=`https://${t.companionUrl.replace(/^\/\//,"")}`:e.opts.companionAllowedHosts=new URL(t.companionUrl).origin;e.storage=e.opts.storage||Rd}};const Nd=oi,Id=r=>r.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");var Ld=class extends Nd{constructor(e,t){super(e,t);this.provider=t.provider,this.id=this.provider,this.name=this.opts.name||Id(this.id),this.pluginId=this.opts.pluginId}fileUrl(e){return`${this.hostname}/search/${this.id}/get/${e}`}search(e,t){return t=t?`&${t}`:"",this.get(`search/${this.id}/list?q=${encodeURIComponent(e)}${t}`)}},je,st,Ae,ce,en;let Ao,Oo;function ne(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Md=0;function yr(r){return"__private_"+Md+++"_"+r}const jd=us;var zd=(je=yr("queued"),st=yr("emitter"),Ae=yr("isOpen"),ce=yr("socket"),en=yr("handleMessage"),Ao=Symbol.for("uppy test: getSocket"),Oo=Symbol.for("uppy test: getQueued"),class{constructor(e){Object.defineProperty(this,je,{writable:!0,value:[]}),Object.defineProperty(this,st,{writable:!0,value:jd()}),Object.defineProperty(this,Ae,{writable:!0,value:!1}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,en,{writable:!0,value:t=>{try{const n=JSON.parse(t.data);this.emit(n.action,n.payload)}catch(n){console.log(n)}}}),this.opts=e,(!e||e.autoOpen!==!1)&&this.open()}get isOpen(){return ne(this,Ae)[Ae]}[Ao](){return ne(this,ce)[ce]}[Oo](){return ne(this,je)[je]}open(){ne(this,ce)[ce]=new WebSocket(this.opts.target),ne(this,ce)[ce].onopen=()=>{for(ne(this,Ae)[Ae]=!0;ne(this,je)[je].length>0&&ne(this,Ae)[Ae];){const e=ne(this,je)[je].shift();this.send(e.action,e.payload)}},ne(this,ce)[ce].onclose=()=>{ne(this,Ae)[Ae]=!1},ne(this,ce)[ce].onmessage=ne(this,en)[en]}close(){var e;(e=ne(this,ce)[ce])==null||e.close()}send(e,t){if(!ne(this,Ae)[Ae]){ne(this,je)[je].push({action:e,payload:t});return}ne(this,ce)[ce].send(JSON.stringify({action:e,payload:t}))}on(e,t){ne(this,st)[st].on(e,t)}emit(e,t){ne(this,st)[st].emit(e,t)}once(e,t){ne(this,st)[st].once(e,t)}});const qd=oi,Hd=Bd,Wd=Ld,Vd=zd;var Gd={RequestClient:qd,Provider:Hd,SearchProvider:Wd,Socket:Vd};const Kd=Un;function Xd(r,e,t){const{progress:n,bytesUploaded:s,bytesTotal:i}=e;n&&(r.uppy.log(`Upload progress: ${n}`),r.uppy.emit("upload-progress",t,{uploader:r,bytesUploaded:s,bytesTotal:i}))}var Yd=Kd(Xd,300,{leading:!0,trailing:!0}),Qd=function(e){const n=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(e)[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${n}`},Jd=function(e){const t=[],n=[];function s(c){t.push(c)}function i(c){n.push(c)}return Promise.all(e.map(c=>c.then(s,i))).then(()=>({successful:t,failed:n}))},ot,jt;function vr(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Zd=0;function To(r){return"__private_"+Zd+++"_"+r}var eh=(ot=To("emitter"),jt=To("events"),class{constructor(e){Object.defineProperty(this,ot,{writable:!0,value:void 0}),Object.defineProperty(this,jt,{writable:!0,value:[]}),vr(this,ot)[ot]=e}on(e,t){return vr(this,jt)[jt].push([e,t]),vr(this,ot)[ot].on(e,t)}remove(){for(const[e,t]of vr(this,jt)[jt].splice(0))vr(this,ot)[ot].off(e,t)}});function th(r){return r?r.readyState!==0&&r.readyState!==4||r.status===0:!1}var rh=th;function R(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var nh=0;function ve(r){return"__private_"+nh+++"_"+r}function ih(){return new Error("Cancelled")}var Pe=ve("activeRequests"),ge=ve("queuedHandlers"),_e=ve("paused"),_t=ve("pauseTimer"),me=ve("downLimit"),St=ve("upperLimit"),Ze=ve("rateLimitingTimer"),br=ve("call"),et=ve("queueNext"),ai=ve("next"),li=ve("queue"),ui=ve("dequeue"),ci=ve("resume"),Ft=ve("increaseLimit");class sh{constructor(e){Object.defineProperty(this,ui,{value:ch}),Object.defineProperty(this,li,{value:uh}),Object.defineProperty(this,ai,{value:lh}),Object.defineProperty(this,et,{value:ah}),Object.defineProperty(this,br,{value:oh}),Object.defineProperty(this,Pe,{writable:!0,value:0}),Object.defineProperty(this,ge,{writable:!0,value:[]}),Object.defineProperty(this,_e,{writable:!0,value:!1}),Object.defineProperty(this,_t,{writable:!0,value:void 0}),Object.defineProperty(this,me,{writable:!0,value:1}),Object.defineProperty(this,St,{writable:!0,value:void 0}),Object.defineProperty(this,Ze,{writable:!0,value:void 0}),Object.defineProperty(this,ci,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,Ft,{writable:!0,value:()=>{if(R(this,_e)[_e]){R(this,Ze)[Ze]=setTimeout(R(this,Ft)[Ft],0);return}R(this,me)[me]=this.limit,this.limit=Math.ceil((R(this,St)[St]+R(this,me)[me])/2);for(let t=R(this,me)[me];t<=this.limit;t++)R(this,et)[et]();R(this,St)[St]-R(this,me)[me]>3?R(this,Ze)[Ze]=setTimeout(R(this,Ft)[Ft],2e3):R(this,me)[me]=Math.floor(R(this,me)[me]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!R(this,_e)[_e]&&R(this,Pe)[Pe]<this.limit?R(this,br)[br](e):R(this,li)[li](e,t)}wrapPromiseFunction(e,t){var n=this;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];let c;const f=new Promise((y,g)=>{c=n.run(()=>{let b,_;try{_=Promise.resolve(e(...i))}catch(S){_=Promise.reject(S)}return _.then(S=>{b?g(b):(c.done(),y(S))},S=>{b?g(b):(c.done(),g(S))}),()=>{b=ih()}},t)});return f.abort=()=>{c.abort()},f}}resume(){R(this,_e)[_e]=!1,clearTimeout(R(this,_t)[_t]);for(let e=0;e<this.limit;e++)R(this,et)[et]()}pause(e){e===void 0&&(e=null),R(this,_e)[_e]=!0,clearTimeout(R(this,_t)[_t]),e!=null&&(R(this,_t)[_t]=setTimeout(R(this,ci)[ci],e))}rateLimit(e){clearTimeout(R(this,Ze)[Ze]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(R(this,St)[St]=this.limit-1,this.limit=R(this,me)[me],R(this,Ze)[Ze]=setTimeout(R(this,Ft)[Ft],e))}get isPaused(){return R(this,_e)[_e]}}function oh(r){R(this,Pe)[Pe]+=1;let e=!1,t;try{t=r()}catch(n){throw R(this,Pe)[Pe]-=1,n}return{abort:()=>{e||(e=!0,R(this,Pe)[Pe]-=1,t(),R(this,et)[et]())},done:()=>{e||(e=!0,R(this,Pe)[Pe]-=1,R(this,et)[et]())}}}function ah(){queueMicrotask(()=>R(this,ai)[ai]())}function lh(){if(R(this,_e)[_e]||R(this,Pe)[Pe]>=this.limit||R(this,ge)[ge].length===0)return;const r=R(this,ge)[ge].shift(),e=R(this,br)[br](r.fn);r.abort=e.abort,r.done=e.done}function uh(r,e){e===void 0&&(e={});const t={fn:r,priority:e.priority||0,abort:()=>{R(this,ui)[ui](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},n=R(this,ge)[ge].findIndex(s=>t.priority>s.priority);return n===-1?R(this,ge)[ge].push(t):R(this,ge)[ge].splice(n,0,t),t}function ch(r){const e=R(this,ge)[ge].indexOf(r);e!==-1&&R(this,ge)[ge].splice(e,1)}var dh={RateLimitedQueue:sh,internalRateLimitedQueue:Symbol("__queue")};const hh=So;function ph(){return typeof window!="undefined"&&(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined")}function fh(){return typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}var gh=function(e){return(t,n)=>{if(ph()||fh())return hh.defaultOptions.fingerprint(t,n);const s=["tus",e.id,n.endpoint].join("-");return Promise.resolve(s)}},Eo,Uo;const mh=Hr,yh=So,{Provider:vh,RequestClient:bh,Socket:wh}=Gd,Ph=Yd,_h=Qd,Sh=Jd,Do=eh,Fh=Fo,Ch=rh,{RateLimitedQueue:kh}=dh,xo=ss,Ah=gh,Oh={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1};var Th=(Uo=Eo=class extends mh{constructor(e,t){super(e,t);this.type="uploader",this.id=this.opts.id||"Tus",this.title="Tus";const n={useFastRemoteRetry:!0,limit:5,retryDelays:[0,1e3,3e3,5e3],withCredentials:!1};if(this.opts=w(w({},n),t),"autoRetry"in t)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=new kh(this.opts.limit),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null),this.uploaderSockets=Object.create(null),this.handleResetProgress=this.handleResetProgress.bind(this),this.handleUpload=this.handleUpload.bind(this)}handleResetProgress(){const e=w({},this.uppy.getState().files);Object.keys(e).forEach(t=>{if(e[t].tus&&e[t].tus.uploadUrl){const n=w({},e[t].tus);delete n.uploadUrl,e[t]=D(w({},e[t]),{tus:n})}}),this.uppy.setState({files:e})}resetUploaderReferences(e,t){if(t===void 0&&(t={}),this.uploaders[e]){const n=this.uploaders[e];n.abort(),t.abort&&n.abort(!0),this.uploaders[e]=null}this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)}upload(e){return this.resetUploaderReferences(e.id),new Promise((t,n)=>{this.uppy.emit("upload-started",e);const s=w(w({},this.opts),e.tus||{});typeof s.headers=="function"&&(s.headers=s.headers(e));const i=w(w({},Oh),s);i.fingerprint=Ah(e),i.onBeforeRequest=b=>{const _=b.getUnderlyingObject();_.withCredentials=!!s.withCredentials,typeof s.onBeforeRequest=="function"&&s.onBeforeRequest(b)},i.onError=b=>{this.uppy.log(b);const _=b.originalRequest?b.originalRequest.getUnderlyingObject():null;Ch(_)&&(b=new Fh(b,_)),this.resetUploaderReferences(e.id),g.done(),this.uppy.emit("upload-error",e,b),n(b)},i.onProgress=(b,_)=>{this.onReceiveUploadUrl(e,y.url),this.uppy.emit("upload-progress",e,{uploader:this,bytesUploaded:b,bytesTotal:_})},i.onSuccess=()=>{const b={uploadURL:y.url};this.resetUploaderReferences(e.id),g.done(),this.uppy.emit("upload-success",e,b),y.url&&this.uppy.log(`Download ${y.file.name} from ${y.url}`),t(y)};const o=(b,_,S)=>{xo(b,_)&&!xo(b,S)&&(b[S]=b[_])},c={};(Array.isArray(s.metaFields)?s.metaFields:Object.keys(e.meta)).forEach(b=>{c[b]=e.meta[b]}),o(c,"type","filetype"),o(c,"name","filename"),i.metadata=c;const y=new yh.Upload(e.data,i);this.uploaders[e.id]=y,this.uploaderEvents[e.id]=new Do(this.uppy),y.findPreviousUploads().then(b=>{const _=b[0];_&&(this.uppy.log(`[Tus] Resuming upload of ${e.id} started at ${_.creationTime}`),y.resumeFromPreviousUpload(_))});let g=this.requests.run(()=>(e.isPaused||y.start(),()=>{}));this.onFileRemove(e.id,b=>{g.abort(),this.resetUploaderReferences(e.id,{abort:!!y.url}),t(`upload ${b} was removed`)}),this.onPause(e.id,b=>{b?(g.abort(),y.abort()):(g.abort(),g=this.requests.run(()=>(y.start(),()=>{})))}),this.onPauseAll(e.id,()=>{g.abort(),y.abort()}),this.onCancelAll(e.id,()=>{g.abort(),this.resetUploaderReferences(e.id,{abort:!!y.url}),t(`upload ${e.id} was canceled`)}),this.onResumeAll(e.id,()=>{g.abort(),e.error&&y.abort(),g=this.requests.run(()=>(y.start(),()=>{}))})}).catch(t=>{throw this.uppy.emit("upload-error",e,t),t})}uploadRemote(e){this.resetUploaderReferences(e.id);const t=w({},this.opts);return e.tus&&Object.assign(t,e.tus),this.uppy.emit("upload-started",e),this.uppy.log(e.remote.url),e.serverToken?this.connectToServerSocket(e):new Promise((n,s)=>{const i=e.remote.providerOptions.provider?vh:bh;new i(this.uppy,e.remote.providerOptions).post(e.remote.url,D(w({},e.remote.body),{endpoint:t.endpoint,uploadUrl:t.uploadUrl,protocol:"tus",size:e.data.size,headers:t.headers,metadata:e.meta})).then(c=>(this.uppy.setFileState(e.id,{serverToken:c.token}),e=this.uppy.getFile(e.id),this.connectToServerSocket(e))).then(()=>{n()}).catch(c=>{this.uppy.emit("upload-error",e,c),s(c)})})}connectToServerSocket(e){return new Promise((t,n)=>{const s=e.serverToken,i=_h(e.remote.companionUrl),o=new wh({target:`${i}/api/${s}`,autoOpen:!1});this.uploaderSockets[e.id]=o,this.uploaderEvents[e.id]=new Do(this.uppy),this.onFileRemove(e.id,()=>{c.abort(),o.send("cancel",{}),this.resetUploaderReferences(e.id),t(`upload ${e.id} was removed`)}),this.onPause(e.id,f=>{f?(c.abort(),o.send("pause",{})):(c.abort(),c=this.requests.run(()=>(o.send("resume",{}),()=>{})))}),this.onPauseAll(e.id,()=>{c.abort(),o.send("pause",{})}),this.onCancelAll(e.id,()=>{c.abort(),o.send("cancel",{}),this.resetUploaderReferences(e.id),t(`upload ${e.id} was canceled`)}),this.onResumeAll(e.id,()=>{c.abort(),e.error&&o.send("pause",{}),c=this.requests.run(()=>(o.send("resume",{}),()=>{}))}),this.onRetry(e.id,()=>{o.isOpen&&(o.send("pause",{}),o.send("resume",{}))}),this.onRetryAll(e.id,()=>{o.isOpen&&(o.send("pause",{}),o.send("resume",{}))}),o.on("progress",f=>Ph(this,f,e)),o.on("error",f=>{const{message:y}=f.error,g=Object.assign(new Error(y),{cause:f.error});this.opts.useFastRemoteRetry?o.close():(this.resetUploaderReferences(e.id),this.uppy.setFileState(e.id,{serverToken:null})),this.uppy.emit("upload-error",e,g),c.done(),n(g)}),o.on("success",f=>{const y={uploadURL:f.url};this.uppy.emit("upload-success",e,y),this.resetUploaderReferences(e.id),c.done(),t()});let c=this.requests.run(()=>(o.open(),e.isPaused&&o.send("pause",{}),()=>{}))})}onReceiveUploadUrl(e,t){const n=this.uppy.getFile(e.id);!n||(!n.tus||n.tus.uploadUrl!==t)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(n.id,{tus:D(w({},n.tus),{uploadUrl:t})}))}onFileRemove(e,t){this.uploaderEvents[e].on("file-removed",n=>{e===n.id&&t(n.id)})}onPause(e,t){this.uploaderEvents[e].on("upload-pause",(n,s)=>{e===n&&t(s)})}onRetry(e,t){this.uploaderEvents[e].on("upload-retry",n=>{e===n&&t()})}onRetryAll(e,t){this.uploaderEvents[e].on("retry-all",()=>{!this.uppy.getFile(e)||t()})}onPauseAll(e,t){this.uploaderEvents[e].on("pause-all",()=>{!this.uppy.getFile(e)||t()})}onCancelAll(e,t){this.uploaderEvents[e].on("cancel-all",()=>{!this.uppy.getFile(e)||t()})}onResumeAll(e,t){this.uploaderEvents[e].on("resume-all",()=>{!this.uppy.getFile(e)||t()})}uploadFiles(e){const t=e.map((n,s)=>{const i=s+1,o=e.length;return"error"in n&&n.error?Promise.reject(new Error(n.error)):n.isRemote?((!n.progress.uploadStarted||!n.isRestored)&&this.uppy.emit("upload-started",n),this.uploadRemote(n,i,o)):((!n.progress.uploadStarted||!n.isRestored)&&this.uppy.emit("upload-started",n),this.upload(n,i,o))});return Sh(t)}handleUpload(e){if(e.length===0)return this.uppy.log("[Tus] No files to upload"),Promise.resolve();this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const t=e.map(n=>this.uppy.getFile(n));return this.uploadFiles(t).then(()=>null)}install(){this.uppy.setState({capabilities:D(w({},this.uppy.getState().capabilities),{resumableUploads:!0})}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress)}uninstall(){this.uppy.setState({capabilities:D(w({},this.uppy.getState().capabilities),{resumableUploads:!1})}),this.uppy.removeUploader(this.handleUpload)}},Eo.VERSION="2.1.2",Uo),Ty=Th,Eh=function(e){if(!e.bytesUploaded)return 0;const t=Date.now()-e.uploadStarted;return e.bytesUploaded/(t/1e3)},Uh=function(e){return e.bytesTotal-e.bytesUploaded};function Dh(r){for(var e;r&&!r.dir;)r=r.parentNode;return(e=r)==null?void 0:e.dir}var Ro=Dh,di={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},xh=function(e){const t=[];let n,s;for(const{progress:o}of Object.values(e)){const{preprocess:c,postprocess:f}=o;s==null&&(c||f)&&({mode:n,message:s}=c||f),(c==null?void 0:c.mode)==="determinate"&&t.push(c.value),(f==null?void 0:f.mode)==="determinate"&&t.push(f.value)}const i=t.reduce((o,c)=>o+c/t.length,0);return{mode:n,message:s,value:i}},Rh=function(e){const t=Math.floor(e/3600)%24,n=Math.floor(e/60)%60,s=Math.floor(e%60);return{hours:t,minutes:n,seconds:s}};const $h=Rh;var Bh=function(e){const t=$h(e),n=t.hours===0?"":`${t.hours}h`,s=t.minutes===0?"":`${t.hours===0?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`,i=t.hours!==0?"":`${t.minutes===0?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`;return`${n}${s}${i}`};const $o=Be.exports,Nh=Un,Bo=Dn,Ih=Bh,{h:N}=W,Lh=di,Mh="\xB7",No=()=>` ${Mh} `;function jh(r){const{newFiles:e,isUploadStarted:t,recoveredState:n,i18n:s,uploadState:i,isSomeGhost:o,startUpload:c}=r,f=$o("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":i===Lh.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),y=e&&t&&!n?s("uploadXNewFiles",{smart_count:e}):s("uploadXFiles",{smart_count:e});return N("button",{type:"button",className:f,"aria-label":s("uploadXFiles",{smart_count:e}),onClick:c,disabled:o,"data-uppy-super-focusable":!0},y)}function zh(r){const{i18n:e,uppy:t}=r;return N("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll(),"data-uppy-super-focusable":!0},N("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},N("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function qh(r){const{i18n:e,uppy:t}=r;return N("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-uppy-super-focusable":!0},N("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},N("g",{fill:"none",fillRule:"evenodd"},N("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),N("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Hh(r){const{isAllPaused:e,i18n:t,isAllComplete:n,resumableUploads:s,uppy:i}=r,o=t(e?"resume":"pause");function c(){return n?null:s?e?i.resumeAll():i.pauseAll():i.cancelAll()}return N("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:c,"data-uppy-super-focusable":!0},N("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},N("g",{fill:"none",fillRule:"evenodd"},N("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),N("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function Wh(r){const{i18n:e,doneButtonHandler:t}=r;return N("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0},e("done"))}function hi(){return N("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},N("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function Vh(r){const{progress:e}=r,{value:t,mode:n,message:s}=e,i=Math.round(t*100),o="\xB7";return N("div",{className:"uppy-StatusBar-content"},N(hi,null),n==="determinate"?`${i}% ${o} `:"",s)}function Io(r){const{numUploads:e,complete:t,totalUploadedSize:n,totalSize:s,totalETA:i,i18n:o}=r,c=e>1;return N("div",{className:"uppy-StatusBar-statusSecondary"},c&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),N("span",{className:"uppy-StatusBar-additionalInfo"},c&&No(),o("dataUploadedOfTotal",{complete:Bo(n),total:Bo(s)}),No(),o("xTimeLeft",{time:Ih(i)})))}function Lo(r){const{i18n:e,complete:t,numUploads:n}=r;return N("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:t,smart_count:n}))}function Gh(r){const{i18n:e,newFiles:t,startUpload:n}=r,s=$o("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return N("div",{className:"uppy-StatusBar-statusSecondary"},N("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:t})),N("button",{type:"button",className:s,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:n},e("upload")))}const Kh=Nh(Io,500,{leading:!0,trailing:!0});function Xh(r){const{i18n:e,supportsUploadProgress:t,totalProgress:n,showProgressDetails:s,isUploadStarted:i,isAllComplete:o,isAllPaused:c,newFiles:f,numUploads:y,complete:g,totalUploadedSize:b,totalSize:_,totalETA:S,startUpload:k}=r,$=f&&i;if(!i||o)return null;const x=e(c?"paused":"uploading");function B(){return!c&&!$&&s?t?N(Kh,{numUploads:y,complete:g,totalUploadedSize:b,totalSize:_,totalETA:S,i18n:e}):N(Lo,{i18n:e,complete:g,numUploads:y}):null}return N("div",{className:"uppy-StatusBar-content","aria-label":x,title:x},c?null:N(hi,null),N("div",{className:"uppy-StatusBar-status"},N("div",{className:"uppy-StatusBar-statusPrimary"},t?`${x}: ${n}%`:x),B(),$?N(Gh,{i18n:e,newFiles:f,startUpload:k}):null))}function Yh(r){const{i18n:e}=r;return N("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},N("div",{className:"uppy-StatusBar-status"},N("div",{className:"uppy-StatusBar-statusPrimary"},N("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},N("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function Qh(r){const{error:e,i18n:t,complete:n,numUploads:s}=r;function i(){const o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return N("div",{className:"uppy-StatusBar-content",title:t("uploadFailed")},N("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},N("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),N("div",{className:"uppy-StatusBar-status"},N("div",{className:"uppy-StatusBar-statusPrimary"},t("uploadFailed"),N("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:i,type:"button"},"?")),N(Lo,{i18n:t,complete:n,numUploads:s})))}var Jh={UploadBtn:jh,RetryBtn:zh,CancelBtn:qh,PauseResumeButton:Hh,DoneBtn:Wh,LoadingSpinner:hi,ProgressDetails:Io,ProgressBarProcessing:Vh,ProgressBarError:Qh,ProgressBarUploading:Xh,ProgressBarComplete:Yh};const{h:Oe}=W,Mo=Be.exports,Zh=di,pi=xh,{UploadBtn:ep,RetryBtn:tp,CancelBtn:rp,PauseResumeButton:np,DoneBtn:ip,ProgressBarProcessing:sp,ProgressBarError:op,ProgressBarUploading:ap,ProgressBarComplete:lp}=Jh,{STATE_ERROR:jo,STATE_WAITING:zo,STATE_PREPROCESSING:fi,STATE_UPLOADING:tn,STATE_POSTPROCESSING:gi,STATE_COMPLETE:rn}=Zh;var up=cp;function cp(r){const{newFiles:e,allowNewUpload:t,isUploadInProgress:n,isAllPaused:s,resumableUploads:i,error:o,hideUploadButton:c,hidePauseResumeButton:f,hideCancelButton:y,hideRetryButton:g,recoveredState:b,uploadState:_,totalProgress:S,files:k,supportsUploadProgress:$,hideAfterFinish:x,isSomeGhost:B,isTargetDOMEl:H,doneButtonHandler:z,isUploadStarted:K,i18n:T,startUpload:j,uppy:X,isAllComplete:te,showProgressDetails:de,numUploads:he,complete:Ee,totalSize:Kt,totalETA:Ue,totalUploadedSize:A}=r;function M(){switch(_){case gi:case fi:{const $e=pi(k);return $e.mode==="determinate"?$e.value*100:S}case jo:return null;case tn:return $?S:null;default:return S}}function Q(){switch(_){case gi:case fi:{const{mode:$e}=pi(k);return $e==="indeterminate"}case tn:return!$;default:return!1}}function ie(){if(b)return!1;switch(_){case zo:return c||e===0;case rn:return x;default:return!1}}const xe=M(),Ot=ie(),Y=xe!=null?xe:100,ct=!o&&e&&!n&&!s&&t&&!c,Re=!y&&_!==zo&&_!==rn,Or=i&&!f&&_===tn,dn=o&&!te&&!g,dt=z&&_===rn,Xt=Mo("uppy-StatusBar-progress",{"is-indeterminate":Q()}),Yt=Mo({"uppy-Root":H},"uppy-StatusBar",`is-${_}`,{"has-ghosts":B});return Oe("div",{className:Yt,"aria-hidden":Ot},Oe("div",{className:Xt,style:{width:`${Y}%`},role:"progressbar","aria-label":`${Y}%`,"aria-valuetext":`${Y}%`,"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":xe}),(()=>{switch(_){case fi:case gi:return Oe(sp,{progress:pi(k)});case rn:return Oe(lp,{i18n:T});case jo:return Oe(op,{error:o,i18n:T,numUploads:he,complete:Ee});case tn:return Oe(ap,{i18n:T,supportsUploadProgress:$,totalProgress:S,showProgressDetails:de,isUploadStarted:K,isAllComplete:te,isAllPaused:s,newFiles:e,numUploads:he,complete:Ee,totalUploadedSize:A,totalSize:Kt,totalETA:Ue,startUpload:j});default:return null}})(),Oe("div",{className:"uppy-StatusBar-actions"},b||ct?Oe(ep,{newFiles:e,isUploadStarted:K,recoveredState:b,i18n:T,isSomeGhost:B,startUpload:j,uploadState:_}):null,dn?Oe(tp,{i18n:T,uppy:X}):null,Or?Oe(np,{isAllPaused:s,i18n:T,isAllComplete:te,resumableUploads:i,uppy:X}):null,Re?Oe(rp,{i18n:T,uppy:X}):null,dt?Oe(ip,{i18n:T,doneButtonHandler:z}):null))}var dp={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},qo,Ho;const{UIPlugin:hp}=fe.exports,pp=Eh,fp=Uh,gp=Ro,ze=di,mp=up,yp=dp;var Wo=(Ho=qo=class extends hp{constructor(e,t){super(e,t);this.startUpload=()=>{const{recoveredState:s}=this.uppy.getState();if(s){this.uppy.emit("restore-confirmed");return}return this.uppy.upload().catch(()=>{})},this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=yp;const n={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};this.opts=w(w({},n),t),this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){const{capabilities:t,files:n,allowNewUpload:s,totalProgress:i,error:o,recoveredState:c}=e,{newFiles:f,startedFiles:y,completeFiles:g,inProgressNotPausedFiles:b,isUploadStarted:_,isAllComplete:S,isAllErrored:k,isAllPaused:$,isUploadInProgress:x,isSomeGhost:B}=this.uppy.getObjectOfFilesPerState(),H=c?Object.values(n):f,z=bp(b),K=!!t.resumableUploads,T=t.uploadProgress!==!1;let j=0,X=0;return y.forEach(te=>{j+=te.progress.bytesTotal||0,X+=te.progress.bytesUploaded||0}),mp({error:o,uploadState:wp(o,S,c,e.files||{}),allowNewUpload:s,totalProgress:i,totalSize:j,totalUploadedSize:X,isAllComplete:!1,isAllPaused:$,isAllErrored:k,isUploadStarted:_,isUploadInProgress:x,isSomeGhost:B,recoveredState:c,complete:g.length,newFiles:H.length,numUploads:y.length,totalETA:z,files:n,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:K,supportsUploadProgress:T,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}onMount(){const e=this.el;gp(e)||(e.dir="ltr")}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}},qo.VERSION="2.1.2",Ho);function vp(r){let e=0;return r.forEach(t=>{e+=pp(t.progress)}),e}function bp(r){const e=vp(r);if(e===0)return 0;const t=r.reduce((n,s)=>n+fp(s.progress),0);return Math.round(t/e*10)/10}function wp(r,e,t,n){if(r&&!e)return ze.STATE_ERROR;if(e)return ze.STATE_COMPLETE;if(t)return ze.STATE_WAITING;let s=ze.STATE_WAITING;const i=Object.keys(n);for(let o=0;o<i.length;o++){const{progress:c}=n[i[o]];if(c.uploadStarted&&!c.uploadComplete)return ze.STATE_UPLOADING;c.preprocess&&s!==ze.STATE_UPLOADING&&(s=ze.STATE_PREPROCESSING),c.postprocess&&s!==ze.STATE_UPLOADING&&s!==ze.STATE_PREPROCESSING&&(s=ze.STATE_POSTPROCESSING)}return s}const{h:Pp,Component:_p,createRef:Sp}=W,Vo=300;var Fp=class extends _p{constructor(){super(...arguments);this.ref=Sp()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,Vo)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,Vo)}render(){const{children:e}=this.props;return Pp("div",{className:"uppy-Informer-animated",ref:this.ref},e)}};const{Component:Cp,cloneElement:kp,h:Ap,toChildArray:zt}=W;function Op(r,e){return Object.assign(r,e)}function Tp(r,e){var t;return(t=r==null?void 0:r.key)!=null?t:e}function Ep(r,e){const t=r._ptgLinkedRefs||(r._ptgLinkedRefs={});return t[e]||(t[e]=n=>{r.refs[e]=n})}function wr(r){const e={};for(let t=0;t<r.length;t++)if(r[t]!=null){const n=Tp(r[t],t.toString(36));e[n]=r[t]}return e}function Up(r,e){r=r||{},e=e||{};const t=o=>e.hasOwnProperty(o)?e[o]:r[o],n={};let s=[];for(const o in r)e.hasOwnProperty(o)?s.length&&(n[o]=s,s=[]):s.push(o);const i={};for(const o in e){if(n.hasOwnProperty(o))for(let c=0;c<n[o].length;c++){const f=n[o][c];i[n[o][c]]=t(f)}i[o]=t(o)}for(let o=0;o<s.length;o++)i[s[o]]=t(s[o]);return i}const Dp=r=>r;class Go extends Cp{constructor(e,t){super(e,t);this.refs={},this.state={children:wr(zt(zt(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=wr(zt(e.children)||[]),n=this.state.children;this.setState(i=>({children:Up(i.children,t)}));let s;for(s in t)if(t.hasOwnProperty(s)){const i=n&&n.hasOwnProperty(s);t[s]&&i&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):t[s]&&!i&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in n)if(n.hasOwnProperty(s)){const i=t&&t.hasOwnProperty(s);n[s]&&!i&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const n=wr(zt(this.props.children)||[]);(!n||!n.hasOwnProperty(e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const n=wr(zt(this.props.children)||[]);(!n||!n.hasOwnProperty(e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const n=this.refs[e];n.componentWillLeave?n.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const n=this.refs[e];n.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const s=wr(zt(this.props.children)||[]);if(s&&s.hasOwnProperty(e))this.performEnter(e);else{const i=Op({},this.state.children);delete i[e],this.setState({children:i})}}render(e,t){let $=e,{childFactory:n,transitionLeave:s,transitionName:i,transitionAppear:o,transitionEnter:c,transitionLeaveTimeout:f,transitionEnterTimeout:y,transitionAppearTimeout:g,component:b}=$,_=On($,["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"]),{children:S}=t;const k=[];for(const x in S)if(S.hasOwnProperty(x)){const B=S[x];if(B){const H=Ep(this,x),z=kp(n(B),{ref:H,key:x});k.push(z)}}return Ap(b,_,k)}}Go.defaultProps={component:"span",childFactory:Dp};var xp=Go,Ko,Xo;const{h:Pr}=W,{UIPlugin:Rp}=fe.exports,$p=Fp,Bp=xp;var Np=(Xo=Ko=class extends Rp{constructor(e,t){super(e,t);this.render=s=>Pr("div",{className:"uppy uppy-Informer"},Pr(Bp,null,s.info.map(i=>Pr($p,{key:i.message},Pr("p",{role:"alert"},i.message," ",i.details&&Pr("span",{"aria-label":i.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${i.message} 

 ${i.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer";const n={};this.opts=w(w({},n),t)}install(){const{target:e}=this.opts;e&&this.mount(e,this)}},Ko.VERSION="2.0.5",Xo);const Ip=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;var Lp=function(e,t,n){var s,i;const o=Ip.exec(e),c=(s=(i=t.mimeType)!=null?i:o==null?void 0:o[1])!=null?s:"plain/text";let f;if(o[2]!=null){const y=atob(decodeURIComponent(o[3])),g=new Uint8Array(y.length);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);f=[g]}else f=[decodeURIComponent(o[3])];return n?new File(f,t.name||"",{type:c}):new Blob(f,{type:c})},Mp=function(e){return e.startsWith("blob:")},jp=function(e){return e?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e):!1},mi={exports:{}};(function(r,e){(function(t,n){n(e)})(we,function(t){function n(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function s(p,u){for(var d=0;d<u.length;d++){var a=u[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(p,a.key,a)}}function i(p,u,d){return u&&s(p.prototype,u),d&&s(p,d),p}function o(p,u,d){return u in p?Object.defineProperty(p,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):p[u]=d,p}function c(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var d=["prototype","__proto__","caller","arguments","length","name"];Object.getOwnPropertyNames(u).forEach(function(a){d.indexOf(a)===-1&&p[a]!==u[a]&&(p[a]=u[a])}),u&&y(p,u)}function f(p){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(p)}function y(p,u){return(y=Object.setPrototypeOf||function(d,a){return d.__proto__=a,d})(p,u)}function g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(p,u,d){return(b=g()?Reflect.construct:function(a,l,h){var m=[null];m.push.apply(m,l);var v=new(Function.bind.apply(a,m));return h&&y(v,h.prototype),v}).apply(null,arguments)}function _(p){var u=typeof Map=="function"?new Map:void 0;return(_=function(d){if(d===null||(a=d,Function.toString.call(a).indexOf("[native code]")===-1))return d;var a;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(d))return u.get(d);u.set(d,l)}function l(){return b(d,arguments,f(this).constructor)}return l.prototype=Object.create(d.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),y(l,d)})(p)}function S(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function k(p,u){return!u||typeof u!="object"&&typeof u!="function"?S(p):u}function $(p){var u=g();return function(){var d,a=f(p);if(u){var l=f(this).constructor;d=Reflect.construct(a,arguments,l)}else d=a.apply(this,arguments);return k(this,d)}}function x(p,u,d){return(x=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(a,l,h){var m=function(P,F){for(;!Object.prototype.hasOwnProperty.call(P,F)&&(P=f(P))!==null;);return P}(a,l);if(m){var v=Object.getOwnPropertyDescriptor(m,l);return v.get?v.get.call(h):v.value}})(p,u,d||p)}var B=Object.values||function(p){var u=[];for(var d in p)u.push(p[d]);return u},H=Object.entries||function(p){var u=[];for(var d in p)u.push([d,p[d]]);return u},z=Object.assign||function(p){for(var u=arguments.length,d=new Array(u>1?u-1:0),a=1;a<u;a++)d[a-1]=arguments[a];return d.forEach(function(l){for(var h in l)p[h]=l[h]}),p},K=Object.fromEntries||function(p){var u={};return T(p).forEach(function(d){var a=d[0],l=d[1];u[a]=l}),u},T=Array.from||function(p){if(p instanceof Ee){var u=[];return p.forEach(function(d,a){return u.push([a,d])}),u}return Array.prototype.slice.call(p)};function j(p){return this.indexOf(p)!==-1}Array.prototype.includes||(Array.prototype.includes=j),String.prototype.includes||(String.prototype.includes=j),String.prototype.startsWith||(String.prototype.startsWith=function(p){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.substring(u,u+p.length)===p}),String.prototype.endsWith||(String.prototype.endsWith=function(p){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.length;return this.substring(u-p.length,u)===p});var X=typeof self!="undefined"?self:we,te=X.fetch||function(p){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(d,a){var l=new XMLHttpRequest;if(l.open("get",p,!0),l.responseType="arraybuffer",l.onerror=a,u.headers)for(var h in u.headers)l.setRequestHeader(h,u.headers[h]);l.onload=function(){d({ok:l.status>=200&&l.status<300,status:l.status,arrayBuffer:function(){return Promise.resolve(l.response)}})},l.send(null)})},de=function(p){var u=[];if(Object.defineProperties(u,{size:{get:function(){return this.length}},has:{value:function(a){return this.indexOf(a)!==-1}},add:{value:function(a){this.has(a)||this.push(a)}},delete:{value:function(a){if(this.has(a)){var l=this.indexOf(a);this.splice(l,1)}}}}),Array.isArray(p))for(var d=0;d<p.length;d++)u.add(p[d]);return u},he=function(p){return new Ee(p)},Ee=X.Map!==void 0&&X.Map.prototype.keys!==void 0?X.Map:function(){function p(u){if(n(this,p),this.clear(),u)for(var d=0;d<u.length;d++)this.set(u[d][0],u[d][1])}return i(p,[{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"size",get:function(){return this._keys.length}},{key:"get",value:function(u){return this._map["map_"+u]}},{key:"set",value:function(u,d){return this._map["map_"+u]=d,this._keys.indexOf(u)<0&&this._keys.push(u),this}},{key:"has",value:function(u){return this._keys.indexOf(u)>=0}},{key:"delete",value:function(u){var d=this._keys.indexOf(u);return!(d<0)&&(delete this._map["map_"+u],this._keys.splice(d,1),!0)}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"values",value:function(){var u=this;return this._keys.map(function(d){return u.get(d)})}},{key:"entries",value:function(){var u=this;return this._keys.map(function(d){return[d,u.get(d)]})}},{key:"forEach",value:function(u,d){for(var a=0;a<this._keys.length;a++)u.call(d,this._map["map_"+this._keys[a]],this._keys[a],this)}}]),p}(),Kt=typeof self!="undefined"?self:we,Ue=typeof navigator!="undefined",A=Ue&&typeof HTMLImageElement=="undefined",M=!(typeof we=="undefined"||typeof process=="undefined"||!process.versions||!process.versions.node),Q=Kt.Buffer,ie=!!Q,xe=function(p){return p!==void 0};function Ot(p){return p===void 0||(p instanceof Ee?p.size===0:B(p).filter(xe).length===0)}function Y(p){var u=new Error(p);throw delete u.stack,u}function ct(p){var u=function(d){var a=0;return d.ifd0.enabled&&(a+=1024),d.exif.enabled&&(a+=2048),d.makerNote&&(a+=2048),d.userComment&&(a+=1024),d.gps.enabled&&(a+=512),d.interop.enabled&&(a+=100),d.ifd1.enabled&&(a+=1024),a+2048}(p);return p.jfif.enabled&&(u+=50),p.xmp.enabled&&(u+=2e4),p.iptc.enabled&&(u+=14e3),p.icc.enabled&&(u+=6e3),u}var Re=function(p){return String.fromCharCode.apply(null,p)},Or=typeof TextDecoder!="undefined"?new TextDecoder("utf-8"):void 0;function dn(p){return Or?Or.decode(p):ie?Buffer.from(p).toString("utf8"):decodeURIComponent(escape(Re(p)))}var dt=function(){function p(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;if(n(this,p),typeof l=="boolean"&&(this.le=l),Array.isArray(u)&&(u=new Uint8Array(u)),u===0)this.byteOffset=0,this.byteLength=0;else if(u instanceof ArrayBuffer){a===void 0&&(a=u.byteLength-d);var h=new DataView(u,d,a);this._swapDataView(h)}else if(u instanceof Uint8Array||u instanceof DataView||u instanceof p){a===void 0&&(a=u.byteLength-d),(d+=u.byteOffset)+a>u.byteOffset+u.byteLength&&Y("Creating view outside of available memory in ArrayBuffer");var m=new DataView(u.buffer,d,a);this._swapDataView(m)}else if(typeof u=="number"){var v=new DataView(new ArrayBuffer(u));this._swapDataView(v)}else Y("Invalid input argument for BufferView: "+u)}return i(p,[{key:"_swapArrayBuffer",value:function(u){this._swapDataView(new DataView(u))}},{key:"_swapBuffer",value:function(u){this._swapDataView(new DataView(u.buffer,u.byteOffset,u.byteLength))}},{key:"_swapDataView",value:function(u){this.dataView=u,this.buffer=u.buffer,this.byteOffset=u.byteOffset,this.byteLength=u.byteLength}},{key:"_lengthToEnd",value:function(u){return this.byteLength-u}},{key:"set",value:function(u,d){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;u instanceof DataView||u instanceof p?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):u instanceof ArrayBuffer&&(u=new Uint8Array(u)),u instanceof Uint8Array||Y("BufferView.set(): Invalid data argument.");var l=this.toUint8();return l.set(u,d),new a(this,d,u.byteLength)}},{key:"subarray",value:function(u,d){return new p(this,u,d=d||this._lengthToEnd(u))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(u,d){return new Uint8Array(this.buffer,this.byteOffset+u,d)}},{key:"getString",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.byteLength,a=this.getUint8Array(u,d);return dn(a)}},{key:"getLatin1String",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.byteLength,a=this.getUint8Array(u,d);return Re(a)}},{key:"getUnicodeString",value:function(){for(var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.byteLength,a=[],l=0;l<d&&u+l<this.byteLength;l+=2)a.push(this.getUint16(u+l));return Re(a)}},{key:"getInt8",value:function(u){return this.dataView.getInt8(u)}},{key:"getUint8",value:function(u){return this.dataView.getUint8(u)}},{key:"getInt16",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getInt16(u,d)}},{key:"getInt32",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getInt32(u,d)}},{key:"getUint16",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getUint16(u,d)}},{key:"getUint32",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getUint32(u,d)}},{key:"getFloat32",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getFloat32(u,d)}},{key:"getFloat64",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getFloat64(u,d)}},{key:"getFloat",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getFloat32(u,d)}},{key:"getDouble",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.le;return this.dataView.getFloat64(u,d)}},{key:"getUintBytes",value:function(u,d,a){switch(d){case 1:return this.getUint8(u,a);case 2:return this.getUint16(u,a);case 4:return this.getUint32(u,a);case 8:return this.getUint64&&this.getUint64(u,a)}}},{key:"getUint",value:function(u,d,a){switch(d){case 8:return this.getUint8(u,a);case 16:return this.getUint16(u,a);case 32:return this.getUint32(u,a);case 64:return this.getUint64&&this.getUint64(u,a)}}},{key:"toString",value:function(u){return this.dataView.toString(u,this.constructor.name)}},{key:"ensureChunk",value:function(){}}],[{key:"from",value:function(u,d){return u instanceof this&&u.le===d?u:new p(u,void 0,void 0,d)}}]),p}();function Xt(p,u){Y("".concat(p," '").concat(u,"' was not loaded, try using full build of exifr."))}var Yt=function(p){c(d,p);var u=$(d);function d(a){var l;return n(this,d),(l=u.call(this)).kind=a,l}return i(d,[{key:"get",value:function(a,l){return this.has(a)||Xt(this.kind,a),l&&(a in l||function(h,m){Y("Unknown ".concat(h," '").concat(m,"'."))}(this.kind,a),l[a].enabled||Xt(this.kind,a)),x(f(d.prototype),"get",this).call(this,a)}},{key:"keyList",value:function(){return T(this.keys())}}]),d}(_(Ee)),$e=new Yt("file parser"),ye=new Yt("segment parser"),Tt=new Yt("file reader");function Qt(p){return function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];try{return Promise.resolve(p.apply(this,u))}catch(a){return Promise.reject(a)}}}function hn(p,u,d){return d?u?u(p):p:(p&&p.then||(p=Promise.resolve(p)),u?p.then(u):p)}var Et=Qt(function(p){return new Promise(function(u,d){var a=new FileReader;a.onloadend=function(){return u(a.result||new ArrayBuffer)},a.onerror=d,a.readAsArrayBuffer(p)})}),Tr=Qt(function(p){return te(p).then(function(u){return u.arrayBuffer()})}),Qa=Qt(function(p,u){return hn(u(p),function(d){return new dt(d)})}),pn=Qt(function(p,u,d){var a=new(Tt.get(d))(p,u);return hn(a.read(),function(){return a})}),Ri=Qt(function(p,u,d,a){return Tt.has(d)?pn(p,u,d):a?Qa(p,a):(Y("Parser ".concat(d," is not loaded")),hn())}),$i="Invalid input argument";function Bi(p,u){return(d=p).startsWith("data:")||d.length>1e4?pn(p,u,"base64"):Ue?Ri(p,u,"url",Tr):M?pn(p,u,"fs"):void Y($i);var d}var Ja=function(p){c(d,p);var u=$(d);function d(){return n(this,d),u.apply(this,arguments)}return i(d,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=T(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=T(this.values())),this.allValues}}]),d}(_(Ee));function fn(p,u,d){var a=new Ja,l=d;Array.isArray(l)||(typeof l.entries=="function"&&(l=l.entries()),l=T(l));for(var h=0;h<l.length;h++){var m=l[h],v=m[0],P=m[1];a.set(v,P)}if(Array.isArray(u)){var F=u;Array.isArray(F)||(typeof F.entries=="function"&&(F=F.entries()),F=T(F));for(var O=0;O<F.length;O++){var C=F[O];p.set(C,a)}}else p.set(u,a);return a}function gn(p,u,d){var a,l=p.get(u),h=d;Array.isArray(h)||(typeof h.entries=="function"&&(h=h.entries()),h=T(h));for(var m=0;m<h.length;m++)a=h[m],l.set(a[0],a[1])}var Ut=he(),Er=he(),Ur=he(),Dr=37500,xr=37510,mn=33723,yn=34675,vn=34665,bn=34853,Dt=40965,ht=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Jt=["jfif","xmp","icc","iptc","ihdr"],xt=["tiff"].concat(Jt),ee=["ifd0","ifd1","exif","gps","interop"],pt=[].concat(xt,ee),ft=["makerNote","userComment"],Zt=["translateKeys","translateValues","reviveValues","multiSegment"],gt=[].concat(Zt,["sanitize","mergeOutput","silentErrors"]),Ni=function(){function p(){n(this,p)}return i(p,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),p}(),er=function(p){c(d,p);var u=$(d);function d(a,l,h,m){var v;if(n(this,d),o(S(v=u.call(this)),"enabled",!1),o(S(v),"skip",de()),o(S(v),"pick",de()),o(S(v),"deps",de()),o(S(v),"translateKeys",!1),o(S(v),"translateValues",!1),o(S(v),"reviveValues",!1),v.key=a,v.enabled=l,v.parse=v.enabled,v.applyInheritables(m),v.canBeFiltered=ee.includes(a),v.canBeFiltered&&(v.dict=Ut.get(a)),h!==void 0)if(Array.isArray(h))v.parse=v.enabled=!0,v.canBeFiltered&&h.length>0&&v.translateTagSet(h,v.pick);else if(typeof h=="object"){if(v.enabled=!0,v.parse=h.parse!==!1,v.canBeFiltered){var P=h.pick,F=h.skip;P&&P.length>0&&v.translateTagSet(P,v.pick),F&&F.length>0&&v.translateTagSet(F,v.skip)}v.applyInheritables(h)}else h===!0||h===!1?v.parse=v.enabled=h:Y("Invalid options argument: ".concat(h));return v}return i(d,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}},{key:"applyInheritables",value:function(a){var l,h,m=Zt;Array.isArray(m)||(typeof m.entries=="function"&&(m=m.entries()),m=T(m));for(var v=0;v<m.length;v++)(h=a[l=m[v]])!==void 0&&(this[l]=h)}},{key:"translateTagSet",value:function(a,l){if(this.dict){var h,m,v=this.dict,P=v.tagKeys,F=v.tagValues,O=a;Array.isArray(O)||(typeof O.entries=="function"&&(O=O.entries()),O=T(O));for(var C=0;C<O.length;C++)typeof(h=O[C])=="string"?((m=F.indexOf(h))===-1&&(m=P.indexOf(Number(h))),m!==-1&&l.add(Number(P[m]))):l.add(h)}else{var U=a;Array.isArray(U)||(typeof U.entries=="function"&&(U=U.entries()),U=T(U));for(var L=0;L<U.length;L++){var I=U[L];l.add(I)}}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Rr(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Rr(this.pick,this.deps)}}]),d}(Ni),pe={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ii=he(),Rt=function(p){c(d,p);var u=$(d);function d(a){var l;return n(this,d),l=u.call(this),a===!0?l.setupFromTrue():a===void 0?l.setupFromUndefined():Array.isArray(a)?l.setupFromArray(a):typeof a=="object"?l.setupFromObject(a):Y("Invalid options argument ".concat(a)),l.firstChunkSize===void 0&&(l.firstChunkSize=Ue?l.firstChunkSizeBrowser:l.firstChunkSizeNode),l.mergeOutput&&(l.ifd1.enabled=!1),l.filterNestedSegmentTags(),l.traverseTiffDependencyTree(),l.checkLoadedPlugins(),l}return i(d,[{key:"setupFromUndefined",value:function(){var a,l=ht;Array.isArray(l)||(typeof l.entries=="function"&&(l=l.entries()),l=T(l));for(var h=0;h<l.length;h++)this[a=l[h]]=pe[a];var m=gt;Array.isArray(m)||(typeof m.entries=="function"&&(m=m.entries()),m=T(m));for(var v=0;v<m.length;v++)this[a=m[v]]=pe[a];var P=ft;Array.isArray(P)||(typeof P.entries=="function"&&(P=P.entries()),P=T(P));for(var F=0;F<P.length;F++)this[a=P[F]]=pe[a];var O=pt;Array.isArray(O)||(typeof O.entries=="function"&&(O=O.entries()),O=T(O));for(var C=0;C<O.length;C++)this[a=O[C]]=new er(a,pe[a],void 0,this)}},{key:"setupFromTrue",value:function(){var a,l=ht;Array.isArray(l)||(typeof l.entries=="function"&&(l=l.entries()),l=T(l));for(var h=0;h<l.length;h++)this[a=l[h]]=pe[a];var m=gt;Array.isArray(m)||(typeof m.entries=="function"&&(m=m.entries()),m=T(m));for(var v=0;v<m.length;v++)this[a=m[v]]=pe[a];var P=ft;Array.isArray(P)||(typeof P.entries=="function"&&(P=P.entries()),P=T(P));for(var F=0;F<P.length;F++)this[a=P[F]]=!0;var O=pt;Array.isArray(O)||(typeof O.entries=="function"&&(O=O.entries()),O=T(O));for(var C=0;C<O.length;C++)this[a=O[C]]=new er(a,!0,void 0,this)}},{key:"setupFromArray",value:function(a){var l,h=ht;Array.isArray(h)||(typeof h.entries=="function"&&(h=h.entries()),h=T(h));for(var m=0;m<h.length;m++)this[l=h[m]]=pe[l];var v=gt;Array.isArray(v)||(typeof v.entries=="function"&&(v=v.entries()),v=T(v));for(var P=0;P<v.length;P++)this[l=v[P]]=pe[l];var F=ft;Array.isArray(F)||(typeof F.entries=="function"&&(F=F.entries()),F=T(F));for(var O=0;O<F.length;O++)this[l=F[O]]=pe[l];var C=pt;Array.isArray(C)||(typeof C.entries=="function"&&(C=C.entries()),C=T(C));for(var U=0;U<C.length;U++)this[l=C[U]]=new er(l,!1,void 0,this);this.setupGlobalFilters(a,void 0,ee)}},{key:"setupFromObject",value:function(a){var l;ee.ifd0=ee.ifd0||ee.image,ee.ifd1=ee.ifd1||ee.thumbnail,z(this,a);var h=ht;Array.isArray(h)||(typeof h.entries=="function"&&(h=h.entries()),h=T(h));for(var m=0;m<h.length;m++)this[l=h[m]]=wn(a[l],pe[l]);var v=gt;Array.isArray(v)||(typeof v.entries=="function"&&(v=v.entries()),v=T(v));for(var P=0;P<v.length;P++)this[l=v[P]]=wn(a[l],pe[l]);var F=ft;Array.isArray(F)||(typeof F.entries=="function"&&(F=F.entries()),F=T(F));for(var O=0;O<F.length;O++)this[l=F[O]]=wn(a[l],pe[l]);var C=xt;Array.isArray(C)||(typeof C.entries=="function"&&(C=C.entries()),C=T(C));for(var U=0;U<C.length;U++)this[l=C[U]]=new er(l,pe[l],a[l],this);var L=ee;Array.isArray(L)||(typeof L.entries=="function"&&(L=L.entries()),L=T(L));for(var I=0;I<L.length;I++)this[l=L[I]]=new er(l,pe[l],a[l],this.tiff);this.setupGlobalFilters(a.pick,a.skip,ee,pt),a.tiff===!0?this.batchEnableWithBool(ee,!0):a.tiff===!1?this.batchEnableWithUserValue(ee,a):Array.isArray(a.tiff)?this.setupGlobalFilters(a.tiff,void 0,ee):typeof a.tiff=="object"&&this.setupGlobalFilters(a.tiff.pick,a.tiff.skip,ee)}},{key:"batchEnableWithBool",value:function(a,l){var h=a;Array.isArray(h)||(typeof h.entries=="function"&&(h=h.entries()),h=T(h));for(var m=0;m<h.length;m++)this[h[m]].enabled=l}},{key:"batchEnableWithUserValue",value:function(a,l){var h=a;Array.isArray(h)||(typeof h.entries=="function"&&(h=h.entries()),h=T(h));for(var m=0;m<h.length;m++){var v=h[m],P=l[v];this[v].enabled=P!==!1&&P!==void 0}}},{key:"setupGlobalFilters",value:function(a,l,h){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:h;if(a&&a.length){var v=m;Array.isArray(v)||(typeof v.entries=="function"&&(v=v.entries()),v=T(v));for(var P=0;P<v.length;P++){var F=v[P];this[F].enabled=!1}var O=Li(a,h),C=O;Array.isArray(C)||(typeof C.entries=="function"&&(C=C.entries()),C=T(C));for(var U=0;U<C.length;U++){var L=C[U],I=L[0],ke=L[1];Rr(this[I].pick,ke),this[I].enabled=!0}}else if(l&&l.length){var Fl=Li(l,h),rt=Fl;Array.isArray(rt)||(typeof rt.entries=="function"&&(rt=rt.entries()),rt=T(rt));for(var An=0;An<rt.length;An++){var ts=rt[An],Cl=ts[0],kl=ts[1];Rr(this[Cl].skip,kl)}}}},{key:"filterNestedSegmentTags",value:function(){var a=this.ifd0,l=this.exif,h=this.xmp,m=this.iptc,v=this.icc;this.makerNote?l.deps.add(Dr):l.skip.add(Dr),this.userComment?l.deps.add(xr):l.skip.add(xr),h.enabled||a.skip.add(700),m.enabled||a.skip.add(mn),v.enabled||a.skip.add(yn)}},{key:"traverseTiffDependencyTree",value:function(){var a=this,l=this.ifd0,h=this.exif,m=this.gps;this.interop.needed&&(h.deps.add(Dt),l.deps.add(Dt)),h.needed&&l.deps.add(vn),m.needed&&l.deps.add(bn),this.tiff.enabled=ee.some(function(F){return a[F].enabled===!0})||this.makerNote||this.userComment;var v=ee;Array.isArray(v)||(typeof v.entries=="function"&&(v=v.entries()),v=T(v));for(var P=0;P<v.length;P++)this[v[P]].finalizeFilters()}},{key:"onlyTiff",get:function(){var a=this;return!Jt.map(function(l){return a[l].enabled}).some(function(l){return l===!0})&&this.tiff.enabled}},{key:"checkLoadedPlugins",value:function(){var a=xt;Array.isArray(a)||(typeof a.entries=="function"&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++){var h=a[l];this[h].enabled&&!ye.has(h)&&Xt("segment parser",h)}}}],[{key:"useCached",value:function(a){var l=Ii.get(a);return l!==void 0||(l=new this(a),Ii.set(a,l)),l}}]),d}(Ni);function Li(p,u){var d,a,l,h=[],m=u;Array.isArray(m)||(typeof m.entries=="function"&&(m=m.entries()),m=T(m));for(var v=0;v<m.length;v++){a=m[v],d=[];var P=Ut.get(a);Array.isArray(P)||(typeof P.entries=="function"&&(P=P.entries()),P=T(P));for(var F=0;F<P.length;F++)l=P[F],(p.includes(l[0])||p.includes(l[1]))&&d.push(l[0]);d.length&&h.push([a,d])}return h}function wn(p,u){return p!==void 0?p:u!==void 0?u:void 0}function Rr(p,u){var d=u;Array.isArray(d)||(typeof d.entries=="function"&&(d=d.entries()),d=T(d));for(var a=0;a<d.length;a++){var l=d[a];p.add(l)}}function mt(p,u,d){return d?u?u(p):p:(p&&p.then||(p=Promise.resolve(p)),u?p.then(u):p)}function Mi(){}function ji(p,u){if(!u)return p&&p.then?p.then(Mi):Promise.resolve()}function zi(p,u){var d=p();return d&&d.then?d.then(u):u(d)}o(Rt,"default",pe);var yt=function(){function p(u){n(this,p),o(this,"parsers",{}),this.options=Rt.useCached(u)}return i(p,[{key:"setup",value:function(){if(!this.fileParser){var u=this.file,d=u.getUint16(0),a=$e;Array.isArray(a)||(typeof a.entries=="function"&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++){var h=a[l],m=h[0],v=h[1];if(v.canHandle(u,d))return this.fileParser=new v(this.options,this.file,this.parsers),u[m]=!0}Y("Unknown file format")}}},{key:"read",value:function(u){try{var d=this;return mt(function(a,l){return typeof a=="string"?Bi(a,l):Ue&&!A&&a instanceof HTMLImageElement?Bi(a.src,l):a instanceof Uint8Array||a instanceof ArrayBuffer||a instanceof DataView?new dt(a):Ue&&a instanceof Blob?Ri(a,l,"blob",Et):void Y($i)}(u,d.options),function(a){d.file=a})}catch(a){return Promise.reject(a)}}},{key:"parse",value:function(){try{var u=this;u.setup();var d={},a=[];return zi(function(){return u.options.silentErrors?mt(u.doParse(d,a).catch(function(l){return a.push(l)}),function(){a.push.apply(a,u.fileParser.errors)}):ji(u.doParse(d,a))},function(){return u.file.close&&u.file.close(),u.options.silentErrors&&a.length>0&&(d.errors=a),Ot(l=d)?void 0:l;var l})}catch(l){return Promise.reject(l)}}},{key:"doParse",value:function(u,d){try{var a=this;return mt(a.fileParser.parse(),function(){var l,h=B(a.parsers).map((l=function(v){return mt(v.parse(),function(P){v.assignToOutput(u,P)})},function(){for(var v=[],P=0;P<arguments.length;P++)v[P]=arguments[P];try{return Promise.resolve(l.apply(this,v))}catch(F){return Promise.reject(F)}}));if(a.options.silentErrors){var m=function(v){return d.push(v)};h=h.map(function(v){return v.catch(m)})}return ji(Promise.all(h))})}catch(l){return Promise.reject(l)}}},{key:"extractThumbnail",value:function(){try{var u=this;u.setup();var d,a=u.options,l=u.file,h=ye.get("tiff",a);return zi(function(){if(!l.tiff)return function(m){var v=m();if(v&&v.then)return v.then(Mi)}(function(){if(l.jpeg)return mt(u.fileParser.getOrFindSegment("tiff"),function(m){d=m})});d={start:0,type:"tiff"}},function(){if(d!==void 0)return mt(u.fileParser.ensureSegmentChunk(d),function(m){return mt((u.parsers.tiff=new h(m,a,l)).extractThumbnail(),function(v){return l.close&&l.close(),v})})})}catch(m){return Promise.reject(m)}}}]),p}(),qi,Pn=(qi=function(p,u){var d,a,l,h=new yt(u);return d=h.read(p),a=function(){return h.parse()},l?a?a(d):d:(d&&d.then||(d=Promise.resolve(d)),a?d.then(a):d)},function(){for(var p=[],u=0;u<arguments.length;u++)p[u]=arguments[u];try{return Promise.resolve(qi.apply(this,p))}catch(d){return Promise.reject(d)}}),Za=Object.freeze({__proto__:null,parse:Pn,Exifr:yt,fileParsers:$e,segmentParsers:ye,fileReaders:Tt,tagKeys:Ut,tagValues:Er,tagRevivers:Ur,createDictionary:fn,extendDictionary:gn,fetchUrlAsArrayBuffer:Tr,readBlobAsArrayBuffer:Et,chunkedProps:ht,otherSegments:Jt,segments:xt,tiffBlocks:ee,segmentsAndBlocks:pt,tiffExtractables:ft,inheritables:Zt,allFormatters:gt,Options:Rt});function _n(){}var el=function(){function p(u,d,a){var l=this;n(this,p),o(this,"errors",[]),o(this,"ensureSegmentChunk",function(h){return function(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];try{return Promise.resolve(h.apply(this,m))}catch(P){return Promise.reject(P)}}}(function(h){var m,v,P,F=h.start,O=h.size||65536;return m=function(){if(l.file.chunked)return function(C){var U=C();if(U&&U.then)return U.then(_n)}(function(){if(!l.file.available(F,O))return function(C){if(C&&C.then)return C.then(_n)}(function(C,U){try{var L=C()}catch(I){return U(I)}return L&&L.then?L.then(void 0,U):L}(function(){return C=l.file.readChunk(F,O),U=function(I){h.chunk=I},L?U?U(C):C:(C&&C.then||(C=Promise.resolve(C)),U?C.then(U):C);var C,U,L},function(C){Y("Couldn't read segment: ".concat(JSON.stringify(h),". ").concat(C.message))}));h.chunk=l.file.subarray(F,O)});l.file.byteLength>F+O?h.chunk=l.file.subarray(F,O):h.size===void 0?h.chunk=l.file.subarray(F):Y("Segment unreachable: "+JSON.stringify(h))},v=function(){return h.chunk},(P=m())&&P.then?P.then(v):v(P)})),this.extendOptions&&this.extendOptions(u),this.options=u,this.file=d,this.parsers=a}return i(p,[{key:"injectSegment",value:function(u,d){this.options[u].enabled&&this.createParser(u,d)}},{key:"createParser",value:function(u,d){var a=new(ye.get(u))(d,this.options,this.file);return this.parsers[u]=a}},{key:"createParsers",value:function(u){var d=u;Array.isArray(d)||(typeof d.entries=="function"&&(d=d.entries()),d=T(d));for(var a=0;a<d.length;a++){var l=d[a],h=l.type,m=l.chunk,v=this.options[h];if(v&&v.enabled){var P=this.parsers[h];P&&P.append||P||this.createParser(h,m)}}}},{key:"readSegments",value:function(u){try{var d=u.map(this.ensureSegmentChunk);return function(a,l){if(!l)return a&&a.then?a.then(_n):Promise.resolve()}(Promise.all(d))}catch(a){return Promise.reject(a)}}}]),p}(),$t=function(){function p(u){var d=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;n(this,p),o(this,"errors",[]),o(this,"raw",he()),o(this,"handleError",function(h){if(!d.options.silentErrors)throw h;d.errors.push(h.message)}),this.chunk=this.normalizeInput(u),this.file=l,this.type=this.constructor.type,this.globalOptions=this.options=a,this.localOptions=a[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return i(p,[{key:"normalizeInput",value:function(u){return u instanceof dt?u:new dt(u)}},{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"output",get:function(){return this.translated?this.translated:this.raw?K(this.raw):void 0}},{key:"translateBlock",value:function(u,d){var a=Ur.get(d),l=Er.get(d),h=Ut.get(d),m=this.options[d],v=m.reviveValues&&!!a,P=m.translateValues&&!!l,F=m.translateKeys&&!!h,O={},C=u;Array.isArray(C)||(typeof C.entries=="function"&&(C=C.entries()),C=T(C));for(var U=0;U<C.length;U++){var L=C[U],I=L[0],ke=L[1];v&&a.has(I)?ke=a.get(I)(ke):P&&l.has(I)&&(ke=this.translateValue(ke,l.get(I))),F&&h.has(I)&&(I=h.get(I)||I),O[I]=ke}return O}},{key:"translateValue",value:function(u,d){return d[u]||d.DEFAULT||u}},{key:"assignToOutput",value:function(u,d){this.assignObjectToOutput(u,this.constructor.type,d)}},{key:"assignObjectToOutput",value:function(u,d,a){if(this.globalOptions.mergeOutput)return z(u,a);u[d]?z(u[d],a):u[d]=a}}],[{key:"findPosition",value:function(u,d){var a=u.getUint16(d+2)+2,l=typeof this.headerLength=="function"?this.headerLength(u,d,a):this.headerLength,h=d+l,m=a-l;return{offset:d,length:a,headerLength:l,start:h,size:m,end:h+m}}},{key:"parse",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=new Rt(o({},this.type,d)),l=new this(u,a);return l.parse()}}]),p}();function tr(p,u,d){return d?u?u(p):p:(p&&p.then||(p=Promise.resolve(p)),u?p.then(u):p)}o($t,"headerLength",4),o($t,"type",void 0),o($t,"multiSegment",!1),o($t,"canHandle",function(){return!1});function Hi(){}function tl(p,u){if(!u)return p&&p.then?p.then(Hi):Promise.resolve()}function rl(p){var u=p();if(u&&u.then)return u.then(Hi)}function Sn(p,u){var d=p();return d&&d.then?d.then(u):u(d)}function be(p,u,d){if(!p.s){if(d instanceof Fn){if(!d.s)return void(d.o=be.bind(null,p,u));1&u&&(u=d.s),d=d.v}if(d&&d.then)return void d.then(be.bind(null,p,u),be.bind(null,p,2));p.s=u,p.v=d;var a=p.o;a&&a(p)}}var Fn=function(){function p(){}return p.prototype.then=function(u,d){var a=new p,l=this.s;if(l){var h=1&l?u:d;if(h){try{be(a,1,h(this.v))}catch(m){be(a,2,m)}return a}return this}return this.o=function(m){try{var v=m.v;1&m.s?be(a,1,u?u(v):v):d?be(a,1,d(v)):be(a,2,v)}catch(P){be(a,2,P)}},a},p}();function Bt(p){return p instanceof Fn&&1&p.s}function nl(p,u,d){for(var a;;){var l=p();if(Bt(l)&&(l=l.v),!l)return h;if(l.then){a=0;break}var h=d();if(h&&h.then){if(!Bt(h)){a=1;break}h=h.s}if(u){var m=u();if(m&&m.then&&!Bt(m)){a=2;break}}}var v=new Fn,P=be.bind(null,v,2);return(a===0?l.then(O):a===1?h.then(F):m.then(C)).then(void 0,P),v;function F(U){h=U;do{if(u&&(m=u())&&m.then&&!Bt(m))return void m.then(C).then(void 0,P);if(!(l=p())||Bt(l)&&!l.v)return void be(v,1,h);if(l.then)return void l.then(O).then(void 0,P);Bt(h=d())&&(h=h.v)}while(!h||!h.then);h.then(F).then(void 0,P)}function O(U){U?(h=d())&&h.then?h.then(F).then(void 0,P):F(h):be(v,1,h)}function C(){(l=p())?l.then?l.then(O).then(void 0,P):O(l):be(v,1,h)}}function il(p){return p===192||p===194||p===196||p===219||p===221||p===218||p===254}function sl(p){return p>=224&&p<=239}function ol(p,u,d){var a=ye;Array.isArray(a)||(typeof a.entries=="function"&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++){var h=a[l],m=h[0];if(h[1].canHandle(p,u,d))return m}}var Wi=function(p){c(d,p);var u=$(d);function d(){var a;n(this,d);for(var l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];return o(S(a=u.call.apply(u,[this].concat(h))),"appSegments",[]),o(S(a),"jpegSegments",[]),o(S(a),"unknownSegments",[]),a}return i(d,[{key:"parse",value:function(){try{var a=this;return tr(a.findAppSegments(),function(){return tr(a.readSegments(a.appSegments),function(){a.mergeMultiSegments(),a.createParsers(a.mergedAppSegments||a.appSegments)})})}catch(l){return Promise.reject(l)}}},{key:"setupSegmentFinderArgs",value:function(a){var l=this;a===!0?(this.findAll=!0,this.wanted=de(ye.keyList())):(a=a===void 0?ye.keyList().filter(function(h){return l.options[h].enabled}):a.filter(function(h){return l.options[h].enabled&&ye.has(h)}),this.findAll=!1,this.remaining=de(a),this.wanted=de(a)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0;try{var h=this;h.setupSegmentFinderArgs(l);var m=h.file,v=h.findAll,P=h.wanted,F=h.remaining;return Sn(function(){if(!v&&h.file.chunked)return v=T(P).some(function(O){var C=ye.get(O),U=h.options[O];return C.multiSegment&&U.multiSegment}),rl(function(){if(v)return tl(h.file.readWhole())})},function(){var O=!1;if(a=h.findAppSegmentsInRange(a,m.byteLength),!h.options.onlyTiff)return function(){if(m.chunked){var C=!1;return nl(function(){return!O&&F.size>0&&!C&&(!!m.canReadNextChunk||!!h.unfinishedMultiSegment)},void 0,function(){var U=m.nextChunkOffset,L=h.appSegments.some(function(I){return!h.file.available(I.offset||I.start,I.length||I.size)});return Sn(function(){return a>U&&!L?tr(m.readNextChunk(a),function(I){C=!I}):tr(m.readNextChunk(U),function(I){C=!I})},function(){(a=h.findAppSegmentsInRange(a,m.byteLength))===void 0&&(O=!0)})})}}()})}catch(O){return Promise.reject(O)}}},{key:"findAppSegmentsInRange",value:function(a,l){l-=2;for(var h,m,v,P,F,O,C=this.file,U=this.findAll,L=this.wanted,I=this.remaining,ke=this.options;a<l;a++)if(C.getUint8(a)===255){if(sl(h=C.getUint8(a+1))){if(m=C.getUint16(a+2),(v=ol(C,a,m))&&L.has(v)&&(F=(P=ye.get(v)).findPosition(C,a),O=ke[v],F.type=v,this.appSegments.push(F),!U&&(P.multiSegment&&O.multiSegment?(this.unfinishedMultiSegment=F.chunkNumber<F.chunkCount,this.unfinishedMultiSegment||I.delete(v)):I.delete(v),I.size===0)))break;ke.recordUnknownSegments&&((F=$t.findPosition(C,a)).marker=h,this.unknownSegments.push(F)),a+=m+1}else if(il(h)){if(m=C.getUint16(a+2),h===218&&ke.stopAfterSos!==!1)return;ke.recordJpegSegments&&this.jpegSegments.push({offset:a,length:m,marker:h}),a+=m+1}}return a}},{key:"mergeMultiSegments",value:function(){var a=this;if(this.appSegments.some(function(h){return h.multiSegment})){var l=function(h,m){for(var v,P,F,O=he(),C=0;C<h.length;C++)P=(v=h[C])[m],O.has(P)?F=O.get(P):O.set(P,F=[]),F.push(v);return T(O)}(this.appSegments,"type");this.mergedAppSegments=l.map(function(h){var m=h[0],v=h[1],P=ye.get(m,a.options);return P.handleMultiSegments?{type:m,chunk:P.handleMultiSegments(v)}:v[0]})}}},{key:"getSegment",value:function(a){return this.appSegments.find(function(l){return l.type===a})}},{key:"getOrFindSegment",value:function(a){try{var l=this,h=l.getSegment(a);return Sn(function(){if(h===void 0)return tr(l.findAppSegments(0,[a]),function(){h=l.getSegment(a)})},function(){return h})}catch(m){return Promise.reject(m)}}}],[{key:"canHandle",value:function(a,l){return l===65496}}]),d}(el);function al(){}o(Wi,"type","jpeg"),$e.set("jpeg",Wi);function Fe(p,u){if(!u)return p&&p.then?p.then(al):Promise.resolve()}function Ce(p,u){var d=p();return d&&d.then?d.then(u):u(d)}var ll=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],Cn=function(p){c(d,p);var u=$(d);function d(){return n(this,d),u.apply(this,arguments)}return i(d,[{key:"parse",value:function(){try{var a=this;a.parseHeader();var l=a.options;return Ce(function(){if(l.ifd0.enabled)return Fe(a.parseIfd0Block())},function(){return Ce(function(){if(l.exif.enabled)return Fe(a.safeParse("parseExifBlock"))},function(){return Ce(function(){if(l.gps.enabled)return Fe(a.safeParse("parseGpsBlock"))},function(){return Ce(function(){if(l.interop.enabled)return Fe(a.safeParse("parseInteropBlock"))},function(){return Ce(function(){if(l.ifd1.enabled)return Fe(a.safeParse("parseThumbnailBlock"))},function(){return a.createOutput()})})})})})}catch(h){return Promise.reject(h)}}},{key:"safeParse",value:function(a){var l=this[a]();return l.catch!==void 0&&(l=l.catch(this.handleError)),l}},{key:"findIfd0Offset",value:function(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(this.ifd1Offset===void 0){this.findIfd0Offset();var a=this.chunk.getUint16(this.ifd0Offset),l=this.ifd0Offset+2+12*a;this.ifd1Offset=this.chunk.getUint32(l)}}},{key:"parseBlock",value:function(a,l){var h=he();return this[l]=h,this.parseTags(a,l,h),h}},{key:"parseIfd0Block",value:function(){try{var a=this;if(a.ifd0)return;var l=a.file;return a.findIfd0Offset(),a.ifd0Offset<8&&Y("Malformed EXIF data"),!l.chunked&&a.ifd0Offset>l.byteLength&&Y(`IFD0 offset points to outside of file.
this.ifd0Offset: `.concat(a.ifd0Offset,", file.byteLength: ").concat(l.byteLength)),Ce(function(){if(l.tiff)return Fe(l.ensureChunk(a.ifd0Offset,ct(a.options)))},function(){var h=a.parseBlock(a.ifd0Offset,"ifd0");if(h.size!==0)return a.exifOffset=h.get(vn),a.interopOffset=h.get(Dt),a.gpsOffset=h.get(bn),a.xmp=h.get(700),a.iptc=h.get(mn),a.icc=h.get(yn),a.options.sanitize&&(h.delete(vn),h.delete(Dt),h.delete(bn),h.delete(700),h.delete(mn),h.delete(yn)),h})}catch(h){return Promise.reject(h)}}},{key:"parseExifBlock",value:function(){try{var a=this;return a.exif?void 0:Ce(function(){if(!a.ifd0)return Fe(a.parseIfd0Block())},function(){if(a.exifOffset!==void 0)return Ce(function(){if(a.file.tiff)return Fe(a.file.ensureChunk(a.exifOffset,ct(a.options)))},function(){var l=a.parseBlock(a.exifOffset,"exif");return a.interopOffset||(a.interopOffset=l.get(Dt)),a.makerNote=l.get(Dr),a.userComment=l.get(xr),a.options.sanitize&&(l.delete(Dt),l.delete(Dr),l.delete(xr)),a.unpack(l,41728),a.unpack(l,41729),l})})}catch(l){return Promise.reject(l)}}},{key:"unpack",value:function(a,l){var h=a.get(l);h&&h.length===1&&a.set(l,h[0])}},{key:"parseGpsBlock",value:function(){try{var a=this;return a.gps?void 0:Ce(function(){if(!a.ifd0)return Fe(a.parseIfd0Block())},function(){if(a.gpsOffset!==void 0){var l=a.parseBlock(a.gpsOffset,"gps");return l&&l.has(2)&&l.has(4)&&(l.set("latitude",Vi.apply(void 0,l.get(2).concat([l.get(1)]))),l.set("longitude",Vi.apply(void 0,l.get(4).concat([l.get(3)])))),l}})}catch(l){return Promise.reject(l)}}},{key:"parseInteropBlock",value:function(){try{var a=this;return a.interop?void 0:Ce(function(){if(!a.ifd0)return Fe(a.parseIfd0Block())},function(){return Ce(function(){if(a.interopOffset===void 0&&!a.exif)return Fe(a.parseExifBlock())},function(){if(a.interopOffset!==void 0)return a.parseBlock(a.interopOffset,"interop")})})}catch(l){return Promise.reject(l)}}},{key:"parseThumbnailBlock",value:function(){var a=arguments.length>0&&arguments[0]!==void 0&&arguments[0];try{var l=this;return l.ifd1||l.ifd1Parsed||l.options.mergeOutput&&!a?void 0:(l.findIfd1Offset(),l.ifd1Offset>0&&(l.parseBlock(l.ifd1Offset,"ifd1"),l.ifd1Parsed=!0),l.ifd1)}catch(h){return Promise.reject(h)}}},{key:"extractThumbnail",value:function(){try{var a=this;return a.headerParsed||a.parseHeader(),Ce(function(){if(!a.ifd1Parsed)return Fe(a.parseThumbnailBlock(!0))},function(){if(a.ifd1!==void 0){var l=a.ifd1.get(513),h=a.ifd1.get(514);return a.chunk.getUint8Array(l,h)}})}catch(l){return Promise.reject(l)}}},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}},{key:"createOutput",value:function(){var a,l,h,m={},v=ee;Array.isArray(v)||(typeof v.entries=="function"&&(v=v.entries()),v=T(v));for(var P=0;P<v.length;P++)if(!Ot(a=this[l=v[P]]))if(h=this.canTranslate?this.translateBlock(a,l):K(a),this.options.mergeOutput){if(l==="ifd1")continue;z(m,h)}else m[l]=h;return this.makerNote&&(m.makerNote=this.makerNote),this.userComment&&(m.userComment=this.userComment),m}},{key:"assignToOutput",value:function(a,l){if(this.globalOptions.mergeOutput)z(a,l);else{var h=H(l);Array.isArray(h)||(typeof h.entries=="function"&&(h=h.entries()),h=T(h));for(var m=0;m<h.length;m++){var v=h[m],P=v[0],F=v[1];this.assignObjectToOutput(a,P,F)}}}}],[{key:"canHandle",value:function(a,l){return a.getUint8(l+1)===225&&a.getUint32(l+4)===1165519206&&a.getUint16(l+8)===0}}]),d}(function(p){c(d,p);var u=$(d);function d(){return n(this,d),u.apply(this,arguments)}return i(d,[{key:"parseHeader",value:function(){var a=this.chunk.getUint16();a===18761?this.le=!0:a===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}},{key:"parseTags",value:function(a,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:he(),m=this.options[l],v=m.pick,P=m.skip,F=(v=de(v)).size>0,O=P.size===0,C=this.chunk.getUint16(a);a+=2;for(var U=0;U<C;U++){var L=this.chunk.getUint16(a);if(F){if(v.has(L)&&(h.set(L,this.parseTag(a,L,l)),v.delete(L),v.size===0))break}else!O&&P.has(L)||h.set(L,this.parseTag(a,L,l));a+=12}return h}},{key:"parseTag",value:function(a,l,h){var m,v=this.chunk,P=v.getUint16(a+2),F=v.getUint32(a+4),O=ll[P];if(O*F<=4?a+=8:a=v.getUint32(a+8),(P<1||P>13)&&Y("Invalid TIFF value type. block: ".concat(h.toUpperCase(),", tag: ").concat(l.toString(16),", type: ").concat(P,", offset ").concat(a)),a>v.byteLength&&Y("Invalid TIFF value offset. block: ".concat(h.toUpperCase(),", tag: ").concat(l.toString(16),", type: ").concat(P,", offset ").concat(a," is outside of chunk size ").concat(v.byteLength)),P===1)return v.getUint8Array(a,F);if(P===2)return(m=function(I){for(;I.endsWith("\0");)I=I.slice(0,-1);return I}(m=v.getString(a,F)).trim())===""?void 0:m;if(P===7)return v.getUint8Array(a,F);if(F===1)return this.parseTagValue(P,a);for(var C=new(function(I){switch(I){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(P))(F),U=O,L=0;L<F;L++)C[L]=this.parseTagValue(P,a),a+=U;return C}},{key:"parseTagValue",value:function(a,l){var h=this.chunk;switch(a){case 1:return h.getUint8(l);case 3:return h.getUint16(l);case 4:return h.getUint32(l);case 5:return h.getUint32(l)/h.getUint32(l+4);case 6:return h.getInt8(l);case 8:return h.getInt16(l);case 9:return h.getInt32(l);case 10:return h.getInt32(l)/h.getInt32(l+4);case 11:return h.getFloat(l);case 12:return h.getDouble(l);case 13:return h.getUint32(l);default:Y("Invalid tiff type ".concat(a))}}}]),d}($t));function Vi(p,u,d,a){var l=p+u/60+d/3600;return a!=="S"&&a!=="W"||(l*=-1),l}o(Cn,"type","tiff"),o(Cn,"headerLength",10),ye.set("tiff",Cn);var ul=Object.freeze({__proto__:null,default:Za,Exifr:yt,fileParsers:$e,segmentParsers:ye,fileReaders:Tt,tagKeys:Ut,tagValues:Er,tagRevivers:Ur,createDictionary:fn,extendDictionary:gn,fetchUrlAsArrayBuffer:Tr,readBlobAsArrayBuffer:Et,chunkedProps:ht,otherSegments:Jt,segments:xt,tiffBlocks:ee,segmentsAndBlocks:pt,tiffExtractables:ft,inheritables:Zt,allFormatters:gt,Options:Rt,parse:Pn});function tt(p,u,d){return d?u?u(p):p:(p&&p.then||(p=Promise.resolve(p)),u?p.then(u):p)}function $r(p){return function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];try{return Promise.resolve(p.apply(this,u))}catch(a){return Promise.reject(a)}}}var Gi=$r(function(p){var u=new yt(Xi);return tt(u.read(p),function(){return tt(u.parse(),function(d){if(d&&d.ifd0)return d.ifd0[274]})})}),cl=$r(function(p){var u=new yt(Ki);return tt(u.read(p),function(){return tt(u.parse(),function(d){if(d&&d.gps){var a=d.gps;return{latitude:a.latitude,longitude:a.longitude}}})})}),dl=$r(function(p){return tt(this.thumbnail(p),function(u){if(u!==void 0){var d=new Blob([u]);return URL.createObjectURL(d)}})}),hl=$r(function(p){var u=new yt(Yi);return tt(u.read(p),function(){return tt(u.extractThumbnail(),function(d){return d&&ie?Q.from(d):d})})}),Br={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Ki=z({},Br,{firstChunkSize:4e4,gps:[1,2,3,4]}),Xi=z({},Br,{firstChunkSize:4e4,ifd0:[274]}),Yi=z({},Br,{tiff:!1,ifd1:!0,mergeOutput:!1}),Qi=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});if(t.rotateCanvas=!0,t.rotateCss=!0,typeof navigator=="object"){var Ve=navigator.userAgent;if(Ve.includes("iPad")||Ve.includes("iPhone")){var kn=Ve.match(/OS (\d+)_(\d+)/);if(kn){var pl=kn[1],fl=kn[2],gl=Number(pl)+.1*Number(fl);t.rotateCanvas=gl<13.4,t.rotateCss=!1}}else if(Ve.includes("OS X 10")){var ml=Ve.match(/OS X 10[_.](\d+)/)[1];t.rotateCanvas=t.rotateCss=Number(ml)<15}if(Ve.includes("Chrome/")){var yl=Ve.match(/Chrome\/(\d+)/)[1];t.rotateCanvas=t.rotateCss=Number(yl)<81}else if(Ve.includes("Firefox/")){var vl=Ve.match(/Firefox\/(\d+)/)[1];t.rotateCanvas=t.rotateCss=Number(vl)<77}}function bl(){}var wl=function(p){c(d,p);var u=$(d);function d(){var a;n(this,d);for(var l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];return o(S(a=u.call.apply(u,[this].concat(h))),"ranges",new Pl),a.byteLength!==0&&a.ranges.add(0,a.byteLength),a}return i(d,[{key:"_tryExtend",value:function(a,l,h){if(a===0&&this.byteLength===0&&h){var m=new DataView(h.buffer||h,h.byteOffset,h.byteLength);this._swapDataView(m)}else{var v=a+l;if(v>this.byteLength){var P=this._extend(v).dataView;this._swapDataView(P)}}}},{key:"_extend",value:function(a){var l;l=ie?Q.allocUnsafe(a):new Uint8Array(a);var h=new DataView(l.buffer,l.byteOffset,l.byteLength);return l.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:l,dataView:h}}},{key:"subarray",value:function(a,l){var h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l=l||this._lengthToEnd(a),h&&this._tryExtend(a,l),this.ranges.add(a,l),x(f(d.prototype),"subarray",this).call(this,a,l)}},{key:"set",value:function(a,l){var h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];h&&this._tryExtend(l,a.byteLength,a);var m=x(f(d.prototype),"set",this).call(this,a,l);return this.ranges.add(l,m.byteLength),m}},{key:"ensureChunk",value:function(a,l){try{var h=this;return!h.chunked||h.ranges.available(a,l)?void 0:function(m,v){if(!v)return m&&m.then?m.then(bl):Promise.resolve()}(h.readChunk(a,l))}catch(m){return Promise.reject(m)}}},{key:"available",value:function(a,l){return this.ranges.available(a,l)}}]),d}(dt),Pl=function(){function p(){n(this,p),o(this,"list",[])}return i(p,[{key:"length",get:function(){return this.list.length}},{key:"add",value:function(u,d){var a=u+d,l=this.list.filter(function(m){return Ji(u,m.offset,a)||Ji(u,m.end,a)});if(l.length>0){u=Math.min.apply(Math,[u].concat(l.map(function(m){return m.offset}))),d=(a=Math.max.apply(Math,[a].concat(l.map(function(m){return m.end}))))-u;var h=l.shift();h.offset=u,h.length=d,h.end=a,this.list=this.list.filter(function(m){return!l.includes(m)})}else this.list.push({offset:u,length:d,end:a})}},{key:"available",value:function(u,d){var a=u+d;return this.list.some(function(l){return l.offset<=u&&a<=l.end})}}]),p}();function Ji(p,u,d){return p<=u&&u<=d}function _l(){}function Zi(p,u){if(!u)return p&&p.then?p.then(_l):Promise.resolve()}function es(p,u,d){return d?u?u(p):p:(p&&p.then||(p=Promise.resolve(p)),u?p.then(u):p)}var Sl=function(p){c(d,p);var u=$(d);function d(){return n(this,d),u.apply(this,arguments)}return i(d,[{key:"readWhole",value:function(){try{var a=this;return a.chunked=!1,es(Et(a.input),function(l){a._swapArrayBuffer(l)})}catch(l){return Promise.reject(l)}}},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,x(f(d.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(a,l){try{var h=this,m=l?a+l:void 0,v=h.input.slice(a,m);return es(Et(v),function(P){return h.set(P,a,!0)})}catch(P){return Promise.reject(P)}}}]),d}(function(p){c(d,p);var u=$(d);function d(a,l){var h;return n(this,d),o(S(h=u.call(this,0)),"chunksRead",0),h.input=a,h.options=l,h}return i(d,[{key:"readWhole",value:function(){try{var a=this;return a.chunked=!1,Zi(a.readChunk(a.nextChunkOffset))}catch(l){return Promise.reject(l)}}},{key:"readChunked",value:function(){try{var a=this;return a.chunked=!0,Zi(a.readChunk(0,a.options.firstChunkSize))}catch(l){return Promise.reject(l)}}},{key:"readNextChunk",value:function(a){try{var l=this;if(a===void 0&&(a=l.nextChunkOffset),l.fullyRead)return l.chunksRead++,!1;var h=l.options.chunkSize;return m=l.readChunk(a,h),v=function(F){return!!F&&F.byteLength===h},P?v?v(m):m:(m&&m.then||(m=Promise.resolve(m)),v?m.then(v):m)}catch(F){return Promise.reject(F)}var m,v,P}},{key:"readChunk",value:function(a,l){try{var h=this;return h.chunksRead++,(l=h.safeWrapAddress(a,l))===0?void 0:h._readChunk(a,l)}catch(m){return Promise.reject(m)}}},{key:"safeWrapAddress",value:function(a,l){return this.size!==void 0&&a+l>this.size?Math.max(0,this.size-a):l}},{key:"nextChunkOffset",get:function(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return this.size!==void 0&&this.nextChunkOffset===this.size}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}}]),d}(wl));Tt.set("blob",Sl),t.Exifr=yt,t.Options=Rt,t.allFormatters=gt,t.chunkedProps=ht,t.createDictionary=fn,t.default=ul,t.disableAllOptions=Br,t.extendDictionary=gn,t.fetchUrlAsArrayBuffer=Tr,t.fileParsers=$e,t.fileReaders=Tt,t.gps=cl,t.gpsOnlyOptions=Ki,t.inheritables=Zt,t.orientation=Gi,t.orientationOnlyOptions=Xi,t.otherSegments=Jt,t.parse=Pn,t.readBlobAsArrayBuffer=Et,t.rotation=function(p){return tt(Gi(p),function(u){return z({canvas:t.rotateCanvas,css:t.rotateCss},Qi[u])})},t.rotations=Qi,t.segmentParsers=ye,t.segments=xt,t.segmentsAndBlocks=pt,t.tagKeys=Ut,t.tagRevivers=Ur,t.tagValues=Er,t.thumbnail=hl,t.thumbnailOnlyOptions=Yi,t.thumbnailUrl=dl,t.tiffBlocks=ee,t.tiffExtractables=ft,Object.defineProperty(t,"__esModule",{value:!0})})})(mi,mi.exports);var zp={strings:{generatingThumbnails:"Generating thumbnails..."}},Yo,Qo;const{UIPlugin:qp}=fe.exports,Hp=Lp,Jo=Mp,Zo=jp,Wp=mi.exports,Vp=zp;var Gp=(Qo=Yo=class extends qp{constructor(e,t){super(e,t);this.onFileAdded=s=>{!s.preview&&s.data&&Zo(s.type)&&!s.isRemote&&this.addToQueue(s.id)},this.onCancelRequest=s=>{const i=this.queue.indexOf(s.id);i!==-1&&this.queue.splice(i,1)},this.onFileRemoved=s=>{const i=this.queue.indexOf(s.id);i!==-1&&this.queue.splice(i,1),s.preview&&Jo(s.preview)&&URL.revokeObjectURL(s.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(i=>i.isRestored).forEach(i=>{(!i.preview||Jo(i.preview))&&this.addToQueue(i.id)})},this.waitUntilAllProcessed=s=>{s.forEach(o=>{const c=this.uppy.getFile(o);this.uppy.emit("preprocess-progress",c,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const i=()=>{s.forEach(o=>{const c=this.uppy.getFile(o);this.uppy.emit("preprocess-complete",c)})};return new Promise(o=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{i(),o()}):(i(),o())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType||"image/jpeg",this.defaultLocale=Vp;const n={thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1};if(this.opts=w(w({},n),t),this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,n){const s=URL.createObjectURL(e.data),i=new Promise((c,f)=>{const y=new Image;y.src=s,y.addEventListener("load",()=>{URL.revokeObjectURL(s),c(y)}),y.addEventListener("error",g=>{URL.revokeObjectURL(s),f(g.error||new Error("Could not create thumbnail"))})}),o=Wp.rotation(e.data).catch(()=>1);return Promise.all([i,o]).then(c=>{let[f,y]=c;const g=this.getProportionalDimensions(f,t,n,y.deg),b=this.rotateImage(f,y),_=this.resizeImage(b,g.width,g.height);return this.canvasToBlob(_,this.thumbnailType,80)}).then(c=>URL.createObjectURL(c))}getProportionalDimensions(e,t,n,s){let i=e.width/e.height;return(s===90||s===270)&&(i=e.height/e.width),t!=null?{width:t,height:Math.round(t/i)}:n!=null?{width:Math.round(n*i),height:n}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/i)}}protect(e){const t=e.width/e.height,n=5e6,s=4096;let i=Math.floor(Math.sqrt(n*t)),o=Math.floor(n/Math.sqrt(n*t));if(i>s&&(i=s,o=Math.round(i/t)),o>s&&(o=s,i=Math.round(t*o)),e.width>i){const c=document.createElement("canvas");c.width=i,c.height=o,c.getContext("2d").drawImage(e,0,0,i,o),e=c}return e}resizeImage(e,t,n){e=this.protect(e);let s=Math.ceil(Math.log2(e.width/t));s<1&&(s=1);let i=t*2**(s-1),o=n*2**(s-1);const c=2;for(;s--;){const f=document.createElement("canvas");f.width=i,f.height=o,f.getContext("2d").drawImage(e,0,0,i,o),e=f,i=Math.round(i/c),o=Math.round(o/c)}return e}rotateImage(e,t){let n=e.width,s=e.height;(t.deg===90||t.deg===270)&&(n=e.height,s=e.width);const i=document.createElement("canvas");i.width=n,i.height=s;const o=i.getContext("2d");return o.translate(n/2,s/2),t.canvas&&(o.rotate(t.rad),o.scale(t.scaleX,t.scaleY)),o.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),i}canvasToBlob(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(s=>{e.toBlob(s,t,n)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>Hp(e.toDataURL(t,n),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());if(!e){this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error");return}return this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue())}this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated")}requestThumbnail(e){return Zo(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}},Yo.VERSION="2.0.6",Qo);const Kp=zs;var Xp=function(e){if(typeof e=="string"){const t=document.querySelectorAll(e);return t.length===0?null:Array.from(t)}return typeof e=="object"&&Kp(e)?[e]:null},Ct=Array.from,Yp=function(e){return!e.fullPath||e.fullPath===`/${e.name}`?null:e.fullPath},Qp=function r(e,t,n,s){let{onSuccess:i}=s;e.readEntries(o=>{const c=[...t,...o];o.length?setTimeout(()=>{r(e,c,n,{onSuccess:i})},0):i(c)},o=>{n(o),i(t)})};const Jp=Ct,Zp=Yp,ef=Qp;var tf=function(e,t){const n=[],s=[],i=o=>new Promise(c=>{if(o.isFile)o.file(f=>{f.relativePath=Zp(o),n.push(f),c()},f=>{t(f),c()});else if(o.isDirectory){const f=o.createReader();ef(f,[],t,{onSuccess:y=>c(Promise.all(y.map(i)))})}});return Jp(e.items).forEach(o=>{const c=o.webkitGetAsEntry();c&&s.push(i(c))}),Promise.all(s).then(()=>n)};const rf=Ct;var nf=function(e){const t=rf(e.files);return Promise.resolve(t)};const sf=tf,of=nf;var yi=function(e,t){var n;let{logDropError:s=()=>{}}=t===void 0?{}:t;return(n=e.items)!=null&&n[0]&&"webkitGetAsEntry"in e.items[0]?sf(e,s):of(e)},vi=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'],ea=function(e,t){if(t){const n=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(n)return n}return e};const af=Ct,lf=vi,uf=ea;function ta(r,e){const t=e[0];t&&(t.focus(),r.preventDefault())}function cf(r,e){const t=e[e.length-1];t&&(t.focus(),r.preventDefault())}function df(r){return r.contains(document.activeElement)}function ra(r,e,t){const n=uf(t,e),s=af(n.querySelectorAll(lf)),i=s.indexOf(document.activeElement);df(n)?r.shiftKey&&i===0?cf(r,s):!r.shiftKey&&i===s.length-1&&ta(r,s):ta(r,s)}var hf={forModal:(r,e,t)=>{ra(r,e,t)},forInline:(r,e,t)=>{e===null||ra(r,e,t)}};const pf=El,ff=vi,gf=ea;var mf=function(){let e=!1;return pf((n,s)=>{const i=gf(n,s),o=i.contains(document.activeElement);if(o&&e)return;const c=i.querySelector("[data-uppy-super-focusable]");if(!(o&&!c))if(c)c.focus({preventScroll:!0}),e=!0;else{const f=i.querySelector(ff);f==null||f.focus({preventScroll:!0}),e=!1}},260)},na=Ir(Ul),ia=function(){const e=document.body;return!(!("draggable"in e)||!("ondragstart"in e&&"ondrop"in e)||!("FormData"in window)||!("FileReader"in window))},yf=function(e,t){if(e===t)return!0;for(var n in e)if(!(n in t))return!1;for(var n in t)if(e[n]!==t[n])return!1;return!0};const{h:oe}=W;function vf(){return oe("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},oe("g",{fill:"#686DE0",fillRule:"evenodd"},oe("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),oe("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),oe("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function bf(){return oe("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},oe("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function wf(){return oe("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},oe("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function Pf(){return oe("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},oe("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function _f(){return oe("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},oe("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function Sf(){return oe("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},oe("g",{fill:"#A7AFB7",fillRule:"nonzero"},oe("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),oe("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function Ff(){return oe("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},oe("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}var bi=function(e){const t={color:"#838999",icon:Sf()};if(!e)return t;const n=e.split("/")[0],s=e.split("/")[1];return n==="text"?{color:"#5a5e69",icon:Ff()}:n==="image"?{color:"#686de0",icon:vf()}:n==="audio"?{color:"#068dbb",icon:bf()}:n==="video"?{color:"#19af67",icon:wf()}:n==="application"&&s==="pdf"?{color:"#e25149",icon:Pf()}:n==="application"&&["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:_f()}:t};const{h:_r}=W,Cf=bi;var sa=function(e){const{file:t}=e;if(t.preview)return _r("img",{className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:n,icon:s}=Cf(t.type);return _r("div",{className:"uppy-Dashboard-Item-previewIconWrap"},_r("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:n}},s),_r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},_r("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))};const{h:oa}=W,kf=(r,e)=>e.filter(n=>n.id===r)[0].name;var aa=function(e){const{file:t,toggleFileCard:n,i18n:s,metaFields:i}=e,{missingRequiredMetaFields:o}=t;if(!(o!=null&&o.length))return null;const c=o.map(f=>kf(f,i)).join(", ");return oa("div",{className:"uppy-Dashboard-Item-errorMessage"},s("missingRequiredMetaFields",{smart_count:o.length,fields:c})," ",oa("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>n(!0,t.id)},s("editFile")))};const{h:Sr}=W,Af=sa,Of=aa,Tf=bi;var Ef=function(e){return Sr("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:Tf(e.file.type).color}},e.showLinkToFileUploadResult&&e.file.uploadURL&&Sr("a",{className:"uppy-Dashboard-Item-previewLink",href:e.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.file.meta.name},Sr("span",{hidden:!0},e.file.meta.name)),Sr(Af,{file:e.file}),Sr(Of,{file:e.file,i18n:e.i18n,toggleFileCard:e.toggleFileCard,metaFields:e.metaFields}))};const{h:q}=W;function Uf(r){if(!r.isUploaded){if(r.error&&!r.hideRetryButton){r.uppy.retryUpload(r.file.id);return}r.resumableUploads&&!r.hidePauseResumeButton?r.uppy.pauseResume(r.file.id):r.individualCancellation&&!r.hideCancelButton&&r.uppy.removeFile(r.file.id)}}function la(r){return r.isUploaded?r.i18n("uploadComplete"):r.error?r.i18n("retryUpload"):r.resumableUploads?r.file.isPaused?r.i18n("resumeUpload"):r.i18n("pauseUpload"):r.individualCancellation?r.i18n("cancelUpload"):""}function wi(r){return q("div",{className:"uppy-Dashboard-Item-progress"},q("button",{className:"uppy-u-reset uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":la(r),title:la(r),onClick:()=>Uf(r)},r.children))}function nn(r){let{children:e}=r;return q("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function Pi(r){let{progress:e}=r;const t=2*Math.PI*15;return q("g",null,q("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),q("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e}))}var Df=function(e){if(!e.file.progress.uploadStarted)return null;if(e.isUploaded)return q("div",{className:"uppy-Dashboard-Item-progress"},q("div",{className:"uppy-Dashboard-Item-progressIndicator"},q(nn,null,q("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),q("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))));if(!e.recoveredState)return e.error&&!e.hideRetryButton?q(wi,e,q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},q("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),q("path",{d:"M7.9 3H10v2H7.9z"}),q("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),q("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):e.resumableUploads&&!e.hidePauseResumeButton?q(wi,e,q(nn,null,q(Pi,{progress:e.file.progress.percentage}),e.file.isPaused?q("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):q("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},q("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),q("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!e.resumableUploads&&e.individualCancellation&&!e.hideCancelButton?q(wi,e,q(nn,null,q(Pi,{progress:e.file.progress.percentage}),q("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):q("div",{className:"uppy-Dashboard-Item-progress"},q("div",{className:"uppy-Dashboard-Item-progressIndicator"},q(nn,null,q(Pi,{progress:e.file.progress.percentage}))))};const _i="...";var xf=function(e,t){if(t===0)return"";if(e.length<=t)return e;if(t<=_i.length+1)return`${e.slice(0,t-1)}\u2026`;const n=t-_i.length,s=Math.ceil(n/2),i=Math.floor(n/2);return e.slice(0,s)+_i+e.slice(-i)};const{h:Se,Fragment:Rf}=W,$f=Dn,ua=xf,Bf=aa,Nf=r=>{const{author:e,name:t}=r.file.meta;function n(){return r.containerWidth<=352?35:r.containerWidth<=576?60:e?20:30}return Se("div",{className:"uppy-Dashboard-Item-name",title:t},ua(t,n()))},If=r=>{const{author:e}=r.file.meta,{providerName:t}=r.file.remote,n="\xB7";return e?Se("div",{className:"uppy-Dashboard-Item-author"},Se("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},ua(e.name,13)),t?Se(Rf,null,` ${n} `,t):null):null},Lf=r=>r.file.size&&Se("div",{className:"uppy-Dashboard-Item-statusSize"},$f(r.file.size)),Mf=r=>r.file.isGhost&&Se("span",null," \u2022 ",Se("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:r.toggleAddFilesPanel},r.i18n("reSelect"))),jf=r=>{let{file:e,onClick:t}=r;return e.error?Se("button",{className:"uppy-u-reset uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button"},"?"):null};var zf=function(e){const{file:t}=e;return Se("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source},Se("div",{className:"uppy-Dashboard-Item-fileName"},Nf(e),Se(jf,{file:e.file,onClick:()=>alert(e.file.error)})),Se("div",{className:"uppy-Dashboard-Item-status"},If(e),Lf(e),Mf(e)),Se(Bf,{file:e.file,i18n:e.i18n,toggleFileCard:e.toggleFileCard,metaFields:e.metaFields}))},qf=function(e,t){return t=t||"Copy the URL below",new Promise(n=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=e,document.body.appendChild(s),s.select();const i=()=>{document.body.removeChild(s),window.prompt(t,e),n()};try{return document.execCommand("copy")?(document.body.removeChild(s),n()):i("copy command unavailable")}catch(o){return document.body.removeChild(s),i(o)}})};const{h:le}=W,Hf=qf;function Wf(r){let{file:e,uploadInProgressOrComplete:t,metaFields:n,canEditFile:s,i18n:i,onClick:o}=r;return!t&&n&&n.length>0||!t&&s(e)?le("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":i("editFileWithFilename",{file:e.meta.name}),title:i("editFileWithFilename",{file:e.meta.name}),onClick:()=>o()},le("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},le("g",{fillRule:"evenodd"},le("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),le("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),le("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function Vf(r){let{i18n:e,onClick:t,file:n}=r;return le("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:n.meta.name}),title:e("removeFile",{file:n.meta.name}),onClick:()=>t()},le("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},le("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),le("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}const Gf=(r,e)=>{Hf(e.file.uploadURL,e.i18n("copyLinkToClipboardFallback")).then(()=>{e.uppy.log("Link copied to clipboard."),e.uppy.info(e.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.uppy.log).then(()=>r.target.focus({preventScroll:!0}))};function Kf(r){const{i18n:e}=r;return le("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":e("copyLink"),title:e("copyLink"),onClick:t=>Gf(t,r)},le("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},le("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}var Xf=function(e){const{uppy:t,file:n,uploadInProgressOrComplete:s,canEditFile:i,metaFields:o,showLinkToFileUploadResult:c,showRemoveButton:f,i18n:y,toggleFileCard:g,openFileEditor:b}=e;return le("div",{className:"uppy-Dashboard-Item-actionWrapper"},le(Wf,{i18n:y,file:n,uploadInProgressOrComplete:s,canEditFile:i,metaFields:o,onClick:()=>{o&&o.length>0?g(!0,n.id):b(n)}}),c&&n.uploadURL?le(Kf,{file:n,uppy:t,i18n:y}):null,f?le(Vf,{i18n:y,file:n,uppy:t,onClick:()=>e.uppy.removeFile(n.id,"removed-by-user")}):null)};const{h:kt,Component:Yf}=W,Qf=Be.exports,Jf=yf,Zf=Ef,eg=Df,tg=zf,rg=Xf;var ng=class extends Yf{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!Jf(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,n=e.progress.uploadComplete&&!t&&!e.error,s=e.progress.uploadStarted||t,i=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:c}=e;let f=(this.props.individualCancellation||!i)&&!n;n&&this.props.showRemoveButtonAfterComplete&&(f=!0);const y=Qf({"uppy-Dashboard-Item":!0,"is-inprogress":i&&!this.props.recoveredState,"is-processing":t,"is-complete":n,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":c});return kt("div",{className:y,id:`uppy_${e.id}`,role:this.props.role},kt("div",{className:"uppy-Dashboard-Item-preview"},kt(Zf,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),kt(eg,{uppy:this.props.uppy,file:e,error:o,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),kt("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},kt(tg,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),kt(rg,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:f,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:s,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}};function Si(){return Si=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Si.apply(this,arguments)}const{h:Fi,Component:ig}=W,sg={position:"relative",width:"100%",minHeight:"100%"},og={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class ag extends ig{constructor(e){super(e);this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let $=e,{data:t,rowHeight:n,renderRow:s,overscanCount:i=10}=$,o=On($,["data","rowHeight","renderRow","overscanCount"]);const{offset:c,height:f}=this.state;let y=Math.floor(c/n),g=Math.floor(f/n);i&&(y=Math.max(0,y-y%i),g+=i);const b=y+g+4,_=t.slice(y,b),S=D(w({},sg),{height:t.length*n}),k=D(w({},og),{top:y*n});return Fi("div",Si({onScroll:this.handleScroll},o),Fi("div",{role:"presentation",style:S},Fi("div",{role:"presentation",style:k},_.map(s))))}}var lg=ag;function Ci(){return Ci=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ci.apply(this,arguments)}const ug=Be.exports,{h:ki}=W,cg=ng,dg=lg;function hg(r,e){const t=[];let n=[];return r.forEach(s=>{n.length<e?n.push(s):(t.push(n),n=[s])}),n.length&&t.push(n),t}var pg=r=>{const e=r.totalFileCount===0,t=ug("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":e}),n=r.itemsPerRow===1?71:200,s={id:r.id,error:r.error,i18n:r.i18n,uppy:r.uppy,acquirers:r.acquirers,resumableUploads:r.resumableUploads,individualCancellation:r.individualCancellation,hideRetryButton:r.hideRetryButton,hidePauseResumeButton:r.hidePauseResumeButton,hideCancelButton:r.hideCancelButton,showLinkToFileUploadResult:r.showLinkToFileUploadResult,showRemoveButtonAfterComplete:r.showRemoveButtonAfterComplete,isWide:r.isWide,metaFields:r.metaFields,recoveredState:r.recoveredState,toggleFileCard:r.toggleFileCard,handleRequestThumbnail:r.handleRequestThumbnail,handleCancelThumbnail:r.handleCancelThumbnail},i=(y,g)=>r.files[g].isGhost-r.files[y].isGhost,o=Object.keys(r.files);r.recoveredState&&o.sort(i);const c=hg(o,r.itemsPerRow);return ki(dg,{class:t,role:"list",data:c,renderRow:y=>ki("div",{role:"presentation",key:y[0]},y.map(g=>ki(cg,Ci({key:g,uppy:r.uppy},s,{role:"listitem",openFileEditor:r.openFileEditor,canEditFile:r.canEditFile,toggleAddFilesPanel:r.toggleAddFilesPanel,file:r.files[g]})))),rowHeight:n})};let ca;const{h:Z,Component:fg}=W;ca=Symbol.for("uppy test: disable unused locale key warning");class gg extends fg{constructor(){super(...arguments);this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.target.value=null},this.renderHiddenInput=(e,t)=>Z("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:t}),this.renderMyDeviceAcquirer=()=>Z("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},Z("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},Z("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},Z("g",{fill:"none",fillRule:"evenodd"},Z("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),Z("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"}))),Z("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderBrowseButton=(e,t)=>{const n=this.props.acquirers.length;return Z("button",{type:"button",className:"uppy-u-reset uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":n===0},e)},this.renderDropPasteBrowseTagline=()=>{const e=this.props.acquirers.length,t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),n=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),s=this.props.fileManagerSelectionType,i=s.charAt(0).toUpperCase()+s.slice(1);return Z("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${i}`,{browseFiles:t,browseFolders:n,browse:t}):this.props.i18nArray(`dropPaste${i}`,{browseFiles:t,browseFolders:n,browse:t}))},this.renderAcquirer=e=>Z("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},Z("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},e.icon(),Z("div",{className:"uppy-DashboardTab-name"},e.name))),this.renderAcquirers=(e,t)=>{const n=[...e],s=n.splice(e.length-2,e.length);return Z("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},!t&&this.renderMyDeviceAcquirer(),n.map(i=>this.renderAcquirer(i)),Z("span",{role:"presentation",style:{"white-space":"nowrap"}},s.map(i=>this.renderAcquirer(i))))}}[ca](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:e}=this.props,t=Z("span",null,Z("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},Z("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),Z("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),n=e("poweredBy",{uppy:t});return Z("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},n)}render(){return Z("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,e=>{this.fileInput=e}),this.renderHiddenInput(!0,e=>{this.folderInput=e}),this.renderDropPasteBrowseTagline(),this.props.acquirers.length>0&&this.renderAcquirers(this.props.acquirers,this.props.disableLocalFiles),Z("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&Z("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}var da=gg;const{h:Fr}=W,mg=Be.exports,yg=da,vg=r=>Fr("div",{className:mg("uppy-Dashboard-AddFilesPanel",r.className),"data-uppy-panelType":"AddFiles","aria-hidden":r.showAddFilesPanel},Fr("div",{className:"uppy-DashboardContent-bar"},Fr("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r.i18n("addingMoreFiles")),Fr("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>r.toggleAddFilesPanel(!1)},r.i18n("back"))),Fr(yg,r));var bg=vg;function wg(r){const{tagName:e}=r.target;if(e==="INPUT"||e==="TEXTAREA"){r.stopPropagation();return}r.preventDefault(),r.stopPropagation()}var ha=wg;const{h:Cr}=W,Pg=Be.exports,sn=ha;function _g(r){return Cr("div",{className:Pg("uppy-DashboardContent-panel",r.className),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${r.activePickerPanel.id}`,onDragOver:sn,onDragLeave:sn,onDrop:sn,onPaste:sn},Cr("div",{className:"uppy-DashboardContent-bar"},Cr("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r.i18n("importFrom",{name:r.activePickerPanel.name})),Cr("button",{className:"uppy-DashboardContent-back",type:"button",onClick:r.hideAllPanels},r.i18n("cancel"))),Cr("div",{className:"uppy-DashboardContent-panelBody"},r.uppy.getPlugin(r.activePickerPanel.id).render(r.state)))}var Sg=_g;const{h:At}=W,Fg=Be.exports;function Cg(r){const e=r.files[r.fileCardFor];return At("div",{className:Fg("uppy-DashboardContent-panel",r.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},At("div",{className:"uppy-DashboardContent-bar"},At("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r.i18nArray("editing",{file:At("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),At("button",{className:"uppy-DashboardContent-back",type:"button",onClick:r.hideAllPanels},r.i18n("cancel")),At("button",{className:"uppy-DashboardContent-save",type:"button",onClick:r.saveFileEditor},r.i18n("save"))),At("div",{className:"uppy-DashboardContent-panelBody"},r.editors.map(t=>r.uppy.getPlugin(t.id).render(r.state))))}var kg=Cg;const{h:qe}=W,He={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function Ag(r,e,t,n){if(n===void 0&&(n={}),r)return He.STATE_ERROR;if(e)return He.STATE_COMPLETE;if(t)return He.STATE_PAUSED;let s=He.STATE_WAITING;const i=Object.keys(n);for(let o=0;o<i.length;o++){const{progress:c}=n[i[o]];if(c.uploadStarted&&!c.uploadComplete)return He.STATE_UPLOADING;c.preprocess&&s!==He.STATE_UPLOADING&&(s=He.STATE_PREPROCESSING),c.postprocess&&s!==He.STATE_UPLOADING&&s!==He.STATE_PREPROCESSING&&(s=He.STATE_POSTPROCESSING)}return s}function Og(r){switch(Ag(r.isAllErrored,r.isAllComplete,r.isAllPaused,r.files)){case"uploading":return r.i18n("uploadingXFiles",{smart_count:r.inProgressNotPausedFiles.length});case"preprocessing":case"postprocessing":return r.i18n("processingXFiles",{smart_count:r.processingFiles.length});case"paused":return r.i18n("uploadPaused");case"waiting":return r.i18n("xFilesSelected",{smart_count:r.newFiles.length});case"complete":return r.i18n("uploadComplete")}}function Tg(r){let{allowNewUpload:e}=r;return e&&r.maxNumberOfFiles&&(e=r.totalFileCount<r.maxNumberOfFiles),qe("div",{className:"uppy-DashboardContent-bar"},!r.isAllComplete&&!r.hideCancelButton?qe("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>r.uppy.cancelAll()},r.i18n("cancel")):qe("div",null),qe("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},qe(Og,r)),e?qe("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":r.i18n("addMoreFiles"),title:r.i18n("addMoreFiles"),onClick:()=>r.toggleAddFilesPanel(!0)},qe("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},qe("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),qe("span",{className:"uppy-DashboardContent-addMoreCaption"},r.i18n("addMore"))):qe("div",null))}var Eg=Tg;const{h:ue,Component:Ug}=W,Dg=Be.exports,{nanoid:xg}=Tn,Rg=bi,on=ha,$g=sa;class Bg extends Ug{constructor(e){super(e);this.form=document.createElement("form"),this.updateMeta=(i,o)=>{this.setState(c=>{let{formState:f}=c;return{formState:D(w({},f),{[o]:i})}})},this.handleSave=i=>{i.preventDefault();const o=this.props.fileCardFor;this.props.saveFileCard(this.state.formState,o)},this.handleCancel=()=>{this.props.toggleFileCard(!1)},this.saveOnEnter=i=>{if(i.keyCode===13){i.stopPropagation(),i.preventDefault();const o=this.props.files[this.props.fileCardFor];this.props.saveFileCard(this.state.formState,o.id)}},this.renderMetaFields=()=>{const i=this.getMetaFields()||[],o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return i.map(c=>{const f=`uppy-Dashboard-FileCard-input-${c.id}`,y=this.props.requiredMetaFields.includes(c.id);return ue("fieldset",{key:c.id,className:"uppy-Dashboard-FileCard-fieldset"},ue("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:f},c.name),c.render!==void 0?c.render({value:this.state.formState[c.id],onChange:g=>this.updateMeta(g,c.id),fieldCSSClasses:o,required:y,form:this.form.id},ue):ue("input",{className:o.text,id:f,form:this.form.id,type:c.type||"text",required:y,value:this.state.formState[c.id],placeholder:c.placeholder,onKeyUp:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyDown:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyPress:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onInput:g=>this.updateMeta(g.target.value,c.id),"data-uppy-super-focusable":!0}))})};const t=this.props.files[this.props.fileCardFor],n=this.getMetaFields()||[],s={};n.forEach(i=>{s[i.id]=t.meta[i.id]||""}),this.state={formState:s},this.form.id=xg()}componentWillMount(){this.form.addEventListener("submit",this.handleSave),document.body.appendChild(this.form)}componentWillUnmount(){this.form.removeEventListener("submit",this.handleSave),document.body.removeChild(this.form)}getMetaFields(){return typeof this.props.metaFields=="function"?this.props.metaFields(this.props.files[this.props.fileCardFor]):this.props.metaFields}render(){const e=this.props.files[this.props.fileCardFor],t=this.props.canEditFile(e);return ue("div",{className:Dg("uppy-Dashboard-FileCard",this.props.className),"data-uppy-panelType":"FileCard",onDragOver:on,onDragLeave:on,onDrop:on,onPaste:on},ue("div",{className:"uppy-DashboardContent-bar"},ue("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:ue("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),ue("button",{className:"uppy-DashboardContent-back",type:"button",form:this.form.id,title:this.props.i18n("finishEditingFile"),onClick:this.handleCancel},this.props.i18n("cancel"))),ue("div",{className:"uppy-Dashboard-FileCard-inner"},ue("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Rg(e.type).color}},ue($g,{file:e}),t&&ue("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:n=>{this.handleSave(n),this.props.openFileEditor(e)},form:this.form.id},this.props.i18n("editFile"))),ue("div",{className:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),ue("div",{className:"uppy-Dashboard-FileCard-actions"},ue("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"form"in HTMLButtonElement.prototype?"submit":"button",onClick:"form"in HTMLButtonElement.prototype?void 0:this.handleSave,form:this.form.id},this.props.i18n("saveChanges")),ue("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleCancel,form:this.form.id},this.props.i18n("cancel")))))}}var Ng=Bg;const{cloneElement:Ig,Component:Lg,toChildArray:Mg}=W,jg=Be.exports,qt="uppy-transition-slideDownUp",pa=250;class zg extends Lg{constructor(e){super(e);this.state={cachedChildren:null,className:""}}componentWillUpdate(e){const{cachedChildren:t}=this.state,n=Mg(e.children)[0];if(t===n)return null;const s={cachedChildren:n};n&&!t&&(s.className=`${qt}-enter`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${qt}-enter ${qt}-enter-active`}),this.enterTimeout=setTimeout(()=>{this.setState({className:""})},pa)})),t&&!n&&this.leaveTimeout===void 0&&(s.cachedChildren=t,s.className=`${qt}-leave`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${qt}-leave ${qt}-leave-active`}),this.leaveTimeout=setTimeout(()=>{this.setState({cachedChildren:null,className:""})},pa)})),this.setState(s)}render(){const{cachedChildren:e,className:t}=this.state;return e?Ig(e,{className:jg(t,e.props.className)}):null}}var qg=zg;function at(){return at=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},at.apply(this,arguments)}const{h:V}=W,fa=Be.exports,Hg=ia,Wg=pg,Vg=da,Gg=bg,Kg=Sg,Xg=kg,Yg=Eg,Qg=Ng,an=qg,ga=900,ma=700,Ai=576,Jg=400;var Zg=function(e){const t=e.totalFileCount===0,n=e.containerWidth>Ai,s=fa({"uppy-Root":e.isTargetDOMEl}),i=fa({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>Ai,"uppy-size--lg":e.containerWidth>ma,"uppy-size--xl":e.containerWidth>ga,"uppy-size--height-md":e.containerHeight>Jg,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible});let o=1;e.containerWidth>ga?o=5:e.containerWidth>ma?o=4:e.containerWidth>Ai&&(o=3);const c=e.showSelectedFiles&&!t,f=e.recoveredState?Object.keys(e.recoveredState.files).length:null,y=e.files?Object.keys(e.files).filter(_=>e.files[_].isGhost).length:null,g=()=>y>0?e.i18n("recoveredXFiles",{smart_count:y}):e.i18n("recoveredAllFiles"),b=V("div",{className:i,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&Hg(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop},V("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),V("div",{className:"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:!e.inline&&"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},e.inline?null:V("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal},V("span",{"aria-hidden":"true"},"\xD7")),V("div",{className:"uppy-Dashboard-innerWrap"},V("div",{className:"uppy-Dashboard-dropFilesHereHint"},e.i18n("dropHint")),c&&V(Yg,e),f&&V("div",{className:"uppy-Dashboard-serviceMsg"},V("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},V("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},V("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),V("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),V("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),V("strong",{className:"uppy-Dashboard-serviceMsg-title"},e.i18n("sessionRestored")),V("div",{className:"uppy-Dashboard-serviceMsg-text"},g())),c?V(Wg,at({},e,{itemsPerRow:o})):V(Vg,at({},e,{isSizeMD:n})),V(an,null,e.showAddFilesPanel?V(Gg,at({key:"AddFiles"},e,{isSizeMD:n})):null),V(an,null,e.fileCardFor?V(Qg,at({key:"FileCard"},e)):null),V(an,null,e.activePickerPanel?V(Kg,at({key:"Picker"},e)):null),V(an,null,e.showFileEditor?V(Xg,at({key:"Editor"},e)):null),V("div",{className:"uppy-Dashboard-progressindicators"},e.progressindicators.map(_=>e.uppy.getPlugin(_.id).render(e.state))))));return V("div",{className:s,dir:e.direction},b)},em={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."}}},ya,Ht,lt,ln,un,cn,We,va;function Te(r,e){if(!Object.prototype.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var tm=0;function Wt(r){return"__private_"+tm+++"_"+r}const{h:ba}=W,{UIPlugin:rm}=fe.exports,nm=Wo,im=Np,sm=Gp,wa=Xp,Oi=Ct,om=yi,am=Ro,{nanoid:lm}=Tn,Pa=hf,um=mf,Ti=na.default||na,cm=vi,dm=Zg,hm=em,_a=9,pm=27;function Sa(){const r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r}function fm(){return ba("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},ba("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var Fa=(va=(Ht=Wt("openFileEditorWhenFilesAdded"),lt=Wt("attachRenderFunctionToTarget"),ln=Wt("isTargetSupported"),un=Wt("getAcquirers"),cn=Wt("getProgressIndicators"),We=Wt("getEditors"),ya=class extends rm{constructor(e,t){var n;super(e,t);n=this,this.removeTarget=i=>{const c=this.getPluginState().targets.filter(f=>f.id!==i.id);this.setPluginState({targets:c})},this.addTarget=i=>{const o=i.id||i.constructor.name,c=i.title||o,f=i.type;if(f!=="acquirer"&&f!=="progressindicator"&&f!=="editor"){const _="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";this.uppy.log(_,"error");return}const y={id:o,name:c,type:f},b=this.getPluginState().targets.slice();return b.push(y),this.setPluginState({targets:b}),this.el},this.hideAllPanels=()=>{const i=this.getPluginState(),o={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};i.activePickerPanel===o.activePickerPanel&&i.showAddFilesPanel===o.showAddFilesPanel&&i.showFileEditor===o.showFileEditor&&i.activeOverlayType===o.activeOverlayType||this.setPluginState(o)},this.showPanel=i=>{const{targets:o}=this.getPluginState(),c=o.filter(f=>f.type==="acquirer"&&f.id===i)[0];this.setPluginState({activePickerPanel:c,activeOverlayType:"PickerPanel"})},this.canEditFile=i=>{const{targets:o}=this.getPluginState();return Te(this,We)[We](o).some(f=>this.uppy.getPlugin(f.id).canEditFile(i))},this.openFileEditor=i=>{const{targets:o}=this.getPluginState(),c=Te(this,We)[We](o);this.setPluginState({showFileEditor:!0,fileCardFor:i.id||null,activeOverlayType:"FileEditor"}),c.forEach(f=>{this.uppy.getPlugin(f.id).selectFile(i)})},this.saveFileEditor=()=>{const{targets:i}=this.getPluginState();Te(this,We)[We](i).forEach(c=>{this.uppy.getPlugin(c.id).save()}),this.hideAllPanels()},this.openModal=()=>{const{promise:i,resolve:o}=Sa();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const c=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",c,!1),o()};this.el.addEventListener("animationend",c,!1)}else this.setPluginState({isHidden:!1}),o();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),i},this.closeModal=function(i){i===void 0&&(i={});const{manualClose:o=!0}=i,{isHidden:c,isClosing:f}=n.getPluginState();if(c||f)return;const{promise:y,resolve:g}=Sa();if(n.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),n.opts.animateOpenClose){n.setPluginState({isClosing:!0});const _=()=>{n.setPluginState({isHidden:!0,isClosing:!1}),n.superFocus.cancel(),n.savedActiveElement.focus(),n.el.removeEventListener("animationend",_,!1),g()};n.el.addEventListener("animationend",_,!1)}else n.setPluginState({isHidden:!0}),n.superFocus.cancel(),n.savedActiveElement.focus(),g();if(document.removeEventListener("keydown",n.handleKeyDownInModal),o&&n.opts.browserBackButtonClose){var b;(b=history.state)!=null&&b[n.modalName]&&history.back()}return n.uppy.emit("dashboard:modal-closed"),y},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=i=>{const{capabilities:o}=this.uppy.getState();this.uppy.setState({capabilities:D(w({},o),{darkMode:i})})},this.handleSystemDarkModeChange=i=>{const o=i.matches;this.uppy.log(`[Dashboard] Dark mode is ${o?"on":"off"}`),this.setDarkModeCapability(o)},this.toggleFileCard=(i,o)=>{const c=this.uppy.getFile(o);i?this.uppy.emit("dashboard:file-edit-start",c):this.uppy.emit("dashboard:file-edit-complete",c),this.setPluginState({fileCardFor:i?o:null,activeOverlayType:i?"FileCard":null})},this.toggleAddFilesPanel=i=>{this.setPluginState({showAddFilesPanel:i,activeOverlayType:i?"AddFiles":null})},this.addFiles=i=>{const o=i.map(c=>({source:this.id,name:c.name,type:c.type,data:c,meta:{relativePath:c.relativePath||null}}));try{this.uppy.addFiles(o)}catch(c){this.uppy.log(c)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(i=>{const o=i[0],{width:c,height:f}=o.contentRect;this.uppy.log(`[Dashboard] resized: ${c} / ${f}`,"debug"),this.setPluginState({containerWidth:c,containerHeight:f,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const i=this.getPluginState(),o=!this.opts.inline&&i.isHidden;!i.areInsidesReadyToBeVisible&&!o&&(this.uppy.log("[Dashboard] resize event didn't fire on time: defaulted to mobile layout","debug"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=i=>{this.el.contains(i.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableAllFocusableElements=i=>{const o=Oi(this.el.querySelectorAll(cm));i?o.forEach(c=>{const f=c.getAttribute("tabindex");f&&(c.dataset.inertTabindex=f),c.setAttribute("tabindex","-1")}):o.forEach(c=>{"inertTabindex"in c.dataset?c.setAttribute("tabindex",c.dataset.inertTabindex):c.removeAttribute("tabindex")}),this.dashboardIsDisabled=i},this.updateBrowserHistory=()=>{var i;(i=history.state)!=null&&i[this.modalName]||history.pushState(D(w({},history.state),{[this.modalName]:!0}),""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=i=>{var o;this.isModalOpen()&&(!i.state||!i.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(o=i.state)!=null&&o[this.modalName]&&history.back()},this.handleKeyDownInModal=i=>{i.keyCode===pm&&this.requestCloseModal(i),i.keyCode===_a&&Pa.forModal(i,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=i=>{this.uppy.iteratePlugins(c=>{c.type==="acquirer"&&(c.handleRootPaste==null||c.handleRootPaste(i))});const o=Oi(i.clipboardData.files);o.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(o))},this.handleInputChange=i=>{i.preventDefault();const o=Oi(i.target.files);o.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(o))},this.handleDragOver=i=>{var o,c;i.preventDefault(),i.stopPropagation();const f=()=>{let _=!0;return this.uppy.iteratePlugins(S=>{S.canHandleRootDrop!=null&&S.canHandleRootDrop(i)&&(_=!0)}),_},y=()=>{const{types:_}=i.dataTransfer;return _.some(S=>S==="Files")},g=f(),b=y();if(!g&&!b||this.opts.disabled||this.opts.disableLocalFiles&&(b||!g)||!this.uppy.getState().allowNewUpload){i.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}i.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(o=(c=this.opts).onDragOver)==null||o.call(c,i)},this.handleDragLeave=i=>{var o,c;i.preventDefault(),i.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(o=(c=this.opts).onDragLeave)==null||o.call(c,i)},this.handleDrop=async i=>{var o,c;i.preventDefault(),i.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(b=>{b.type==="acquirer"&&(b.handleRootDrop==null||b.handleRootDrop(i))});let f=!1;const y=b=>{this.uppy.log(b,"error"),f||(this.uppy.info(b.message,"error"),f=!0)},g=await om(i.dataTransfer,{logDropError:y});g.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(g)),(o=(c=this.opts).onDrop)==null||o.call(c,i)},this.handleRequestThumbnail=i=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",i)},this.handleCancelThumbnail=i=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",i)},this.handleKeyDownInInline=i=>{i.keyCode===_a&&Pa.forInline(i,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=i=>{this.el.contains(document.activeElement)&&this.handlePaste(i)},this.handleComplete=i=>{let{failed:o}=i;this.opts.closeAfterFinish&&o.length===0&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,Ht,{writable:!0,value:i=>{const o=i[0];this.canEditFile(o)&&this.openFileEditor(o)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const i=wa(this.opts.trigger);i?i.forEach(o=>o.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("file-editor:complete",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.on("files-added",Te(this,Ht)[Ht])},this.removeEvents=()=>{const i=wa(this.opts.trigger);!this.opts.inline&&i&&i.forEach(o=>o.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("file-editor:complete",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.off("files-added",Te(this,Ht)[Ht])},this.superFocusOnEachUpdate=()=>{const i=this.el.contains(document.activeElement),o=document.activeElement===document.body||document.activeElement===null,c=this.uppy.getState().info.isHidden,f=!this.opts.inline;c&&(f||i||o&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableAllFocusableElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableAllFocusableElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(i,o)=>{this.uppy.setFileMeta(o,i),this.toggleFileCard(!1,o)},Object.defineProperty(this,lt,{writable:!0,value:i=>{const o=this.uppy.getPlugin(i.id);return D(w({},i),{icon:o.icon||this.opts.defaultPickerIcon,render:o.render})}}),Object.defineProperty(this,ln,{writable:!0,value:i=>{const o=this.uppy.getPlugin(i.id);return typeof o.isSupported!="function"?!0:o.isSupported()}}),Object.defineProperty(this,un,{writable:!0,value:Ti(i=>i.filter(o=>o.type==="acquirer"&&Te(this,ln)[ln](o)).map(Te(this,lt)[lt]))}),Object.defineProperty(this,cn,{writable:!0,value:Ti(i=>i.filter(o=>o.type==="progressindicator").map(Te(this,lt)[lt]))}),Object.defineProperty(this,We,{writable:!0,value:Ti(i=>i.filter(o=>o.type==="editor").map(Te(this,lt)[lt]))}),this.render=i=>{const o=this.getPluginState(),{files:c,capabilities:f,allowNewUpload:y}=i,{newFiles:g,uploadStartedFiles:b,completeFiles:_,erroredFiles:S,inProgressFiles:k,inProgressNotPausedFiles:$,processingFiles:x,isUploadStarted:B,isAllComplete:H,isAllErrored:z,isAllPaused:K}=this.uppy.getObjectOfFilesPerState(),T=Te(this,un)[un](o.targets),j=Te(this,cn)[cn](o.targets),X=Te(this,We)[We](o.targets);let te;return this.opts.theme==="auto"?te=f.darkMode?"dark":"light":te=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),dm({state:i,isHidden:o.isHidden,files:c,newFiles:g,uploadStartedFiles:b,completeFiles:_,erroredFiles:S,inProgressFiles:k,inProgressNotPausedFiles:$,processingFiles:x,isUploadStarted:B,isAllComplete:H,isAllErrored:z,isAllPaused:K,totalFileCount:Object.keys(c).length,totalProgress:i.totalProgress,allowNewUpload:y,acquirers:T,theme:te,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:o.activePickerPanel,showFileEditor:o.showFileEditor,saveFileEditor:this.saveFileEditor,disableAllFocusableElements:this.disableAllFocusableElements,animateOpenClose:this.opts.animateOpenClose,isClosing:o.isClosing,progressindicators:j,editors:X,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:i.recoveredState,metaFields:o.metaFields,resumableUploads:f.resumableUploads||!1,individualCancellation:f.individualCancellation,isMobileDevice:f.isMobileDevice,fileCardFor:o.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:o.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:o.containerWidth,containerHeight:o.containerHeight,areInsidesReadyToBeVisible:o.areInsidesReadyToBeVisible,isTargetDOMEl:this.isTargetDOMEl,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:o.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},this.discoverProviderPlugins=()=>{this.uppy.iteratePlugins(i=>{i&&!i.target&&i.opts&&i.opts.target===this.constructor&&this.addTarget(i)})},this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:i,closeAfterFinish:o}=this.opts;if(i&&o)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:c,allowMultipleUploadBatches:f}=this.uppy.opts;(c||f)&&o&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:y}=this.opts;y&&this.mount(y,this),(this.opts.plugins||[]).forEach(_=>{const S=this.uppy.getPlugin(_);S&&S.mount(this,S)}),this.opts.disableStatusBar||this.uppy.use(nm,{id:`${this.id}:StatusBar`,target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale,doneButtonHandler:this.opts.doneButtonHandler}),this.opts.disableInformer||this.uppy.use(im,{id:`${this.id}:Informer`,target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(sm,{id:`${this.id}:ThumbnailGenerator`,thumbnailWidth:this.opts.thumbnailWidth,thumbnailType:this.opts.thumbnailType,waitForThumbnailsBeforeUpload:this.opts.waitForThumbnailsBeforeUpload,lazy:!this.opts.waitForThumbnailsBeforeUpload}),this.darkModeMediaQuery=typeof window!="undefined"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const b=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${b?"on":"off"}`),this.setDarkModeCapability(b),this.opts.theme==="auto"&&this.darkModeMediaQuery.addListener(this.handleSystemDarkModeChange),this.discoverProviderPlugins(),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const o=this.uppy.getPlugin(`${this.id}:Informer`);o&&this.uppy.removePlugin(o)}if(!this.opts.disableStatusBar){const o=this.uppy.getPlugin(`${this.id}:StatusBar`);o&&this.uppy.removePlugin(o)}if(!this.opts.disableThumbnailGenerator){const o=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);o&&this.uppy.removePlugin(o)}(this.opts.plugins||[]).forEach(o=>{const c=this.uppy.getPlugin(o);c&&c.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery.removeListener(this.handleSystemDarkModeChange),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.modalName=`uppy-Dashboard-${lm()}`,this.defaultLocale=hm;const s={target:"body",metaFields:[],trigger:null,inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:fm,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:()=>{this.uppy.reset(),this.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:()=>this.closeModal(),showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};this.opts=w(w({},s),t),this.i18nInit(),this.superFocus=um(),this.ifFocusedOnUppyRecently=!1,this.makeDashboardInsidesVisibleAnywayTimeout=null,this.removeDragOverClassTimeout=null}onMount(){const e=this.el;am(e)||(e.dir="ltr")}}),ya.VERSION="2.1.3",va);const G=rr.exports,gm=fe.exports.Uppy,Ca=G.instanceOf(gm).isRequired,mm=G.arrayOf(G.string),ka=G.shape({strings:G.object,pluralize:G.func}),ym=G.shape({id:G.string.isRequired,name:G.string.isRequired,placeholder:G.string}),vm=G.oneOfType([G.arrayOf(ym),G.func]),Aa=G.oneOfType([G.string,G.number]),bm={uppy:Ca,inline:G.bool,plugins:mm,width:Aa,height:Aa,showProgressDetails:G.bool,hideUploadButton:G.bool,hideProgressAfterFinish:G.bool,note:G.string,metaFields:vm,proudlyDisplayPoweredByUppy:G.bool,disableStatusBar:G.bool,disableInformer:G.bool,disableThumbnailGenerator:G.bool,thumbnailWidth:G.number,locale:ka};var Vt={uppy:Ca,locale:ka,dashboard:bm};const wm=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Pm=/^(aria-|data-)/,_m=r=>Object.fromEntries(Object.entries(r).filter(e=>{let[t]=e;return Pm.test(t)||wm.includes(t)}));var kr=_m;const Sm=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var Ar=function(e,t){return Object.keys(e.props).some(n=>!Sm(e.validProps,n)&&e.props[n]!==t[n])};const Oa=Nt.exports,Fm=Fa,Cm=Vt.dashboard,km=kr,Am=Ar,Om=Oa.createElement;class Ei extends Oa.Component{componentDidMount(){this.installPlugin()}componentDidUpdate(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(Am(this,e)){const t=D(w({},this.props),{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:e}=this.props,t=D(w({id:"react:Dashboard"},this.props),{target:this.container});delete t.uppy,e.use(Fm,t),this.plugin=e.getPlugin(t.id)}uninstallPlugin(e){e===void 0&&(e=this.props);const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return this.validProps=km(this.props),Om("div",w({ref:e=>{this.container=e}},this.validProps))}}Ei.propTypes=Cm;Ei.defaultProps={inline:!0};var Tm=Ei,By=Tm;const Ta=Nt.exports,Gt=rr.exports,Em=Fa,Um=Vt.dashboard,Dm=kr,xm=Ar,Rm=Ta.createElement;class $m extends Ta.Component{componentDidMount(){this.installPlugin()}componentDidUpdate(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(xm(this,e)){const t=D(w({},this.props),{onRequestCloseModal:this.props.onRequestClose});delete t.uppy,this.plugin.setOptions(t)}e.open&&!this.props.open?this.plugin.closeModal():!e.open&&this.props.open&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:e}=this.props,t=D(w({id:"react:DashboardModal"},this.props),{onRequestCloseModal:this.props.onRequestClose});t.target||(t.target=this.container),delete t.uppy,e.use(Em,t),this.plugin=e.getPlugin(t.id),this.props.open&&this.plugin.openModal()}uninstallPlugin(e){e===void 0&&(e=this.props);const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return this.validProps=Dm(this.props),Rm("div",w({ref:e=>{this.container=e}},this.validProps))}}$m.propTypes=w({target:typeof window!="undefined"?Gt.instanceOf(window.HTMLElement):Gt.any,open:Gt.bool,onRequestClose:Gt.func,closeModalOnClickOutside:Gt.bool,disablePageScrollWhenModalOpen:Gt.bool},Um);var Bm={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}},Ea,Ua;const{UIPlugin:Nm}=fe.exports,Im=Ct,Lm=ia,Mm=yi,{h:ut}=W,jm=Bm;var zm=(Ua=Ea=class Da extends Nm{constructor(e,t){super(e,t);this.handleDrop=async s=>{var i,o;s.preventDefault(),s.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1});const c=y=>{this.uppy.log(y,"error")},f=await Mm(s.dataTransfer,{logDropError:c});f.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(f)),(i=(o=this.opts).onDrop)==null||i.call(o,s)},this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=jm;const n={target:null,inputName:"files[]",width:"100%",height:"100%",note:null};this.opts=w(w({},n),t),this.i18nInit(),this.isDragDropSupported=Lm(),this.removeDragOverClassTimeout=null,this.onInputChange=this.onInputChange.bind(this),this.handleDragOver=this.handleDragOver.bind(this),this.handleDragLeave=this.handleDragLeave.bind(this),this.handleDrop=this.handleDrop.bind(this),this.addFiles=this.addFiles.bind(this),this.render=this.render.bind(this)}addFiles(e){const t=e.map(n=>({source:this.id,name:n.name,type:n.type,data:n,meta:{relativePath:n.relativePath||null}}));try{this.uppy.addFiles(t)}catch(n){this.uppy.log(n)}}onInputChange(e){const t=Im(e.target.files);t.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(t)),e.target.value=null}handleDragOver(e){var t,n;e.preventDefault(),e.stopPropagation();const{types:s}=e.dataTransfer,i=s.some(c=>c==="Files"),{allowNewUpload:o}=this.uppy.getState();if(!i||!o){e.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(t=(n=this.opts).onDragOver)==null||t.call(n,e)}handleDragLeave(e){var t,n;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(t=(n=this.opts).onDragLeave)==null||t.call(n,e)}renderHiddenFileInput(){const{restrictions:e}=this.uppy.opts;return ut("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:t=>{this.fileInputRef=t},name:this.opts.inputName,multiple:e.maxNumberOfFiles!==1,accept:e.allowedFileTypes,onChange:this.onInputChange})}static renderArrowSvg(){return ut("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},ut("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}renderLabel(){return ut("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:ut("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}renderNote(){return ut("span",{className:"uppy-DragDrop-note"},this.opts.note)}render(){const e=`uppy-Root
      uppy-u-reset
      uppy-DragDrop-container
      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}
      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}
    `,t={width:this.opts.width,height:this.opts.height};return ut("button",{type:"button",className:e,style:t,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),ut("div",{className:"uppy-DragDrop-inner"},Da.renderArrowSvg(),this.renderLabel(),this.renderNote()))}install(){const{target:e}=this.opts;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}uninstall(){this.unmount()}},Ea.VERSION="2.0.6",Ua);const xa=Nt.exports,qm=zm,Ra=Vt,Hm=kr,Wm=Ar,Vm=xa.createElement;class $a extends xa.Component{componentDidMount(){this.installPlugin()}componentDidUpdate(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(Wm(this,e)){const t=D(w({},this.props),{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:e}=this.props,t=D(w({id:"react:DragDrop"},this.props),{target:this.container});delete t.uppy,e.use(qm,t),this.plugin=e.getPlugin(t.id)}uninstallPlugin(e){e===void 0&&(e=this.props);const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return this.validProps=Hm(this.props),Vm("div",w({ref:e=>{this.container=e}},this.validProps))}}$a.propTypes={uppy:Ra.uppy,locale:Ra.locale};$a.defaultProps={};var Ba,Na;const{UIPlugin:Gm}=fe.exports,{h:Ui}=W;var Km=(Na=Ba=class extends Gm{constructor(e,t){super(e,t);this.id=this.opts.id||"ProgressBar",this.title="Progress Bar",this.type="progressindicator";const n={target:"body",fixed:!1,hideAfterFinish:!0};this.opts=w(w({},n),t),this.render=this.render.bind(this)}render(e){const t=e.totalProgress||0,n=(t===0||t===100)&&this.opts.hideAfterFinish;return Ui("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":n},Ui("div",{className:"uppy-ProgressBar-inner",style:{width:`${t}%`}}),Ui("div",{className:"uppy-ProgressBar-percentage"},t))}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}},Ba.VERSION="2.0.4",Na);const Ia=Nt.exports,La=rr.exports,Xm=Km,Ym=Vt.uppy,Qm=kr,Jm=Ar,Zm=Ia.createElement;class Di extends Ia.Component{componentDidMount(){this.installPlugin()}componentDidUpdate(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(Jm(this,e)){const t=D(w({},this.props),{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:e}=this.props,t=D(w({id:"react:ProgressBar"},this.props),{target:this.container});delete t.uppy,e.use(Xm,t),this.plugin=e.getPlugin(t.id)}uninstallPlugin(e){e===void 0&&(e=this.props);const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return this.validProps=Qm(this.props),Zm("div",w({ref:e=>{this.container=e}},this.validProps))}}Di.propTypes={uppy:Ym,fixed:La.bool,hideAfterFinish:La.bool};Di.defaultProps={};var Iy=Di;const Ma=Nt.exports,ja=rr.exports,ey=Wo,ty=Vt.uppy,ry=kr,ny=Ar,iy=Ma.createElement;class za extends Ma.Component{componentDidMount(){this.installPlugin()}componentDidUpdate(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(ny(this,e)){const t=D(w({},this.props),{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:e}=this.props,t=D(w({id:"react:StatusBar"},this.props),{target:this.container});delete t.uppy,e.use(ey,t),this.plugin=e.getPlugin(t.id)}uninstallPlugin(e){e===void 0&&(e=this.props);const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return this.validProps=ry(this.props),iy("div",w({ref:e=>{this.container=e}},this.validProps))}}za.propTypes={uppy:ty,hideAfterFinish:ja.bool,showProgressDetails:ja.bool};za.defaultProps={};var sy={strings:{chooseFiles:"Choose files"}},qa,Ha;const{UIPlugin:oy}=fe.exports,ay=Ct,{h:xi}=W,ly=sy;var uy=(Ha=qa=class extends oy{constructor(e,t){super(e,t);this.id=this.opts.id||"FileInput",this.title="File Input",this.type="acquirer",this.defaultLocale=ly;const n={target:null,pretty:!0,inputName:"files[]"};this.opts=w(w({},n),t),this.i18nInit(),this.render=this.render.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleClick=this.handleClick.bind(this)}addFiles(e){const t=e.map(n=>({source:this.id,name:n.name,type:n.type,data:n}));try{this.uppy.addFiles(t)}catch(n){this.uppy.log(n)}}handleInputChange(e){this.uppy.log("[FileInput] Something selected through input...");const t=ay(e.target.files);this.addFiles(t),e.target.value=null}handleClick(){this.input.click()}render(){const e={width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},{restrictions:t}=this.uppy.opts,n=t.allowedFileTypes?t.allowedFileTypes.join(","):null;return xi("div",{className:"uppy-Root uppy-FileInput-container"},xi("input",{className:"uppy-FileInput-input",style:this.opts.pretty&&e,type:"file",name:this.opts.inputName,onChange:this.handleInputChange,multiple:t.maxNumberOfFiles!==1,accept:n,ref:s=>{this.input=s}}),this.opts.pretty&&xi("button",{className:"uppy-FileInput-btn",type:"button",onClick:this.handleClick},this.i18n("chooseFiles")))}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}},qa.VERSION="2.0.5",Ha);const Wa=rr.exports,Va=Nt.exports,cy=uy,Ga=Vt,dy=Va.createElement;class Ka extends Va.Component{componentDidMount(){this.installPlugin()}componentDidUpdate(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:e}=this.props,t=D(w({id:"react:FileInput"},this.props),{target:this.container});delete t.uppy,e.use(cy,t),this.plugin=e.getPlugin(t.id)}uninstallPlugin(e){e===void 0&&(e=this.props);const{uppy:t}=e;t.removePlugin(this.plugin)}render(){return dy("div",{ref:e=>{this.container=e}})}}Ka.propTypes={uppy:Ga.uppy,locale:Ga.locale,pretty:Wa.bool,inputName:Wa.string};Ka.defaultProps={};fe.exports.Uppy;var Xa,Ya;const hy=Hr,py=yi,fy=Ct;var gy=(Ya=Xa=class extends hy{constructor(e,t){super(e,t);this.addFiles=s=>{const i=s.map(o=>({source:this.id,name:o.name,type:o.type,data:o,meta:{relativePath:o.relativePath||null}}));try{this.uppy.addFiles(i)}catch(o){this.uppy.log(o)}},this.handleDrop=async s=>{var i,o;s.preventDefault(),s.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),s.currentTarget.classList.remove("uppy-is-drag-over"),this.setPluginState({isDraggingOver:!1}),this.uppy.log("[DropTarget] Files were dropped");const c=y=>{this.uppy.log(y,"error")},f=await py(s.dataTransfer,{logDropError:c});this.addFiles(f),(i=(o=this.opts).onDrop)==null||i.call(o,s)},this.handleDragOver=s=>{var i,o;s.preventDefault(),s.stopPropagation(),s.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),s.currentTarget.classList.add("uppy-is-drag-over"),this.setPluginState({isDraggingOver:!0}),(i=(o=this.opts).onDragOver)==null||i.call(o,s)},this.handleDragLeave=s=>{var i,o;s.preventDefault(),s.stopPropagation();const{currentTarget:c}=s;clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{c.classList.remove("uppy-is-drag-over"),this.setPluginState({isDraggingOver:!1})},50),(i=(o=this.opts).onDragLeave)==null||i.call(o,s)},this.addListeners=()=>{const{target:s}=this.opts;if(s instanceof Element?this.nodes=[s]:typeof s=="string"&&(this.nodes=fy(document.querySelectorAll(s))),!this.nodes&&!this.nodes.length>0)throw new Error(`"${s}" does not match any HTML elements`);this.nodes.forEach(i=>{i.addEventListener("dragover",this.handleDragOver,!1),i.addEventListener("dragleave",this.handleDragLeave,!1),i.addEventListener("drop",this.handleDrop,!1)})},this.removeListeners=()=>{this.nodes&&this.nodes.forEach(s=>{s.removeEventListener("dragover",this.handleDragOver,!1),s.removeEventListener("dragleave",this.handleDragLeave,!1),s.removeEventListener("drop",this.handleDrop,!1)})},this.type="acquirer",this.id=this.opts.id||"DropTarget",this.title="Drop Target";const n={target:null};this.opts=w(w({},n),t),this.removeDragOverClassTimeout=null}install(){this.setPluginState({isDraggingOver:!1}),this.addListeners()}uninstall(){this.removeListeners()}},Xa.VERSION="1.1.1",Ya),jy=gy;export{jy as D,Iy as P,Ty as T,Sy as U,gu as a,yu as b,Gd as c,By as d,gs as g,jp as i,fe as l,pu as m,W as r};
